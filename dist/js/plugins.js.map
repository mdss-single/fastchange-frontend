{"version":3,"sources":["input-mask.js","jquery.fancybox.js","jquery.formstyler.js","jquery.validate.js"],"names":["factory","jQuery","Zepto","define","amd","exports","module","require","$","Mask","el","mask","options","p","invalid","getCaret","sel","pos","ctrl","get","dSel","document","selection","cSelStart","selectionStart","navigator","appVersion","indexOf","createRange","moveStart","val","length","text","e","setCaret","is","range","setSelectionRange","createTextRange","collapse","moveEnd","select","events","on","data","keyCode","which","maskDigitPosMapOld","maskDigitPosMap","jMaskGlobals","useInput","behaviour","setTimeout","keydown","keyup","oldValue","trigger","selectOnFocus","target","clearIfNotMatch","regexMask","test","getRegexMask","translation","pattern","optional","recursive","oRecursive","r","maskChunks","i","jMask","charAt","toString","replace","push","digit","join","RegExp","destroyEvents","off","v","method","arguments","calculateCaretPosition","oldVal","newVal","getMasked","caretPosNew","caretPosOld","newValL","oldValL","maskDigitsBeforeCaret","maskDigitsAfterCaret","maskDigitsBeforeCaretAll","maskDigitsBeforeCaretAllOld","caretPos","window","event","inArray","byPassKeys","callbacks","skipMaskChars","lastMaskChar","check","buf","value","undefined","m","maskLen","valLen","offset","addMethod","resetPos","maskDigitCount","maskDigitPosArr","reverse","lastUntranslatedMaskChar","maskDigit","valDigit","match","fallback","lastMaskCharDigit","mapMaskdigitPositions","maskDiff","changed","defaultArgs","callback","name","criteria","args","apply","this","remove","caret","getCleanVal","getMaskedVal","init","onlyMask","extend","placeholder","attr","maxlength","maskWatchers","HTMLAttributes","input","prefix","notSameMaskObject","field","maskObject","stringify","JSON","fn","selector","globals","interval","watchInterval","watchInputs","maskFunction","each","clearInterval","setInterval","find","masked","unmask","dataMask","removeData","cleanVal","applyDataMask","maskElements","filter","dataMaskAttr","userAgent","eventName","isSupported","createElement","setAttribute","eventSupported","watchDataMask","0","9","#","A","S","_run","currentTarget","opts","items","index","active","fancybox","getInstance","preventDefault","current","$orig","open","error","defaults","loop","margin","gutter","keyboard","arrows","infobar","toolbar","buttons","idleTime","smallBtn","protect","modal","image","preload","ajax","settings","iframe","tpl","css","scrolling","animationEffect","animationDuration","zoomOpacity","transitionEffect","transitionDuration","slideClass","baseClass","baseTpl","spinnerTpl","errorTpl","btnTpl","slideShow","fullScreen","thumbs","close","parentEl","autoFocus","backFocus","trapFocus","autoStart","touch","vertical","momentum","hash","media","speed","hideOnClose","onInit","noop","beforeLoad","afterLoad","beforeShow","afterShow","beforeClose","afterClose","onActivate","onDeactivate","clickContent","type","clickSlide","clickOutside","dblclickContent","dblclickSlide","dblclickOutside","mobile","lang","i18n","en","CLOSE","NEXT","PREV","ERROR","PLAY_START","PLAY_STOP","FULL_SCREEN","THUMBS","de","$W","$D","called","isQuery","obj","hasOwnProperty","requestAFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","transitionEnd","t","transitions","transition","OTransition","MozTransition","WebkitTransition","style","forceRedraw","$el","offsetHeight","FancyBox","content","self","isArray","id","group","currIndex","parseInt","prevIndex","prevPos","currPos","firstRun","createGroup","$lastFocus","activeElement","blur","slides","prototype","testWidth","$container","buttonStr","firstItemOpts","scrollTop","scrollLeft","isMobile","width","addClass","append","translate","prependTo","$refs","container","forEach","item","activate","jumpTo","str","arr","n","makeArray","$item","src","srcParts","isPlainObject","srcset","$thumb","caption","split","shift","addEvents","removeEvents","stopPropagation","previous","next","originalEvent","update","stage","hide","show","instance","isClosing","hasClass","has","focus","keycode","idleSecondsCounter","isIdle","showControls","idleInterval","hideControls","duration","slide","canvasWidth","currentPos","transitionProps","groupLen","isSliding","isAnimating","createSlide","updateControls","getTranslate","$slide","isMoved","left","top","forcedDuration","isNumeric","removeClass","loadSlide","stop","Math","round","animate","removeAttr","complete","children","isLoaded","revealContent","isComplete","appendTo","updateSlide","scaleToActual","x","y","imgPos","posX","posY","scaleX","scaleY","$what","$content","canvasHeight","height","newImgWidth","newImgHeight","hasError","updateCursor","SlideShow","isActive","scaleToFit","end","getFitPos","minRatio","imgWidth","imgHeight","min","floor","key","setTranslate","nextWidth","nextHeight","isZoomable","isScaledDown","fitPos","isFunction","rez","canPan","abs","ajaxLoad","isLoading","setImage","setIframe","setContent","setError","showLoading","url","success","textStatus","jqXHR","one","abort","found","temp","pxRatio","windowWidth","devicePixelRatio","innerWidth","map","ret","trim","substring","postfix","sort","a","b","j","thumb","$ghost","setBigImage","$img","$image","clearTimeout","timouts","naturalWidth","naturalHeight","hideLoading","max","readyState","$iframe","Date","getTime","isReady","scrollWidth","$body","$wrap","frameWidth","frameHeight","contents","ignore","contentWindow","documentElement","ceil","outerWidth","outerHeight","innerHeight","prepend","empty","parent","$placeholder","insertAfter","nodeType","html","after","$smallBtn","first","$spinner","button","effect","effectClassName","opacity","start","getThumbPos","slidePos","thumbPos","ownerDocument","element","elementRect","getBoundingClientRect","parentRects","parentElement","every","parentRect","visiblePixelX","right","visiblePixelY","bottom","isElementVisible","parseFloat","siblings","prev","uid","body","d","done","cleanUp","Array","slice","call","unshift","force","$caption","isHiddenControls","prop","toggleClass","toggleControls","version","command","all","destroy","createTouch","use3d","div","getComputedStyle","getPropertyValue","documentMode","matrix","eq","transRez","exec","props","position","transform","to","leaveAnimationName","propertyName","format","params","param","youtube","matcher","autoplay","autohide","fs","rel","hd","wmode","enablejsapi","html5","paramPlace","vimeo","show_title","show_byline","show_portrait","fullscreen","api","metacafe","dailymotion","additionalInfos","vine","instagram","gmap_place","gmap_search","urlParams","o","provider","decodeURIComponent","contentProvider","cancelAFrame","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","pointers","result","touches","changedTouches","pageX","pageY","clientX","clientY","distance","point2","point1","what","sqrt","pow","isClickable","onclick","atts","attributes","nodeName","substr","hasScrollbars","overflowY","overflowX","scrollHeight","clientHeight","horizontal","clientWidth","isScrollable","Guestures","$bg","bg","$stage","proxy","ontouchstart","$target","isTouchDevice","startPoints","canTap","startTime","distanceX","distanceY","isPanning","isSwiping","isZooming","sliderStartPos","sliderLastPos","contentStartPos","contentLastPos","centerPointStartX","centerPointStartY","percentageOfImageAtPinchPointX","percentageOfImageAtPinchPointY","startDistanceBetweenFingers","ontouchmove","newPoints","onSwipe","onPan","onZoom","angle","swiping","atan2","PI","inTransition","requestId","newOffsetX","newOffsetY","newPos","limitMovement","newWidth","newHeight","minTranslateX","minTranslateY","maxTranslateX","maxTranslateY","currentOffsetX","currentOffsetY","limitPosition","currentWidth","currentHeight","pinchRatio","translateFromZoomingX","translateFromZoomingY","centerPointEndX","centerPointEndY","translateFromTranslatingX","ontouchend","dMs","panning","zooming","endPoints","onTap","velocityX","velocityY","speedX","endPanning","endZooming","endSwiping","reset","where","tapX","tapY","process","action","startEvent","tapped","timer","$button","toggle","set","clear","onInit.fb","beforeShow.fb","afterShow.fb","afterKeydown.fb","keypress","beforeClose.fb onDeactivate.fb","hidden","fnMap","FullScreen","request","elem","requestFullscreen","ALLOW_KEYBOARD_INPUT","exit","exitFullscreen","isFullscreen","Boolean","fullscreenElement","enabled","fullscreenEnabled","beforeClose.fb","fullscreenchange","FancyThumbs","$grid","$list","isVisible","second","create","list","widthRatio","heightRatio","$parent","thumbWidth","thumbHeight","margin-top","margin-left","Thumbs","parseUrl","location","pop","gallery","triggerFromUrl","escapeSelector","shouldCreateHistory","getGalleryID","rcssescape","ch","asCodePoint","charCodeAt","currentHash","timerID","origHash","history","title","pathname","search","replaceState","Plugin","locale","locales","onDocumentClick","parents","selectbox","dropdown","pluginName","onSelectClosed","idSuffix","filePlaceholder","fileBrowse","fileNumber","selectPlaceholder","selectSearch","selectSearchLimit","selectSearchNotFound","selectSearchPlaceholder","selectVisibleOptions","selectSmartPositioning","onSelectOpened","onFormStyled","Attributes","opt","classes","iOS","Android","checkboxOutput","att","checkbox","click","triggerHandler","change","closest","add","before","radioOutput","radio","commonParents","cachedThis","commonParent","inputName","fileOutput","browse","file","files","number","numberOutput","wrap","step","timeout","Number","changeValue","spin","newValue","decimals","multiplier","selectboxOutput","preventScrolling","scrollDiff","wheelDelta","detail","makeList","option","op","li","liClass","liClasses","dataList","optionClass","optgroupClass","dataJqfsClass","k","ul","size","ulHeight","liHeight","clkd","ctrlKey","metaKey","shiftKey","prevAll","nextAll","not","arrIndexes","doMultipleSelect","searchHTML","selectzIndex","divSelect","divText","optionSelected","notFound","liWidthInner","liWidth","display","l","selClone","clone","selCloneWidth","selectHeight","searchHeight","isMaxHeight","liSelected","liOuterHeight","win","topOffset","bottomOffset","visible","minHeight","dropDown","maxHeightBottom","maxHeightTop","dropUp","zIndex","query","hover","selectedText","liText","mouseout","selectedIndex","registered","doSelect","promise","returns","validate","validator","onsubmit","submitButton","cancelSubmit","handle","submitHandler","formSubmitted","currentForm","debug","form","pendingRequest","focusInvalid","console","warn","valid","errorList","concat","rules","argument","staticRules","existingRules","filtered","hasAttribute","normalizeRule","messages","normalizeRules","classRules","attributeRules","dataRules","required","remote","expr","pseudos","blank","filled","unchecked","source","constructor","groups","errorClass","pendingClass","validClass","errorElement","focusCleanup","errorContainer","errorLabelContainer","ignoreTitle","onfocusin","lastActive","unhighlight","hideThese","errorsFor","onfocusout","checkable","submitted","onkeyup","excludedKeys","elementValue","parentNode","highlight","findByName","setDefaults","email","date","dateISO","digits","equalTo","minlength","rangelength","autoCreateRanges","delegate","eventType","labelContainer","errorContext","containers","valueCache","pending","invalidHandler","checkForm","errorMap","showErrors","prepareForm","elements","currentElements","rs","cleanElement","clean","checkElement","validationTargetFor","prepareElement","testgroup","numberOfInvalids","toHide","errors","message","successList","grep","defaultShowErrors","resetForm","hideErrors","resetElements","objectLength","count","addWrapper","findLastActive","rulesCache","resetInternals","toShow","idx","$element","validity","badInput","lastIndexOf","rule","normalizer","rulesCount","dependencyMismatch","TypeError","parameters","methods","formatAndAdd","log","customDataMessage","toUpperCase","toLowerCase","customMessage","String","findDefined","defaultMessage","theregex","toToggle","wrapper","showLabel","validElements","invalidElements","place","errorID","elementID","idOrName","describedBy","errorPlacement","escapeCssMeta","describer","string","getLength","depend","dependTypes","boolean","function","startRequest","stopRequest","submit","previousValue","old","classRuleSettings","creditcard","addClassRules","className","normalizeAttributeRule","isNaN","getAttribute","depends","keepRule","parameter","parts","transformed","errorMessage","supportedTypes","re","decimalPlaces","num","toInt","Error","optionDataString","originalMessage","mode","port","dataType","context","response","pendingRequests","ajaxPrefilter","_","xhr","ajaxSettings"],"mappings":"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","file":"plugins.js","sourcesContent":["/**\r\n * jquery.mask.js\r\n * @version: v1.14.12\r\n * @author: Igor Escobar\r\n *\r\n * Created by Igor Escobar on 2012-03-10. Please report any bug at http://blog.igorescobar.com\r\n *\r\n * Copyright (c) 2012 Igor Escobar http://blog.igorescobar.com\r\n *\r\n * The MIT License (http://www.opensource.org/licenses/mit-license.php)\r\n *\r\n * Permission is hereby granted, free of charge, to any person\r\n * obtaining a copy of this software and associated documentation\r\n * files (the \"Software\"), to deal in the Software without\r\n * restriction, including without limitation the rights to use,\r\n * copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the\r\n * Software is furnished to do so, subject to the following\r\n * conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be\r\n * included in all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\r\n * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\r\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\r\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\r\n * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\r\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\r\n * OTHER DEALINGS IN THE SOFTWARE.\r\n */\r\n\r\n/* jshint laxbreak: true */\r\n/* jshint maxcomplexity:17 */\r\n/* global define */\r\n\r\n'use strict';\r\n\r\n// UMD (Universal Module Definition) patterns for JavaScript modules that work everywhere.\r\n// https://github.com/umdjs/umd/blob/master/jqueryPluginCommonjs.js\r\n(function (factory, jQuery, Zepto) {\r\n\r\n    if (typeof define === 'function' && define.amd) {\r\n        define(['jquery'], factory);\r\n    } else if (typeof exports === 'object') {\r\n        module.exports = factory(require('jquery'));\r\n    } else {\r\n        factory(jQuery || Zepto);\r\n    }\r\n\r\n}(function ($) {\r\n\r\n    var Mask = function (el, mask, options) {\r\n\r\n        var p = {\r\n            invalid: [],\r\n            getCaret: function () {\r\n                try {\r\n                    var sel,\r\n                        pos = 0,\r\n                        ctrl = el.get(0),\r\n                        dSel = document.selection,\r\n                        cSelStart = ctrl.selectionStart;\r\n\r\n                    // IE Support\r\n                    if (dSel && navigator.appVersion.indexOf('MSIE 10') === -1) {\r\n                        sel = dSel.createRange();\r\n                        sel.moveStart('character', -p.val().length);\r\n                        pos = sel.text.length;\r\n                    }\r\n                    // Firefox support\r\n                    else if (cSelStart || cSelStart === '0') {\r\n                        pos = cSelStart;\r\n                    }\r\n\r\n                    return pos;\r\n                } catch (e) {}\r\n            },\r\n            setCaret: function(pos) {\r\n                try {\r\n                    if (el.is(':focus')) {\r\n                        var range, ctrl = el.get(0);\r\n\r\n                        // Firefox, WebKit, etc..\r\n                        if (ctrl.setSelectionRange) {\r\n                            ctrl.setSelectionRange(pos, pos);\r\n                        } else { // IE\r\n                            range = ctrl.createTextRange();\r\n                            range.collapse(true);\r\n                            range.moveEnd('character', pos);\r\n                            range.moveStart('character', pos);\r\n                            range.select();\r\n                        }\r\n                    }\r\n                } catch (e) {}\r\n            },\r\n            events: function() {\r\n                el\r\n                .on('keydown.mask', function(e) {\r\n                    el.data('mask-keycode', e.keyCode || e.which);\r\n                    el.data('mask-previus-value', el.val());\r\n                    el.data('mask-previus-caret-pos', p.getCaret());\r\n                    p.maskDigitPosMapOld = p.maskDigitPosMap;\r\n                })\r\n                .on($.jMaskGlobals.useInput ? 'input.mask' : 'keyup.mask', p.behaviour)\r\n                .on('paste.mask drop.mask', function() {\r\n                    setTimeout(function() {\r\n                        el.keydown().keyup();\r\n                    }, 100);\r\n                })\r\n                .on('change.mask', function(){\r\n                    el.data('changed', true);\r\n                })\r\n                .on('blur.mask', function(){\r\n                    if (oldValue !== p.val() && !el.data('changed')) {\r\n                        el.trigger('change');\r\n                    }\r\n                    el.data('changed', false);\r\n                })\r\n                // it's very important that this callback remains in this position\r\n                // otherwhise oldValue it's going to work buggy\r\n                .on('blur.mask', function() {\r\n                    oldValue = p.val();\r\n                })\r\n                // select all text on focus\r\n                .on('focus.mask', function (e) {\r\n                    if (options.selectOnFocus === true) {\r\n                        $(e.target).select();\r\n                    }\r\n                })\r\n                // clear the value if it not complete the mask\r\n                .on('focusout.mask', function() {\r\n                    if (options.clearIfNotMatch && !regexMask.test(p.val())) {\r\n                       p.val('');\r\n                   }\r\n                });\r\n            },\r\n            getRegexMask: function() {\r\n                var maskChunks = [], translation, pattern, optional, recursive, oRecursive, r;\r\n\r\n                for (var i = 0; i < mask.length; i++) {\r\n                    translation = jMask.translation[mask.charAt(i)];\r\n\r\n                    if (translation) {\r\n\r\n                        pattern = translation.pattern.toString().replace(/.{1}$|^.{1}/g, '');\r\n                        optional = translation.optional;\r\n                        recursive = translation.recursive;\r\n\r\n                        if (recursive) {\r\n                            maskChunks.push(mask.charAt(i));\r\n                            oRecursive = {digit: mask.charAt(i), pattern: pattern};\r\n                        } else {\r\n                            maskChunks.push(!optional && !recursive ? pattern : (pattern + '?'));\r\n                        }\r\n\r\n                    } else {\r\n                        maskChunks.push(mask.charAt(i).replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&'));\r\n                    }\r\n                }\r\n\r\n                r = maskChunks.join('');\r\n\r\n                if (oRecursive) {\r\n                    r = r.replace(new RegExp('(' + oRecursive.digit + '(.*' + oRecursive.digit + ')?)'), '($1)?')\r\n                         .replace(new RegExp(oRecursive.digit, 'g'), oRecursive.pattern);\r\n                }\r\n\r\n                return new RegExp(r);\r\n            },\r\n            destroyEvents: function() {\r\n                el.off(['input', 'keydown', 'keyup', 'paste', 'drop', 'blur', 'focusout', ''].join('.mask '));\r\n            },\r\n            val: function(v) {\r\n                var isInput = el.is('input'),\r\n                    method = isInput ? 'val' : 'text',\r\n                    r;\r\n\r\n                if (arguments.length > 0) {\r\n                    if (el[method]() !== v) {\r\n                        el[method](v);\r\n                    }\r\n                    r = el;\r\n                } else {\r\n                    r = el[method]();\r\n                }\r\n\r\n                return r;\r\n            },\r\n            calculateCaretPosition: function() {\r\n                var oldVal = el.data('mask-previus-value') || '',\r\n                    newVal = p.getMasked(),\r\n                    caretPosNew = p.getCaret();\r\n                if (oldVal !== newVal) {\r\n                    var caretPosOld = el.data('mask-previus-caret-pos') || 0,\r\n                        newValL = newVal.length,\r\n                        oldValL = oldVal.length,\r\n                        maskDigitsBeforeCaret = 0,\r\n                        maskDigitsAfterCaret = 0,\r\n                        maskDigitsBeforeCaretAll = 0,\r\n                        maskDigitsBeforeCaretAllOld = 0,\r\n                        i = 0;\r\n\r\n                    for (i = caretPosNew; i < newValL; i++) {\r\n                        if (!p.maskDigitPosMap[i]) {\r\n                            break;\r\n                        }\r\n                        maskDigitsAfterCaret++;\r\n                    }\r\n\r\n                    for (i = caretPosNew - 1; i >= 0; i--) {\r\n                        if (!p.maskDigitPosMap[i]) {\r\n                            break;\r\n                        }\r\n                        maskDigitsBeforeCaret++;\r\n                    }\r\n\r\n                    for (i = caretPosNew - 1; i >= 0; i--) {\r\n                        if (p.maskDigitPosMap[i]) {\r\n                            maskDigitsBeforeCaretAll++;\r\n                        }\r\n                    }\r\n\r\n                    for (i = caretPosOld - 1; i >= 0; i--) {\r\n                        if (p.maskDigitPosMapOld[i]) {\r\n                            maskDigitsBeforeCaretAllOld++;\r\n                        }\r\n                    }\r\n\r\n                    // if the cursor is at the end keep it there\r\n                    if (caretPosNew > oldValL) {\r\n                      caretPosNew = newValL * 10;\r\n                    } else if (caretPosOld >= caretPosNew && caretPosOld !== oldValL) {\r\n                        if (!p.maskDigitPosMapOld[caretPosNew])  {\r\n                          var caretPos = caretPosNew;\r\n                          caretPosNew -= maskDigitsBeforeCaretAllOld - maskDigitsBeforeCaretAll;\r\n                          caretPosNew -= maskDigitsBeforeCaret;\r\n                          if (p.maskDigitPosMap[caretPosNew])  {\r\n                            caretPosNew = caretPos;\r\n                          }\r\n                        }\r\n                    }\r\n                    else if (caretPosNew > caretPosOld) {\r\n                        caretPosNew += maskDigitsBeforeCaretAll - maskDigitsBeforeCaretAllOld;\r\n                        caretPosNew += maskDigitsAfterCaret;\r\n                    }\r\n                }\r\n                return caretPosNew;\r\n            },\r\n            behaviour: function(e) {\r\n                e = e || window.event;\r\n                p.invalid = [];\r\n\r\n                var keyCode = el.data('mask-keycode');\r\n\r\n                if ($.inArray(keyCode, jMask.byPassKeys) === -1) {\r\n                    var newVal   = p.getMasked(),\r\n                        caretPos = p.getCaret();\r\n\r\n                    // this is a compensation to devices/browsers that don't compensate\r\n                    // caret positioning the right way\r\n                    setTimeout(function() {\r\n                      p.setCaret(p.calculateCaretPosition());\r\n                    }, 10);\r\n\r\n                    p.val(newVal);\r\n                    p.setCaret(caretPos);\r\n                    return p.callbacks(e);\r\n                }\r\n            },\r\n            getMasked: function(skipMaskChars, val) {\r\n                var buf = [],\r\n                    value = val === undefined ? p.val() : val + '',\r\n                    m = 0, maskLen = mask.length,\r\n                    v = 0, valLen = value.length,\r\n                    offset = 1, addMethod = 'push',\r\n                    resetPos = -1,\r\n                    maskDigitCount = 0,\r\n                    maskDigitPosArr = [],\r\n                    lastMaskChar,\r\n                    check;\r\n\r\n                if (options.reverse) {\r\n                    addMethod = 'unshift';\r\n                    offset = -1;\r\n                    lastMaskChar = 0;\r\n                    m = maskLen - 1;\r\n                    v = valLen - 1;\r\n                    check = function () {\r\n                        return m > -1 && v > -1;\r\n                    };\r\n                } else {\r\n                    lastMaskChar = maskLen - 1;\r\n                    check = function () {\r\n                        return m < maskLen && v < valLen;\r\n                    };\r\n                }\r\n\r\n                var lastUntranslatedMaskChar;\r\n                while (check()) {\r\n                    var maskDigit = mask.charAt(m),\r\n                        valDigit = value.charAt(v),\r\n                        translation = jMask.translation[maskDigit];\r\n\r\n                    if (translation) {\r\n                        if (valDigit.match(translation.pattern)) {\r\n                            buf[addMethod](valDigit);\r\n                             if (translation.recursive) {\r\n                                if (resetPos === -1) {\r\n                                    resetPos = m;\r\n                                } else if (m === lastMaskChar) {\r\n                                    m = resetPos - offset;\r\n                                }\r\n\r\n                                if (lastMaskChar === resetPos) {\r\n                                    m -= offset;\r\n                                }\r\n                            }\r\n                            m += offset;\r\n                        } else if (valDigit === lastUntranslatedMaskChar) {\r\n                            // matched the last untranslated (raw) mask character that we encountered\r\n                            // likely an insert offset the mask character from the last entry; fall\r\n                            // through and only increment v\r\n                            maskDigitCount--;\r\n                            lastUntranslatedMaskChar = undefined;\r\n                        } else if (translation.optional) {\r\n                            m += offset;\r\n                            v -= offset;\r\n                        } else if (translation.fallback) {\r\n                            buf[addMethod](translation.fallback);\r\n                            m += offset;\r\n                            v -= offset;\r\n                        } else {\r\n                          p.invalid.push({p: v, v: valDigit, e: translation.pattern});\r\n                        }\r\n                        v += offset;\r\n                    } else {\r\n                        if (!skipMaskChars) {\r\n                            buf[addMethod](maskDigit);\r\n                        }\r\n\r\n                        if (valDigit === maskDigit) {\r\n                            maskDigitPosArr.push(v);\r\n                            v += offset;\r\n                        } else {\r\n                            lastUntranslatedMaskChar = maskDigit;\r\n                            maskDigitPosArr.push(v + maskDigitCount);\r\n                            maskDigitCount++;\r\n                        }\r\n\r\n                        m += offset;\r\n                    }\r\n                }\r\n\r\n                var lastMaskCharDigit = mask.charAt(lastMaskChar);\r\n                if (maskLen === valLen + 1 && !jMask.translation[lastMaskCharDigit]) {\r\n                    buf.push(lastMaskCharDigit);\r\n                }\r\n\r\n                var newVal = buf.join('');\r\n                p.mapMaskdigitPositions(newVal, maskDigitPosArr, valLen);\r\n                return newVal;\r\n            },\r\n            mapMaskdigitPositions: function(newVal, maskDigitPosArr, valLen) {\r\n              var maskDiff = options.reverse ? newVal.length - valLen : 0;\r\n              p.maskDigitPosMap = {};\r\n              for (var i = 0; i < maskDigitPosArr.length; i++) {\r\n                p.maskDigitPosMap[maskDigitPosArr[i] + maskDiff] = 1;\r\n              }\r\n            },\r\n            callbacks: function (e) {\r\n                var val = p.val(),\r\n                    changed = val !== oldValue,\r\n                    defaultArgs = [val, e, el, options],\r\n                    callback = function(name, criteria, args) {\r\n                        if (typeof options[name] === 'function' && criteria) {\r\n                            options[name].apply(this, args);\r\n                        }\r\n                    };\r\n\r\n                callback('onChange', changed === true, defaultArgs);\r\n                callback('onKeyPress', changed === true, defaultArgs);\r\n                callback('onComplete', val.length === mask.length, defaultArgs);\r\n                callback('onInvalid', p.invalid.length > 0, [val, e, el, p.invalid, options]);\r\n            }\r\n        };\r\n\r\n        el = $(el);\r\n        var jMask = this, oldValue = p.val(), regexMask;\r\n\r\n        mask = typeof mask === 'function' ? mask(p.val(), undefined, el,  options) : mask;\r\n\r\n        // public methods\r\n        jMask.mask = mask;\r\n        jMask.options = options;\r\n        jMask.remove = function() {\r\n            var caret = p.getCaret();\r\n            p.destroyEvents();\r\n            p.val(jMask.getCleanVal());\r\n            p.setCaret(caret);\r\n            return el;\r\n        };\r\n\r\n        // get value without mask\r\n        jMask.getCleanVal = function() {\r\n           return p.getMasked(true);\r\n        };\r\n\r\n        // get masked value without the value being in the input or element\r\n        jMask.getMaskedVal = function(val) {\r\n           return p.getMasked(false, val);\r\n        };\r\n\r\n       jMask.init = function(onlyMask) {\r\n            onlyMask = onlyMask || false;\r\n            options = options || {};\r\n\r\n            jMask.clearIfNotMatch  = $.jMaskGlobals.clearIfNotMatch;\r\n            jMask.byPassKeys       = $.jMaskGlobals.byPassKeys;\r\n            jMask.translation      = $.extend({}, $.jMaskGlobals.translation, options.translation);\r\n\r\n            jMask = $.extend(true, {}, jMask, options);\r\n\r\n            regexMask = p.getRegexMask();\r\n\r\n            if (onlyMask) {\r\n                p.events();\r\n                p.val(p.getMasked());\r\n            } else {\r\n                if (options.placeholder) {\r\n                    el.attr('placeholder' , options.placeholder);\r\n                }\r\n\r\n                // this is necessary, otherwise if the user submit the form\r\n                // and then press the \"back\" button, the autocomplete will erase\r\n                // the data. Works fine on IE9+, FF, Opera, Safari.\r\n                if (el.data('mask')) {\r\n                  el.attr('autocomplete', 'off');\r\n                }\r\n\r\n                // detect if is necessary let the user type freely.\r\n                // for is a lot faster than forEach.\r\n                for (var i = 0, maxlength = true; i < mask.length; i++) {\r\n                    var translation = jMask.translation[mask.charAt(i)];\r\n                    if (translation && translation.recursive) {\r\n                        maxlength = false;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (maxlength) {\r\n                    el.attr('maxlength', mask.length);\r\n                }\r\n\r\n                p.destroyEvents();\r\n                p.events();\r\n\r\n                var caret = p.getCaret();\r\n                p.val(p.getMasked());\r\n                p.setCaret(caret);\r\n            }\r\n        };\r\n\r\n        jMask.init(!el.is('input'));\r\n    };\r\n\r\n    $.maskWatchers = {};\r\n    var HTMLAttributes = function () {\r\n        var input = $(this),\r\n            options = {},\r\n            prefix = 'data-mask-',\r\n            mask = input.attr('data-mask');\r\n\r\n        if (input.attr(prefix + 'reverse')) {\r\n            options.reverse = true;\r\n        }\r\n\r\n        if (input.attr(prefix + 'clearifnotmatch')) {\r\n            options.clearIfNotMatch = true;\r\n        }\r\n\r\n        if (input.attr(prefix + 'selectonfocus') === 'true') {\r\n           options.selectOnFocus = true;\r\n        }\r\n\r\n        if (notSameMaskObject(input, mask, options)) {\r\n            return input.data('mask', new Mask(this, mask, options));\r\n        }\r\n    },\r\n    notSameMaskObject = function(field, mask, options) {\r\n        options = options || {};\r\n        var maskObject = $(field).data('mask'),\r\n            stringify = JSON.stringify,\r\n            value = $(field).val() || $(field).text();\r\n        try {\r\n            if (typeof mask === 'function') {\r\n                mask = mask(value);\r\n            }\r\n            return typeof maskObject !== 'object' || stringify(maskObject.options) !== stringify(options) || maskObject.mask !== mask;\r\n        } catch (e) {}\r\n    },\r\n    eventSupported = function(eventName) {\r\n        var el = document.createElement('div'), isSupported;\r\n\r\n        eventName = 'on' + eventName;\r\n        isSupported = (eventName in el);\r\n\r\n        if ( !isSupported ) {\r\n            el.setAttribute(eventName, 'return;');\r\n            isSupported = typeof el[eventName] === 'function';\r\n        }\r\n        el = null;\r\n\r\n        return isSupported;\r\n    };\r\n\r\n    $.fn.mask = function(mask, options) {\r\n        options = options || {};\r\n        var selector = this.selector,\r\n            globals = $.jMaskGlobals,\r\n            interval = globals.watchInterval,\r\n            watchInputs = options.watchInputs || globals.watchInputs,\r\n            maskFunction = function() {\r\n                if (notSameMaskObject(this, mask, options)) {\r\n                    return $(this).data('mask', new Mask(this, mask, options));\r\n                }\r\n            };\r\n\r\n        $(this).each(maskFunction);\r\n\r\n        if (selector && selector !== '' && watchInputs) {\r\n            clearInterval($.maskWatchers[selector]);\r\n            $.maskWatchers[selector] = setInterval(function(){\r\n                $(document).find(selector).each(maskFunction);\r\n            }, interval);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    $.fn.masked = function(val) {\r\n        return this.data('mask').getMaskedVal(val);\r\n    };\r\n\r\n    $.fn.unmask = function() {\r\n        clearInterval($.maskWatchers[this.selector]);\r\n        delete $.maskWatchers[this.selector];\r\n        return this.each(function() {\r\n            var dataMask = $(this).data('mask');\r\n            if (dataMask) {\r\n                dataMask.remove().removeData('mask');\r\n            }\r\n        });\r\n    };\r\n\r\n    $.fn.cleanVal = function() {\r\n        return this.data('mask').getCleanVal();\r\n    };\r\n\r\n    $.applyDataMask = function(selector) {\r\n        selector = selector || $.jMaskGlobals.maskElements;\r\n        var $selector = (selector instanceof $) ? selector : $(selector);\r\n        $selector.filter($.jMaskGlobals.dataMaskAttr).each(HTMLAttributes);\r\n    };\r\n\r\n    var globals = {\r\n        maskElements: 'input,td,span,div',\r\n        dataMaskAttr: '*[data-mask]',\r\n        dataMask: true,\r\n        watchInterval: 300,\r\n        watchInputs: true,\r\n        // old versions of chrome dont work great with input event\r\n        useInput: !/Chrome\\/[2-4][0-9]|SamsungBrowser/.test(window.navigator.userAgent) && eventSupported('input'),\r\n        watchDataMask: false,\r\n        byPassKeys: [9, 16, 17, 18, 36, 37, 38, 39, 40, 91],\r\n        translation: {\r\n            '0': {pattern: /\\d/},\r\n            '9': {pattern: /\\d/, optional: true},\r\n            '#': {pattern: /\\d/, recursive: true},\r\n            'A': {pattern: /[a-zA-Z0-9]/},\r\n            'S': {pattern: /[a-zA-Z]/}\r\n        }\r\n    };\r\n\r\n    $.jMaskGlobals = $.jMaskGlobals || {};\r\n    globals = $.jMaskGlobals = $.extend(true, {}, globals, $.jMaskGlobals);\r\n\r\n    // looking for inputs with data-mask attribute\r\n    if (globals.dataMask) {\r\n        $.applyDataMask();\r\n    }\r\n\r\n    setInterval(function() {\r\n        if ($.jMaskGlobals.watchDataMask) {\r\n            $.applyDataMask();\r\n        }\r\n    }, globals.watchInterval);\r\n}, window.jQuery, window.Zepto));","// ==================================================\r\n// fancyBox v3.1.28\r\n//\r\n// Licensed GPLv3 for open source use\r\n// or fancyBox Commercial License for commercial use\r\n//\r\n// http://fancyapps.com/fancybox/\r\n// Copyright 2017 fancyApps\r\n//\r\n// ==================================================\r\n;(function (window, document, $, undefined) {\r\n    'use strict';\r\n\r\n    // If there's no jQuery, fancyBox can't work\r\n    // =========================================\r\n\r\n    if ( !$ ) {\r\n        return;\r\n    }\r\n\r\n    // Check if fancyBox is already initialized\r\n    // ========================================\r\n\r\n    if ( $.fn.fancybox ) {\r\n\r\n        $.error('fancyBox already initialized');\r\n\r\n        return;\r\n    }\r\n\r\n    // Private default settings\r\n    // ========================\r\n\r\n    var defaults = {\r\n\r\n        // Enable infinite gallery navigation\r\n        loop : false,\r\n\r\n        // Space around image, ignored if zoomed-in or viewport width is smaller than 800px\r\n        margin : [44, 0],\r\n\r\n        // Horizontal space between slides\r\n        gutter : 50,\r\n\r\n        // Enable keyboard navigation\r\n        keyboard : true,\r\n\r\n        // Should display navigation arrows at the screen edges\r\n        arrows : true,\r\n\r\n        // Should display infobar (counter and arrows at the top)\r\n        infobar : false,\r\n\r\n        // Should display toolbar (buttons at the top)\r\n        toolbar : true,\r\n\r\n        // What buttons should appear in the top right corner.\r\n        // Buttons will be created using templates from `btnTpl` option\r\n        // and they will be placed into toolbar (class=\"fancybox-toolbar\"` element)\r\n        buttons : [\r\n            'slideShow',\r\n            'fullScreen',\r\n            'thumbs',\r\n            'close'\r\n        ],\r\n\r\n        // Detect \"idle\" time in seconds\r\n        idleTime : 4,\r\n\r\n        // Should display buttons at top right corner of the content\r\n        // If 'auto' - they will be created for content having type 'html', 'inline' or 'ajax'\r\n        // Use template from `btnTpl.smallBtn` for customization\r\n        smallBtn : 'auto',\r\n\r\n        // Disable right-click and use simple image protection for images\r\n        protect : false,\r\n\r\n        // Shortcut to make content \"modal\" - disable keyboard navigtion, hide buttons, etc\r\n        modal : false,\r\n\r\n        image : {\r\n\r\n            // Wait for images to load before displaying\r\n            // Requires predefined image dimensions\r\n            // If 'auto' - will zoom in thumbnail if 'width' and 'height' attributes are found\r\n            preload : \"auto\",\r\n\r\n        },\r\n\r\n        ajax : {\r\n\r\n            // Object containing settings for ajax request\r\n            settings : {\r\n\r\n                // This helps to indicate that request comes from the modal\r\n                // Feel free to change naming\r\n                data : {\r\n                    fancybox : true\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        iframe : {\r\n\r\n            // Iframe template\r\n            tpl : '<iframe id=\"fancybox-frame{rnd}\" name=\"fancybox-frame{rnd}\" class=\"fancybox-iframe\" frameborder=\"0\" vspace=\"0\" hspace=\"0\" webkitAllowFullScreen mozallowfullscreen allowFullScreen allowtransparency=\"true\" src=\"\"></iframe>',\r\n\r\n            // Preload iframe before displaying it\r\n            // This allows to calculate iframe content width and height\r\n            // (note: Due to \"Same Origin Policy\", you can't get cross domain data).\r\n            preload : true,\r\n\r\n            // Custom CSS styling for iframe wrapping element\r\n            // You can use this to set custom iframe dimensions\r\n            css : {},\r\n\r\n            // Iframe tag attributes\r\n            attr : {\r\n                scrolling : 'auto'\r\n            }\r\n\r\n        },\r\n\r\n        // Open/close animation type\r\n        // Possible values:\r\n        //   false            - disable\r\n        //   \"zoom\"           - zoom images from/to thumbnail\r\n        //   \"fade\"\r\n        //   \"zoom-in-out\"\r\n        //\r\n        animationEffect : \"zoom\",\r\n\r\n        // Duration in ms for open/close animation\r\n        animationDuration : 366,\r\n\r\n        // Should image change opacity while zooming\r\n        // If opacity is 'auto', then opacity will be changed if image and thumbnail have different aspect ratios\r\n        zoomOpacity : 'auto',\r\n\r\n        // Transition effect between slides\r\n        //\r\n        // Possible values:\r\n        //   false            - disable\r\n        //   \"fade'\r\n        //   \"slide'\r\n        //   \"circular'\r\n        //   \"tube'\r\n        //   \"zoom-in-out'\r\n        //   \"rotate'\r\n        //\r\n        transitionEffect : \"fade\",\r\n\r\n        // Duration in ms for transition animation\r\n        transitionDuration : 366,\r\n\r\n        // Custom CSS class for slide element\r\n        slideClass : '',\r\n\r\n        // Custom CSS class for layout\r\n        baseClass : '',\r\n\r\n        // Base template for layout\r\n        baseTpl\t:\r\n            '<div class=\"fancybox-container\" role=\"dialog\" tabindex=\"-1\">' +\r\n                '<div class=\"fancybox-bg\"></div>' +\r\n                '<div class=\"fancybox-inner\">' +\r\n                    '<div class=\"fancybox-infobar\">' +\r\n                        '<button data-fancybox-prev title=\"{{PREV}}\" class=\"fancybox-button fancybox-button--left\"></button>' +\r\n                        '<div class=\"fancybox-infobar__body\">' +\r\n                            '<span data-fancybox-index></span>&nbsp;/&nbsp;<span data-fancybox-count></span>' +\r\n                        '</div>' +\r\n                        '<button data-fancybox-next title=\"{{NEXT}}\" class=\"fancybox-button fancybox-button--right\"></button>' +\r\n                    '</div>' +\r\n                    '<div class=\"fancybox-toolbar\">' +\r\n                        '{{BUTTONS}}' +\r\n                    '</div>' +\r\n                    '<div class=\"fancybox-navigation\">' +\r\n                        '<button data-fancybox-prev title=\"{{PREV}}\" class=\"fancybox-arrow fancybox-arrow--left\" />' +\r\n                        '<button data-fancybox-next title=\"{{NEXT}}\" class=\"fancybox-arrow fancybox-arrow--right\" />' +\r\n                    '</div>' +\r\n                    '<div class=\"fancybox-stage\"></div>' +\r\n                    '<div class=\"fancybox-caption-wrap\">' +\r\n                        '<div class=\"fancybox-caption\"></div>' +\r\n                    '</div>' +\r\n                '</div>' +\r\n            '</div>',\r\n\r\n        // Loading indicator template\r\n        spinnerTpl : '<div class=\"fancybox-loading\"></div>',\r\n\r\n        // Error message template\r\n        errorTpl : '<div class=\"fancybox-error\"><p>{{ERROR}}<p></div>',\r\n\r\n        btnTpl : {\r\n            slideShow  : '<button data-fancybox-play class=\"fancybox-button fancybox-button--play\" title=\"{{PLAY_START}}\"></button>',\r\n            fullScreen : '<button data-fancybox-fullscreen class=\"fancybox-button fancybox-button--fullscreen\" title=\"{{FULL_SCREEN}}\"></button>',\r\n            thumbs     : '<button data-fancybox-thumbs class=\"fancybox-button fancybox-button--thumbs\" title=\"{{THUMBS}}\"></button>',\r\n            close      : '<button data-fancybox-close class=\"fancybox-button fancybox-button--close\" title=\"{{CLOSE}}\"></button>',\r\n\r\n            // This small close button will be appended to your html/inline/ajax content by default,\r\n            // if \"smallBtn\" option is not set to false\r\n            smallBtn   : '<button data-fancybox-close class=\"fancybox-close-small\" title=\"{{CLOSE}}\"></button>'\r\n        },\r\n\r\n        // Container is injected into this element\r\n        parentEl : 'body',\r\n\r\n\r\n        // Focus handling\r\n        // ==============\r\n\r\n        // Try to focus on the first focusable element after opening\r\n        autoFocus : true,\r\n\r\n        // Put focus back to active element after closing\r\n        backFocus : true,\r\n\r\n        // Do not let user to focus on element outside modal content\r\n        trapFocus : true,\r\n\r\n\r\n        // Module specific options\r\n        // =======================\r\n\r\n        fullScreen : {\r\n            autoStart : false,\r\n        },\r\n\r\n        // Set `touch: false` to disable dragging/swiping\r\n        touch : {\r\n            vertical : true,  // Allow to drag content vertically\r\n            momentum : true   // Continue movement after releasing mouse/touch when panning\r\n        },\r\n\r\n        // Hash value when initializing manually,\r\n        // set `false` to disable hash change\r\n        hash : null,\r\n\r\n        // Customize or add new media types\r\n        // Example:\r\n        /*\r\n        media : {\r\n            youtube : {\r\n                params : {\r\n                    autoplay : 0\r\n                }\r\n            }\r\n        }\r\n        */\r\n        media : {},\r\n\r\n        slideShow : {\r\n            autoStart : false,\r\n            speed     : 4000\r\n        },\r\n\r\n        thumbs : {\r\n            autoStart   : false,   // Display thumbnails on opening\r\n            hideOnClose : true     // Hide thumbnail grid when closing animation starts\r\n        },\r\n\r\n        // Callbacks\r\n        //==========\r\n\r\n        // See Documentation/API/Events for more information\r\n        // Example:\r\n        /*\r\n            afterShow: function( instance, current ) {\r\n                 console.info( 'Clicked element:' );\r\n                 console.info( current.opts.$orig );\r\n            }\r\n        */\r\n\r\n        onInit       : $.noop,  // When instance has been initialized\r\n\r\n        beforeLoad   : $.noop,  // Before the content of a slide is being loaded\r\n        afterLoad    : $.noop,  // When the content of a slide is done loading\r\n\r\n        beforeShow   : $.noop,  // Before open animation starts\r\n        afterShow    : $.noop,  // When content is done loading and animating\r\n\r\n        beforeClose  : $.noop,  // Before the instance attempts to close. Return false to cancel the close.\r\n        afterClose   : $.noop,  // After instance has been closed\r\n\r\n        onActivate   : $.noop,  // When instance is brought to front\r\n        onDeactivate : $.noop,  // When other instance has been activated\r\n\r\n\r\n        // Interaction\r\n        // ===========\r\n\r\n        // Use options below to customize taken action when user clicks or double clicks on the fancyBox area,\r\n        // each option can be string or method that returns value.\r\n        //\r\n        // Possible values:\r\n        //   \"close\"           - close instance\r\n        //   \"next\"            - move to next gallery item\r\n        //   \"nextOrClose\"     - move to next gallery item or close if gallery has only one item\r\n        //   \"toggleControls\"  - show/hide controls\r\n        //   \"zoom\"            - zoom image (if loaded)\r\n        //   false             - do nothing\r\n\r\n        // Clicked on the content\r\n        clickContent : function( current, event ) {\r\n            return current.type === 'image' ? 'zoom' : false;\r\n        },\r\n\r\n        // Clicked on the slide\r\n        clickSlide : 'close',\r\n\r\n        // Clicked on the background (backdrop) element\r\n        clickOutside : 'close',\r\n\r\n        // Same as previous two, but for double click\r\n        dblclickContent : false,\r\n        dblclickSlide   : false,\r\n        dblclickOutside : false,\r\n\r\n\r\n        // Custom options when mobile device is detected\r\n        // =============================================\r\n\r\n        mobile : {\r\n            clickContent : function( current, event ) {\r\n                return current.type === 'image' ? 'toggleControls' : false;\r\n            },\r\n            clickSlide : function( current, event ) {\r\n                return current.type === 'image' ? 'toggleControls' : 'close';\r\n            },\r\n            dblclickContent : function( current, event ) {\r\n                return current.type === 'image' ? 'zoom' : false;\r\n            },\r\n            dblclickSlide : function( current, event ) {\r\n                return current.type === 'image' ? 'zoom' : false;\r\n            }\r\n        },\r\n\r\n\r\n        // Internationalization\r\n        // ============\r\n\r\n        lang : 'en',\r\n        i18n : {\r\n            'en' : {\r\n                CLOSE       : 'Close',\r\n                NEXT        : 'Next',\r\n                PREV        : 'Previous',\r\n                ERROR       : 'The requested content cannot be loaded. <br/> Please try again later.',\r\n                PLAY_START  : 'Start slideshow',\r\n                PLAY_STOP   : 'Pause slideshow',\r\n                FULL_SCREEN : 'Full screen',\r\n                THUMBS      : 'Thumbnails'\r\n            },\r\n            'de' : {\r\n                CLOSE       : 'Schliessen',\r\n                NEXT        : 'Weiter',\r\n                PREV        : 'Zurück',\r\n                ERROR       : 'Die angeforderten Daten konnten nicht geladen werden. <br/> Bitte versuchen Sie es später nochmal.',\r\n                PLAY_START  : 'Diaschau starten',\r\n                PLAY_STOP   : 'Diaschau beenden',\r\n                FULL_SCREEN : 'Vollbild',\r\n                THUMBS      : 'Vorschaubilder'\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    // Few useful variables and methods\r\n    // ================================\r\n\r\n    var $W = $(window);\r\n    var $D = $(document);\r\n\r\n    var called = 0;\r\n\r\n\r\n    // Check if an object is a jQuery object and not a native JavaScript object\r\n    // ========================================================================\r\n\r\n    var isQuery = function ( obj ) {\r\n        return obj && obj.hasOwnProperty && obj instanceof $;\r\n    };\r\n\r\n\r\n    // Handle multiple browsers for \"requestAnimationFrame\" and \"cancelAnimationFrame\"\r\n    // ===============================================================================\r\n\r\n    var requestAFrame = (function () {\r\n        return window.requestAnimationFrame ||\r\n                window.webkitRequestAnimationFrame ||\r\n                window.mozRequestAnimationFrame ||\r\n                window.oRequestAnimationFrame ||\r\n                // if all else fails, use setTimeout\r\n                function (callback) {\r\n                    return window.setTimeout(callback, 1000 / 60);\r\n                };\r\n    })();\r\n\r\n\r\n    // Detect the supported transition-end event property name\r\n    // =======================================================\r\n\r\n    var transitionEnd = (function () {\r\n        var t, el = document.createElement(\"fakeelement\");\r\n\r\n        var transitions = {\r\n            \"transition\"      : \"transitionend\",\r\n            \"OTransition\"     : \"oTransitionEnd\",\r\n            \"MozTransition\"   : \"transitionend\",\r\n            \"WebkitTransition\": \"webkitTransitionEnd\"\r\n        };\r\n\r\n        for (t in transitions) {\r\n            if (el.style[t] !== undefined){\r\n                return transitions[t];\r\n            }\r\n        }\r\n    })();\r\n\r\n\r\n    // Force redraw on an element.\r\n    // This helps in cases where the browser doesn't redraw an updated element properly.\r\n    // =================================================================================\r\n\r\n    var forceRedraw = function( $el ) {\r\n        return ( $el && $el.length && $el[0].offsetHeight );\r\n    };\r\n\r\n\r\n    // Class definition\r\n    // ================\r\n\r\n    var FancyBox = function( content, opts, index ) {\r\n        var self = this;\r\n\r\n        self.opts  = $.extend( true, { index : index }, defaults, opts || {} );\r\n\r\n        // Exclude buttons option from deep merging\r\n        if ( opts && $.isArray( opts.buttons ) ) {\r\n            self.opts.buttons = opts.buttons;\r\n        }\r\n\r\n        self.id    = self.opts.id || ++called;\r\n        self.group = [];\r\n\r\n        self.currIndex = parseInt( self.opts.index, 10 ) || 0;\r\n        self.prevIndex = null;\r\n\r\n        self.prevPos = null;\r\n        self.currPos = 0;\r\n\r\n        self.firstRun = null;\r\n\r\n        // Create group elements from original item collection\r\n        self.createGroup( content );\r\n\r\n        if ( !self.group.length ) {\r\n            return;\r\n        }\r\n\r\n        // Save last active element and current scroll position\r\n        self.$lastFocus = $(document.activeElement).blur();\r\n\r\n        // Collection of gallery objects\r\n        self.slides = {};\r\n\r\n        self.init( content );\r\n\r\n    };\r\n\r\n    $.extend(FancyBox.prototype, {\r\n\r\n        // Create DOM structure\r\n        // ====================\r\n\r\n        init : function() {\r\n            var self = this;\r\n\r\n            var testWidth, $container, buttonStr;\r\n\r\n            var firstItemOpts = self.group[ self.currIndex ].opts;\r\n\r\n            self.scrollTop  = $D.scrollTop();\r\n            self.scrollLeft = $D.scrollLeft();\r\n\r\n\r\n            // Hide scrollbars\r\n            // ===============\r\n\r\n            if ( !$.fancybox.getInstance() && !$.fancybox.isMobile && $( 'body' ).css('overflow') !== 'hidden' ) {\r\n                testWidth = $( 'body' ).width();\r\n\r\n                $( 'html' ).addClass( 'fancybox-enabled' );\r\n\r\n                // Compare body width after applying \"overflow: hidden\"\r\n                testWidth = $( 'body' ).width() - testWidth;\r\n\r\n                // If width has changed - compensate missing scrollbars by adding right margin\r\n                if ( testWidth > 1 ) {\r\n                    $( 'head' ).append( '<style id=\"fancybox-style-noscroll\" type=\"text/css\">.compensate-for-scrollbar, .fancybox-enabled body { margin-right: ' + testWidth + 'px; }</style>' );\r\n                }\r\n            }\r\n\r\n\r\n            // Build html markup and set references\r\n            // ====================================\r\n\r\n            // Build html code for buttons and insert into main template\r\n            buttonStr = '';\r\n\r\n            $.each( firstItemOpts.buttons, function( index, value ) {\r\n                buttonStr += ( firstItemOpts.btnTpl[ value ] || '' );\r\n            });\r\n\r\n            // Create markup from base template, it will be initially hidden to\r\n            // avoid unnecessary work like painting while initializing is not complete\r\n            $container = $( self.translate( self, firstItemOpts.baseTpl.replace( '\\{\\{BUTTONS\\}\\}', buttonStr ) ) )\r\n                .addClass( 'fancybox-is-hidden' )\r\n                .attr('id', 'fancybox-container-' + self.id)\r\n                .addClass( firstItemOpts.baseClass )\r\n                .data( 'FancyBox', self )\r\n                .prependTo( firstItemOpts.parentEl );\r\n\r\n            // Create object holding references to jQuery wrapped nodes\r\n            self.$refs = {\r\n                container : $container\r\n            };\r\n\r\n            [ 'bg', 'inner', 'infobar', 'toolbar', 'stage', 'caption' ].forEach(function(item) {\r\n                self.$refs[ item ] = $container.find( '.fancybox-' + item );\r\n            });\r\n\r\n            // Check for redundant elements\r\n            if ( !firstItemOpts.arrows || self.group.length < 2 ) {\r\n                $container.find('.fancybox-navigation').remove();\r\n            }\r\n\r\n            if ( !firstItemOpts.infobar ) {\r\n                self.$refs.infobar.remove();\r\n            }\r\n\r\n            if ( !firstItemOpts.toolbar ) {\r\n                self.$refs.toolbar.remove();\r\n            }\r\n\r\n            self.trigger( 'onInit' );\r\n\r\n            // Bring to front and enable events\r\n            self.activate();\r\n\r\n            // Build slides, load and reveal content\r\n            self.jumpTo( self.currIndex );\r\n        },\r\n\r\n\r\n        // Simple i18n support - replaces object keys found in template\r\n        // with corresponding values\r\n        // ============================================================\r\n\r\n        translate : function( obj, str ) {\r\n            var arr = obj.opts.i18n[ obj.opts.lang ];\r\n\r\n            return str.replace(/\\{\\{(\\w+)\\}\\}/g, function(match, n) {\r\n                var value = arr[n];\r\n\r\n                if ( value === undefined ) {\r\n                    return match;\r\n                }\r\n\r\n                return value;\r\n            });\r\n        },\r\n\r\n        // Create array of gally item objects\r\n        // Check if each object has valid type and content\r\n        // ===============================================\r\n\r\n        createGroup : function ( content ) {\r\n            var self  = this;\r\n            var items = $.makeArray( content );\r\n\r\n            $.each(items, function( i, item ) {\r\n                var obj  = {},\r\n                    opts = {},\r\n                    data = [],\r\n                    $item,\r\n                    type,\r\n                    src,\r\n                    srcParts;\r\n\r\n                // Step 1 - Make sure we have an object\r\n                // ====================================\r\n\r\n                if ( $.isPlainObject( item ) ) {\r\n\r\n                    // We probably have manual usage here, something like\r\n                    // $.fancybox.open( [ { src : \"image.jpg\", type : \"image\" } ] )\r\n\r\n                    obj  = item;\r\n                    opts = item.opts || item;\r\n\r\n                } else if ( $.type( item ) === 'object' && $( item ).length ) {\r\n\r\n                    // Here we propbably have jQuery collection returned by some selector\r\n\r\n                    $item = $( item );\r\n                    data  = $item.data();\r\n\r\n                    opts = 'options' in data ? data.options : {};\r\n                    opts = $.type( opts ) === 'object' ? opts : {};\r\n\r\n                    obj.src  = 'src' in data ? data.src : ( opts.src || $item.attr( 'href' ) );\r\n\r\n                    [ 'width', 'height', 'thumb', 'type', 'filter' ].forEach(function(item) {\r\n                        if ( item in data ) {\r\n                            opts[ item ] = data[ item ];\r\n                        }\r\n                    });\r\n\r\n                    if ( 'srcset' in data ) {\r\n                        opts.image = { srcset : data.srcset };\r\n                    }\r\n\r\n                    opts.$orig = $item;\r\n\r\n                    if ( !obj.type && !obj.src ) {\r\n                        obj.type = 'inline';\r\n                        obj.src  = item;\r\n                    }\r\n\r\n                } else {\r\n\r\n                    // Assume we have a simple html code, for example:\r\n                    // $.fancybox.open( '<div><h1>Hi!</h1></div>' );\r\n\r\n                    obj = {\r\n                        type : 'html',\r\n                        src  : item + ''\r\n                    };\r\n\r\n                }\r\n\r\n                // Each gallery object has full collection of options\r\n                obj.opts = $.extend( true, {}, self.opts, opts );\r\n\r\n                if ( $.fancybox.isMobile ) {\r\n                    obj.opts = $.extend( true, {}, obj.opts, obj.opts.mobile );\r\n                }\r\n\r\n\r\n                // Step 2 - Make sure we have content type, if not - try to guess\r\n                // ==============================================================\r\n\r\n                type = obj.type || obj.opts.type;\r\n                src  = obj.src || '';\r\n\r\n                if ( !type && src ) {\r\n                    if ( src.match(/(^data:image\\/[a-z0-9+\\/=]*,)|(\\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\\?|#).*)?$)/i) ) {\r\n                        type = 'image';\r\n\r\n                    } else if ( src.match(/\\.(pdf)((\\?|#).*)?$/i) ) {\r\n                        type = 'pdf';\r\n\r\n                    } else if ( src.charAt(0) === '#' ) {\r\n                        type = 'inline';\r\n                    }\r\n                }\r\n\r\n                obj.type = type;\r\n\r\n\r\n                // Step 3 - Some adjustments\r\n                // =========================\r\n\r\n                obj.index = self.group.length;\r\n\r\n                // Check if $orig and $thumb objects exist\r\n                if ( obj.opts.$orig && !obj.opts.$orig.length ) {\r\n                    delete obj.opts.$orig;\r\n                }\r\n\r\n                if ( !obj.opts.$thumb && obj.opts.$orig ) {\r\n                    obj.opts.$thumb = obj.opts.$orig.find( 'img:first' );\r\n                }\r\n\r\n                if ( obj.opts.$thumb && !obj.opts.$thumb.length ) {\r\n                    delete obj.opts.$thumb;\r\n                }\r\n\r\n                // Caption is a \"special\" option, it can be passed as a method\r\n                if ( $.type( obj.opts.caption ) === 'function' ) {\r\n                    obj.opts.caption = obj.opts.caption.apply( item, [ self, obj ] );\r\n\r\n                } else if ( 'caption' in data ) {\r\n                    obj.opts.caption = data.caption;\r\n                }\r\n\r\n                // Make sure we have caption as a string\r\n                obj.opts.caption = obj.opts.caption === undefined ? '' : obj.opts.caption + '';\r\n\r\n                // Check if url contains \"filter\" used to filter the content\r\n                // Example: \"ajax.html #something\"\r\n                if ( type === 'ajax' ) {\r\n                    srcParts = src.split(/\\s+/, 2);\r\n\r\n                    if ( srcParts.length > 1 ) {\r\n                        obj.src = srcParts.shift();\r\n\r\n                        obj.opts.filter = srcParts.shift();\r\n                    }\r\n                }\r\n\r\n                if ( obj.opts.smallBtn == 'auto' ) {\r\n\r\n                    if ( $.inArray( type, ['html', 'inline', 'ajax'] ) > -1 ) {\r\n                        obj.opts.toolbar  = false;\r\n                        obj.opts.smallBtn = true;\r\n\r\n                    } else {\r\n                        obj.opts.smallBtn = false;\r\n                    }\r\n\r\n                }\r\n\r\n                // If the type is \"pdf\", then simply load file into iframe\r\n                if ( type === 'pdf' ) {\r\n                    obj.type = 'iframe';\r\n\r\n                    obj.opts.iframe.preload = false;\r\n                }\r\n\r\n                // Hide all buttons and disable interactivity for modal items\r\n                if ( obj.opts.modal ) {\r\n\r\n                    obj.opts = $.extend(true, obj.opts, {\r\n                        // Remove buttons\r\n                        infobar : 0,\r\n                        toolbar : 0,\r\n\r\n                        smallBtn : 0,\r\n\r\n                        // Disable keyboard navigation\r\n                        keyboard : 0,\r\n\r\n                        // Disable some modules\r\n                        slideShow  : 0,\r\n                        fullScreen : 0,\r\n                        thumbs     : 0,\r\n                        touch      : 0,\r\n\r\n                        // Disable click event handlers\r\n                        clickContent    : false,\r\n                        clickSlide      : false,\r\n                        clickOutside    : false,\r\n                        dblclickContent : false,\r\n                        dblclickSlide   : false,\r\n                        dblclickOutside : false\r\n                    });\r\n\r\n                }\r\n\r\n                // Step 4 - Add processed object to group\r\n                // ======================================\r\n\r\n                self.group.push( obj );\r\n\r\n            });\r\n\r\n        },\r\n\r\n\r\n        // Attach an event handler functions for:\r\n        //   - navigation buttons\r\n        //   - browser scrolling, resizing;\r\n        //   - focusing\r\n        //   - keyboard\r\n        //   - detect idle\r\n        // ======================================\r\n\r\n        addEvents : function() {\r\n            var self = this;\r\n\r\n            self.removeEvents();\r\n\r\n            // Make navigation elements clickable\r\n            self.$refs.container.on('click.fb-close', '[data-fancybox-close]', function(e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n\r\n                self.close( e );\r\n\r\n            }).on( 'click.fb-prev touchend.fb-prev', '[data-fancybox-prev]', function(e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n\r\n                self.previous();\r\n\r\n            }).on( 'click.fb-next touchend.fb-next', '[data-fancybox-next]', function(e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n\r\n                self.next();\r\n\r\n            });\r\n\r\n\r\n            // Handle page scrolling and browser resizing\r\n            $W.on('orientationchange.fb resize.fb', function(e) {\r\n\r\n                if ( e && e.originalEvent && e.originalEvent.type === \"resize\" ) {\r\n\r\n                    requestAFrame(function() {\r\n                        self.update();\r\n                    });\r\n\r\n                } else {\r\n\r\n                    self.$refs.stage.hide();\r\n\r\n                    setTimeout(function() {\r\n                        self.$refs.stage.show();\r\n\r\n                        self.update();\r\n                    }, 500);\r\n\r\n                }\r\n\r\n            });\r\n\r\n            // Trap keyboard focus inside of the modal, so the user does not accidentally tab outside of the modal\r\n            // (a.k.a. \"escaping the modal\")\r\n            $D.on('focusin.fb', function(e) {\r\n                var instance = $.fancybox ? $.fancybox.getInstance() : null;\r\n\r\n                if ( instance.isClosing || !instance.current || !instance.current.opts.trapFocus || $( e.target ).hasClass( 'fancybox-container' ) || $( e.target ).is( document ) ) {\r\n                    return;\r\n                }\r\n\r\n                if ( instance && $( e.target ).css( 'position' ) !== 'fixed' && !instance.$refs.container.has( e.target ).length ) {\r\n                    e.stopPropagation();\r\n\r\n                    instance.focus();\r\n\r\n                    // Sometimes page gets scrolled, set it back\r\n                    $W.scrollTop( self.scrollTop ).scrollLeft( self.scrollLeft );\r\n                }\r\n            });\r\n\r\n\r\n            // Enable keyboard navigation\r\n            $D.on('keydown.fb', function (e) {\r\n                var current = self.current,\r\n                    keycode = e.keyCode || e.which;\r\n\r\n                if ( !current || !current.opts.keyboard ) {\r\n                    return;\r\n                }\r\n\r\n                if ( $(e.target).is('input') || $(e.target).is('textarea') ) {\r\n                    return;\r\n                }\r\n\r\n                // Backspace and Esc keys\r\n                if ( keycode === 8 || keycode === 27 ) {\r\n                    e.preventDefault();\r\n\r\n                    self.close( e );\r\n\r\n                    return;\r\n                }\r\n\r\n                // Left arrow and Up arrow\r\n                if ( keycode === 37 || keycode === 38 ) {\r\n                    e.preventDefault();\r\n\r\n                    self.previous();\r\n\r\n                    return;\r\n                }\r\n\r\n                // Righ arrow and Down arrow\r\n                if ( keycode === 39 || keycode === 40 ) {\r\n                    e.preventDefault();\r\n\r\n                    self.next();\r\n\r\n                    return;\r\n                }\r\n\r\n                self.trigger('afterKeydown', e, keycode);\r\n            });\r\n\r\n\r\n            // Hide controls after some inactivity period\r\n            if ( self.group[ self.currIndex ].opts.idleTime ) {\r\n                self.idleSecondsCounter = 0;\r\n\r\n                $D.on('mousemove.fb-idle mouseenter.fb-idle mouseleave.fb-idle mousedown.fb-idle touchstart.fb-idle touchmove.fb-idle scroll.fb-idle keydown.fb-idle', function() {\r\n                    self.idleSecondsCounter = 0;\r\n\r\n                    if ( self.isIdle ) {\r\n                        self.showControls();\r\n                    }\r\n\r\n                    self.isIdle = false;\r\n                });\r\n\r\n                self.idleInterval = window.setInterval(function() {\r\n\r\n                    self.idleSecondsCounter++;\r\n\r\n                    if ( self.idleSecondsCounter >= self.group[ self.currIndex ].opts.idleTime ) {\r\n                        self.isIdle = true;\r\n                        self.idleSecondsCounter = 0;\r\n\r\n                        self.hideControls();\r\n                    }\r\n\r\n                }, 1000);\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Remove events added by the core\r\n        // ===============================\r\n\r\n        removeEvents : function () {\r\n            var self = this;\r\n\r\n            $W.off( 'orientationchange.fb resize.fb' );\r\n            $D.off( 'focusin.fb keydown.fb .fb-idle' );\r\n\r\n            this.$refs.container.off( '.fb-close .fb-prev .fb-next' );\r\n\r\n            if ( self.idleInterval ) {\r\n                window.clearInterval( self.idleInterval );\r\n\r\n                self.idleInterval = null;\r\n            }\r\n        },\r\n\r\n\r\n        // Change to previous gallery item\r\n        // ===============================\r\n\r\n        previous : function( duration ) {\r\n            return this.jumpTo( this.currPos - 1, duration );\r\n        },\r\n\r\n\r\n        // Change to next gallery item\r\n        // ===========================\r\n\r\n        next : function( duration ) {\r\n            return this.jumpTo( this.currPos + 1, duration );\r\n        },\r\n\r\n\r\n        // Switch to selected gallery item\r\n        // ===============================\r\n\r\n        jumpTo : function ( pos, duration, slide ) {\r\n            var self = this,\r\n                firstRun,\r\n                loop,\r\n                current,\r\n                previous,\r\n                canvasWidth,\r\n                currentPos,\r\n                transitionProps;\r\n\r\n            var groupLen = self.group.length;\r\n\r\n            if ( self.isSliding || self.isClosing || ( self.isAnimating && self.firstRun ) ) {\r\n                return;\r\n            }\r\n\r\n            pos  = parseInt( pos, 10 );\r\n            loop = self.current ? self.current.opts.loop : self.opts.loop;\r\n\r\n            if ( !loop && ( pos < 0 || pos >= groupLen ) ) {\r\n                return false;\r\n            }\r\n\r\n            firstRun = self.firstRun = ( self.firstRun === null );\r\n\r\n            if ( groupLen < 2 && !firstRun && !!self.isSliding ) {\r\n                return;\r\n            }\r\n\r\n            previous = self.current;\r\n\r\n            self.prevIndex = self.currIndex;\r\n            self.prevPos   = self.currPos;\r\n\r\n            // Create slides\r\n            current = self.createSlide( pos );\r\n\r\n            if ( groupLen > 1 ) {\r\n                if ( loop || current.index > 0 ) {\r\n                    self.createSlide( pos - 1 );\r\n                }\r\n\r\n                if ( loop || current.index < groupLen - 1 ) {\r\n                    self.createSlide( pos + 1 );\r\n                }\r\n            }\r\n\r\n            self.current   = current;\r\n            self.currIndex = current.index;\r\n            self.currPos   = current.pos;\r\n\r\n            self.trigger( 'beforeShow', firstRun );\r\n\r\n            self.updateControls();\r\n\r\n            currentPos = $.fancybox.getTranslate( current.$slide );\r\n\r\n            current.isMoved        = ( currentPos.left !== 0 || currentPos.top !== 0 ) && !current.$slide.hasClass( 'fancybox-animated' );\r\n            current.forcedDuration = undefined;\r\n\r\n            if ( $.isNumeric( duration ) ) {\r\n                current.forcedDuration = duration;\r\n            } else {\r\n                duration = current.opts[ firstRun ? 'animationDuration' : 'transitionDuration' ];\r\n            }\r\n\r\n            duration = parseInt( duration, 10 );\r\n\r\n            // Fresh start - reveal container, current slide and start loading content\r\n            if ( firstRun ) {\r\n\r\n                if ( current.opts.animationEffect && duration ) {\r\n                    self.$refs.container.css( 'transition-duration', duration + 'ms' );\r\n                }\r\n\r\n                self.$refs.container.removeClass( 'fancybox-is-hidden' );\r\n\r\n                forceRedraw( self.$refs.container );\r\n\r\n                self.$refs.container.addClass( 'fancybox-is-open' );\r\n\r\n                // Make first slide visible (to display loading icon, if needed)\r\n                current.$slide.addClass( 'fancybox-slide--current' );\r\n\r\n                self.loadSlide( current );\r\n\r\n                self.preload();\r\n\r\n                return;\r\n            }\r\n\r\n            // Clean up\r\n            $.each(self.slides, function( index, slide ) {\r\n                $.fancybox.stop( slide.$slide );\r\n            });\r\n\r\n            // Make current that slide is visible even if content is still loading\r\n            current.$slide.removeClass( 'fancybox-slide--next fancybox-slide--previous' ).addClass( 'fancybox-slide--current' );\r\n\r\n            // If slides have been dragged, animate them to correct position\r\n            if ( current.isMoved ) {\r\n                canvasWidth = Math.round( current.$slide.width() );\r\n\r\n                $.each(self.slides, function( index, slide ) {\r\n                    var pos = slide.pos - current.pos;\r\n\r\n                    $.fancybox.animate( slide.$slide, {\r\n                        top  : 0,\r\n                        left : ( pos * canvasWidth ) + ( pos * slide.opts.gutter )\r\n                    }, duration, function() {\r\n\r\n                        slide.$slide.removeAttr('style').removeClass( 'fancybox-slide--next fancybox-slide--previous' );\r\n\r\n                        if ( slide.pos === self.currPos ) {\r\n                            current.isMoved = false;\r\n\r\n                            self.complete();\r\n                        }\r\n                    });\r\n                });\r\n\r\n            } else {\r\n                self.$refs.stage.children().removeAttr( 'style' );\r\n            }\r\n\r\n            // Start transition that reveals current content\r\n            // or wait when it will be loaded\r\n\r\n            if ( current.isLoaded ) {\r\n                self.revealContent( current );\r\n\r\n            } else {\r\n                self.loadSlide( current );\r\n            }\r\n\r\n            self.preload();\r\n\r\n            if ( previous.pos === current.pos ) {\r\n                return;\r\n            }\r\n\r\n            // Handle previous slide\r\n            // =====================\r\n\r\n            transitionProps = 'fancybox-slide--' + ( previous.pos > current.pos ? 'next' : 'previous' );\r\n\r\n            previous.$slide.removeClass( 'fancybox-slide--complete fancybox-slide--current fancybox-slide--next fancybox-slide--previous' );\r\n\r\n            previous.isComplete = false;\r\n\r\n            if ( !duration || ( !current.isMoved && !current.opts.transitionEffect ) ) {\r\n                return;\r\n            }\r\n\r\n            if ( current.isMoved ) {\r\n                previous.$slide.addClass( transitionProps );\r\n\r\n            } else {\r\n\r\n                transitionProps = 'fancybox-animated ' + transitionProps + ' fancybox-fx-' + current.opts.transitionEffect;\r\n\r\n                $.fancybox.animate( previous.$slide, transitionProps, duration, function() {\r\n                    previous.$slide.removeClass( transitionProps ).removeAttr( 'style' );\r\n                });\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Create new \"slide\" element\r\n        // These are gallery items  that are actually added to DOM\r\n        // =======================================================\r\n\r\n        createSlide : function( pos ) {\r\n\r\n            var self = this;\r\n            var $slide;\r\n            var index;\r\n\r\n            index = pos % self.group.length;\r\n            index = index < 0 ? self.group.length + index : index;\r\n\r\n            if ( !self.slides[ pos ] && self.group[ index ] ) {\r\n                $slide = $('<div class=\"fancybox-slide\"></div>').appendTo( self.$refs.stage );\r\n\r\n                self.slides[ pos ] = $.extend( true, {}, self.group[ index ], {\r\n                    pos      : pos,\r\n                    $slide   : $slide,\r\n                    isLoaded : false,\r\n                });\r\n\r\n                self.updateSlide( self.slides[ pos ] );\r\n            }\r\n\r\n            return self.slides[ pos ];\r\n        },\r\n\r\n\r\n        // Scale image to the actual size of the image\r\n        // ===========================================\r\n\r\n        scaleToActual : function( x, y, duration ) {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var $what   = current.$content;\r\n\r\n            var imgPos, posX, posY, scaleX, scaleY;\r\n\r\n            var canvasWidth  = parseInt( current.$slide.width(), 10 );\r\n            var canvasHeight = parseInt( current.$slide.height(), 10 );\r\n\r\n            var newImgWidth  = current.width;\r\n            var newImgHeight = current.height;\r\n\r\n            if ( !( current.type == 'image' && !current.hasError) || !$what || self.isAnimating) {\r\n                return;\r\n            }\r\n\r\n            $.fancybox.stop( $what );\r\n\r\n            self.isAnimating = true;\r\n\r\n            x = x === undefined ? canvasWidth  * 0.5  : x;\r\n            y = y === undefined ? canvasHeight * 0.5  : y;\r\n\r\n            imgPos = $.fancybox.getTranslate( $what );\r\n\r\n            scaleX  = newImgWidth  / imgPos.width;\r\n            scaleY  = newImgHeight / imgPos.height;\r\n\r\n            // Get center position for original image\r\n            posX = ( canvasWidth * 0.5  - newImgWidth * 0.5 );\r\n            posY = ( canvasHeight * 0.5 - newImgHeight * 0.5 );\r\n\r\n            // Make sure image does not move away from edges\r\n            if ( newImgWidth > canvasWidth ) {\r\n                posX = imgPos.left * scaleX - ( ( x * scaleX ) - x );\r\n\r\n                if ( posX > 0 ) {\r\n                    posX = 0;\r\n                }\r\n\r\n                if ( posX <  canvasWidth - newImgWidth ) {\r\n                    posX = canvasWidth - newImgWidth;\r\n                }\r\n            }\r\n\r\n            if ( newImgHeight > canvasHeight) {\r\n                posY = imgPos.top  * scaleY - ( ( y * scaleY ) - y );\r\n\r\n                if ( posY > 0 ) {\r\n                    posY = 0;\r\n                }\r\n\r\n                if ( posY <  canvasHeight - newImgHeight ) {\r\n                    posY = canvasHeight - newImgHeight;\r\n                }\r\n            }\r\n\r\n            self.updateCursor( newImgWidth, newImgHeight );\r\n\r\n            $.fancybox.animate( $what, {\r\n                top    : posY,\r\n                left   : posX,\r\n                scaleX : scaleX,\r\n                scaleY : scaleY\r\n            }, duration || 330, function() {\r\n                self.isAnimating = false;\r\n            });\r\n\r\n            // Stop slideshow\r\n            if ( self.SlideShow && self.SlideShow.isActive ) {\r\n                self.SlideShow.stop();\r\n            }\r\n        },\r\n\r\n\r\n        // Scale image to fit inside parent element\r\n        // ========================================\r\n\r\n        scaleToFit : function( duration ) {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var $what   = current.$content;\r\n            var end;\r\n\r\n            if ( !( current.type == 'image' && !current.hasError) || !$what || self.isAnimating ) {\r\n                return;\r\n            }\r\n\r\n            $.fancybox.stop( $what );\r\n\r\n            self.isAnimating = true;\r\n\r\n            end = self.getFitPos( current );\r\n\r\n            self.updateCursor( end.width, end.height );\r\n\r\n            $.fancybox.animate( $what, {\r\n                top    : end.top,\r\n                left   : end.left,\r\n                scaleX : end.width  / $what.width(),\r\n                scaleY : end.height / $what.height()\r\n            }, duration || 330, function() {\r\n                self.isAnimating = false;\r\n            });\r\n\r\n        },\r\n\r\n        // Calculate image size to fit inside viewport\r\n        // ===========================================\r\n\r\n        getFitPos : function( slide ) {\r\n            var self  = this;\r\n            var $what = slide.$content;\r\n\r\n            var imgWidth  = slide.width;\r\n            var imgHeight = slide.height;\r\n\r\n            var margin = slide.opts.margin;\r\n\r\n            var canvasWidth, canvasHeight, minRatio, width, height;\r\n\r\n            if ( !$what || !$what.length || ( !imgWidth && !imgHeight) ) {\r\n                return false;\r\n            }\r\n\r\n            // Convert \"margin to CSS style: [ top, right, bottom, left ]\r\n            if ( $.type( margin ) === \"number\" ) {\r\n                margin = [ margin, margin ];\r\n            }\r\n\r\n            if ( margin.length == 2 ) {\r\n                margin = [ margin[0], margin[1], margin[0], margin[1] ];\r\n            }\r\n\r\n            if ( $W.width() < 800 ) {\r\n                margin = [ 0, 0, 0, 0 ];\r\n            }\r\n\r\n            // We can not use $slide width here, because it can have different diemensions while in transiton\r\n            canvasWidth  = parseInt( self.$refs.stage.width(), 10 )  - ( margin[ 1 ] + margin[ 3 ] );\r\n            canvasHeight = parseInt( self.$refs.stage.height(), 10 ) - ( margin[ 0 ] + margin[ 2 ] );\r\n\r\n            minRatio = Math.min(1, canvasWidth / imgWidth, canvasHeight / imgHeight );\r\n\r\n            width  = Math.floor( minRatio * imgWidth );\r\n            height = Math.floor( minRatio * imgHeight );\r\n\r\n            // Use floor rounding to make sure it really fits\r\n            return {\r\n                top    : Math.floor( ( canvasHeight - height ) * 0.5 ) + margin[ 0 ],\r\n                left   : Math.floor( ( canvasWidth  - width )  * 0.5 ) + margin[ 3 ],\r\n                width  : width,\r\n                height : height\r\n            };\r\n\r\n        },\r\n\r\n\r\n        // Update position and content of all slides\r\n        // =========================================\r\n\r\n        update : function() {\r\n\r\n            var self = this;\r\n\r\n            $.each( self.slides, function( key, slide ) {\r\n                self.updateSlide( slide );\r\n            });\r\n\r\n        },\r\n\r\n\r\n        // Update slide position and scale content to fit\r\n        // ==============================================\r\n\r\n        updateSlide : function( slide ) {\r\n\r\n            var self  = this;\r\n            var $what = slide.$content;\r\n\r\n            if ( $what && ( slide.width || slide.height ) ) {\r\n                $.fancybox.stop( $what );\r\n\r\n                $.fancybox.setTranslate( $what, self.getFitPos( slide ) );\r\n\r\n                if ( slide.pos === self.currPos ) {\r\n                    self.updateCursor();\r\n                }\r\n            }\r\n\r\n            slide.$slide.trigger( 'refresh' );\r\n\r\n            self.trigger( 'onUpdate', slide );\r\n\r\n        },\r\n\r\n        // Update cursor style depending if content can be zoomed\r\n        // ======================================================\r\n\r\n        updateCursor : function( nextWidth, nextHeight ) {\r\n\r\n            var self = this;\r\n            var isScaledDown;\r\n\r\n            var $container = self.$refs.container.removeClass('fancybox-is-zoomable fancybox-can-zoomIn fancybox-can-drag fancybox-can-zoomOut');\r\n\r\n            if ( !self.current || self.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            if ( self.isZoomable() ) {\r\n\r\n                $container.addClass( 'fancybox-is-zoomable' );\r\n\r\n                if ( nextWidth !== undefined && nextHeight !== undefined ) {\r\n                    isScaledDown = nextWidth < self.current.width && nextHeight < self.current.height;\r\n\r\n                } else {\r\n                    isScaledDown = self.isScaledDown();\r\n                }\r\n\r\n                if ( isScaledDown ) {\r\n\r\n                    // If image is scaled down, then, obviously, it can be zoomed to full size\r\n                    $container.addClass('fancybox-can-zoomIn');\r\n\r\n                } else {\r\n\r\n                    if ( self.current.opts.touch ) {\r\n\r\n                        // If image size ir largen than available available and touch module is not disable,\r\n                        // then user can do panning\r\n                        $container.addClass('fancybox-can-drag');\r\n\r\n                    } else {\r\n                        $container.addClass('fancybox-can-zoomOut');\r\n                    }\r\n\r\n                }\r\n\r\n            } else if ( self.current.opts.touch ) {\r\n                $container.addClass('fancybox-can-drag');\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Check if current slide is zoomable\r\n        // ==================================\r\n\r\n        isZoomable : function() {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var fitPos;\r\n\r\n            if ( !current || self.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            // Assume that slide is zoomable if\r\n            //   - image is loaded successfuly\r\n            //   - click action is \"zoom\"\r\n            //   - actual size of the image is smaller than available area\r\n            if ( current.type === 'image' && current.isLoaded && !current.hasError &&\r\n                ( current.opts.clickContent === 'zoom' || ( $.isFunction( current.opts.clickContent ) && current.opts.clickContent( current ) ===  \"zoom\" ) )\r\n            ) {\r\n\r\n                fitPos = self.getFitPos( current );\r\n\r\n                if ( current.width > fitPos.width || current.height > fitPos.height ) {\r\n                    return true;\r\n                }\r\n\r\n            }\r\n\r\n            return false;\r\n\r\n        },\r\n\r\n\r\n        // Check if current image dimensions are smaller than actual\r\n        // =========================================================\r\n\r\n        isScaledDown : function() {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var $what   = current.$content;\r\n\r\n            var rez = false;\r\n\r\n            if ( $what ) {\r\n                rez = $.fancybox.getTranslate( $what );\r\n                rez = rez.width < current.width || rez.height < current.height;\r\n            }\r\n\r\n            return rez;\r\n\r\n        },\r\n\r\n\r\n        // Check if image dimensions exceed parent element\r\n        // ===============================================\r\n\r\n        canPan : function() {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var $what   = current.$content;\r\n\r\n            var rez = false;\r\n\r\n            if ( $what ) {\r\n                rez = self.getFitPos( current );\r\n                rez = Math.abs( $what.width() - rez.width ) > 1  || Math.abs( $what.height() - rez.height ) > 1;\r\n\r\n            }\r\n\r\n            return rez;\r\n\r\n        },\r\n\r\n\r\n        // Load content into the slide\r\n        // ===========================\r\n\r\n        loadSlide : function( slide ) {\r\n\r\n            var self = this, type, $slide;\r\n            var ajaxLoad;\r\n\r\n            if ( slide.isLoading ) {\r\n                return;\r\n            }\r\n\r\n            if ( slide.isLoaded ) {\r\n                return;\r\n            }\r\n\r\n            slide.isLoading = true;\r\n\r\n            self.trigger( 'beforeLoad', slide );\r\n\r\n            type   = slide.type;\r\n            $slide = slide.$slide;\r\n\r\n            $slide\r\n                .off( 'refresh' )\r\n                .trigger( 'onReset' )\r\n                .addClass( 'fancybox-slide--' + ( type || 'unknown' ) )\r\n                .addClass( slide.opts.slideClass );\r\n\r\n            // Create content depending on the type\r\n\r\n            switch ( type ) {\r\n\r\n                case 'image':\r\n\r\n                    self.setImage( slide );\r\n\r\n                break;\r\n\r\n                case 'iframe':\r\n\r\n                    self.setIframe( slide );\r\n\r\n                break;\r\n\r\n                case 'html':\r\n\r\n                    self.setContent( slide, slide.src || slide.content );\r\n\r\n                break;\r\n\r\n                case 'inline':\r\n\r\n                    if ( $( slide.src ).length ) {\r\n                        self.setContent( slide, $( slide.src ) );\r\n\r\n                    } else {\r\n                        self.setError( slide );\r\n                    }\r\n\r\n                break;\r\n\r\n                case 'ajax':\r\n\r\n                    self.showLoading( slide );\r\n\r\n                    ajaxLoad = $.ajax( $.extend( {}, slide.opts.ajax.settings, {\r\n                        url : slide.src,\r\n                        success : function ( data, textStatus ) {\r\n\r\n                            if ( textStatus === 'success' ) {\r\n                                self.setContent( slide, data );\r\n                            }\r\n\r\n                        },\r\n                        error : function ( jqXHR, textStatus ) {\r\n\r\n                            if ( jqXHR && textStatus !== 'abort' ) {\r\n                                self.setError( slide );\r\n                            }\r\n\r\n                        }\r\n                    }));\r\n\r\n                    $slide.one( 'onReset', function () {\r\n                        ajaxLoad.abort();\r\n                    });\r\n\r\n                break;\r\n\r\n                default:\r\n\r\n                    self.setError( slide );\r\n\r\n                break;\r\n\r\n            }\r\n\r\n            return true;\r\n\r\n        },\r\n\r\n\r\n        // Use thumbnail image, if possible\r\n        // ================================\r\n\r\n        setImage : function( slide ) {\r\n\r\n            var self   = this;\r\n            var srcset = slide.opts.image.srcset;\r\n\r\n            var found, temp, pxRatio, windowWidth;\r\n\r\n            // If we have \"srcset\", then we need to find matching \"src\" value.\r\n            // This is necessary, because when you set an src attribute, the browser will preload the image\r\n            // before any javascript or even CSS is applied.\r\n            if ( srcset ) {\r\n                pxRatio     = window.devicePixelRatio || 1;\r\n                windowWidth = window.innerWidth  * pxRatio;\r\n\r\n                temp = srcset.split(',').map(function ( el ) {\r\n            \t\tvar ret = {};\r\n\r\n            \t\tel.trim().split(/\\s+/).forEach(function ( el, i ) {\r\n                        var value = parseInt( el.substring(0, el.length - 1), 10 );\r\n\r\n            \t\t\tif ( i === 0 ) {\r\n            \t\t\t\treturn ( ret.url = el );\r\n            \t\t\t}\r\n\r\n                        if ( value ) {\r\n                            ret.value   = value;\r\n                            ret.postfix = el[ el.length - 1 ];\r\n                        }\r\n\r\n            \t\t});\r\n\r\n            \t\treturn ret;\r\n            \t});\r\n\r\n                // Sort by value\r\n                temp.sort(function (a, b) {\r\n                  return a.value - b.value;\r\n                });\r\n\r\n                // Ok, now we have an array of all srcset values\r\n                for ( var j = 0; j < temp.length; j++ ) {\r\n                    var el = temp[ j ];\r\n\r\n                    if ( ( el.postfix === 'w' && el.value >= windowWidth ) || ( el.postfix === 'x' && el.value >= pxRatio ) ) {\r\n                        found = el;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                // If not found, take the last one\r\n                if ( !found && temp.length ) {\r\n                    found = temp[ temp.length - 1 ];\r\n                }\r\n\r\n                if ( found ) {\r\n                    slide.src = found.url;\r\n\r\n                    // If we have default width/height values, we can calculate height for matching source\r\n                    if ( slide.width && slide.height && found.postfix == 'w' ) {\r\n                        slide.height = ( slide.width / slide.height ) * found.value;\r\n                        slide.width  = found.value;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // This will be wrapper containing both ghost and actual image\r\n            slide.$content = $('<div class=\"fancybox-image-wrap\"></div>')\r\n                .addClass( 'fancybox-is-hidden' )\r\n                .appendTo( slide.$slide );\r\n\r\n\r\n            // If we have a thumbnail, we can display it while actual image is loading\r\n            // Users will not stare at black screen and actual image will appear gradually\r\n            if ( slide.opts.preload !== false && slide.opts.width && slide.opts.height && ( slide.opts.thumb || slide.opts.$thumb ) ) {\r\n\r\n                slide.width  = slide.opts.width;\r\n                slide.height = slide.opts.height;\r\n\r\n                slide.$ghost = $('<img />')\r\n                    .one('error', function() {\r\n\r\n                        $(this).remove();\r\n\r\n                        slide.$ghost = null;\r\n\r\n                        self.setBigImage( slide );\r\n\r\n                    })\r\n                    .one('load', function() {\r\n\r\n                        self.afterLoad( slide );\r\n\r\n                        self.setBigImage( slide );\r\n\r\n                    })\r\n                    .addClass( 'fancybox-image' )\r\n                    .appendTo( slide.$content )\r\n                    .attr( 'src', slide.opts.thumb || slide.opts.$thumb.attr( 'src' ) );\r\n\r\n            } else {\r\n\r\n                self.setBigImage( slide );\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Create full-size image\r\n        // ======================\r\n\r\n        setBigImage : function ( slide ) {\r\n            var self = this;\r\n            var $img = $('<img />');\r\n\r\n            slide.$image = $img\r\n                .one('error', function() {\r\n\r\n                    self.setError( slide );\r\n\r\n                })\r\n                .one('load', function() {\r\n\r\n                    // Clear timeout that checks if loading icon needs to be displayed\r\n                    clearTimeout( slide.timouts );\r\n\r\n                    slide.timouts = null;\r\n\r\n                    if ( self.isClosing ) {\r\n                        return;\r\n                    }\r\n\r\n                    slide.width  = this.naturalWidth;\r\n                    slide.height = this.naturalHeight;\r\n\r\n                    if ( slide.opts.image.srcset ) {\r\n                        $img.attr( 'sizes', '100vw' ).attr( 'srcset', slide.opts.image.srcset );\r\n                    }\r\n\r\n                    self.hideLoading( slide );\r\n\r\n                    if ( slide.$ghost ) {\r\n\r\n                        slide.timouts = setTimeout(function() {\r\n                            slide.timouts = null;\r\n\r\n                            slide.$ghost.hide();\r\n\r\n                        }, Math.min( 300, Math.max( 1000, slide.height / 1600 ) ) );\r\n\r\n                    } else {\r\n                        self.afterLoad( slide );\r\n                    }\r\n\r\n                })\r\n                .addClass( 'fancybox-image' )\r\n                .attr('src', slide.src)\r\n                .appendTo( slide.$content );\r\n\r\n            if ( ( $img[0].complete || $img[0].readyState == \"complete\" ) && $img[0].naturalWidth && $img[0].naturalHeight ) {\r\n                  $img.trigger( 'load' );\r\n\r\n            } else if( $img[0].error ) {\r\n                 $img.trigger( 'error' );\r\n\r\n            } else {\r\n\r\n                slide.timouts = setTimeout(function() {\r\n                    if ( !$img[0].complete && !slide.hasError ) {\r\n                        self.showLoading( slide );\r\n                    }\r\n\r\n                }, 100);\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Create iframe wrapper, iframe and bindings\r\n        // ==========================================\r\n\r\n        setIframe : function( slide ) {\r\n            var self\t= this,\r\n                opts    = slide.opts.iframe,\r\n                $slide\t= slide.$slide,\r\n                $iframe;\r\n\r\n            slide.$content = $('<div class=\"fancybox-content' + ( opts.preload ? ' fancybox-is-hidden' : '' ) + '\"></div>')\r\n                .css( opts.css )\r\n                .appendTo( $slide );\r\n\r\n            $iframe = $( opts.tpl.replace(/\\{rnd\\}/g, new Date().getTime()) )\r\n                .attr( opts.attr )\r\n                .appendTo( slide.$content );\r\n\r\n            if ( opts.preload ) {\r\n\r\n                self.showLoading( slide );\r\n\r\n                // Unfortunately, it is not always possible to determine if iframe is successfully loaded\r\n                // (due to browser security policy)\r\n\r\n                $iframe.on('load.fb error.fb', function(e) {\r\n                    this.isReady = 1;\r\n\r\n                    slide.$slide.trigger( 'refresh' );\r\n\r\n                    self.afterLoad( slide );\r\n                });\r\n\r\n                // Recalculate iframe content size\r\n                // ===============================\r\n\r\n                $slide.on('refresh.fb', function() {\r\n                    var $wrap = slide.$content,\r\n                        frameWidth  = opts.css.width,\r\n                        frameHeight = opts.css.height,\r\n                        scrollWidth,\r\n                        $contents,\r\n                        $body;\r\n\r\n                    if ( $iframe[0].isReady !== 1 ) {\r\n                        return;\r\n                    }\r\n\r\n                    // Check if content is accessible,\r\n                    // it will fail if frame is not with the same origin\r\n\r\n                    try {\r\n                        $contents = $iframe.contents();\r\n                        $body     = $contents.find('body');\r\n\r\n                    } catch (ignore) {}\r\n\r\n                    // Calculate dimensions for the wrapper\r\n                    if ( $body && $body.length ) {\r\n\r\n                        if ( frameWidth === undefined ) {\r\n                            scrollWidth = $iframe[0].contentWindow.document.documentElement.scrollWidth;\r\n\r\n                            frameWidth = Math.ceil( $body.outerWidth(true) + ( $wrap.width() - scrollWidth ) );\r\n                            frameWidth += $wrap.outerWidth() - $wrap.innerWidth();\r\n                        }\r\n\r\n                        if ( frameHeight === undefined ) {\r\n                            frameHeight = Math.ceil( $body.outerHeight(true) );\r\n                            frameHeight += $wrap.outerHeight() - $wrap.innerHeight();\r\n                        }\r\n\r\n                        // Resize wrapper to fit iframe content\r\n                        if ( frameWidth ) {\r\n                            $wrap.width( frameWidth );\r\n                        }\r\n\r\n                        if ( frameHeight ) {\r\n                            $wrap.height( frameHeight );\r\n                        }\r\n                    }\r\n\r\n                    $wrap.removeClass( 'fancybox-is-hidden' );\r\n\r\n                });\r\n\r\n            } else {\r\n\r\n                this.afterLoad( slide );\r\n\r\n            }\r\n\r\n            $iframe.attr( 'src', slide.src );\r\n\r\n            if ( slide.opts.smallBtn === true ) {\r\n                slide.$content.prepend( self.translate( slide, slide.opts.btnTpl.smallBtn ) );\r\n            }\r\n\r\n            // Remove iframe if closing or changing gallery item\r\n            $slide.one( 'onReset', function () {\r\n\r\n                // This helps IE not to throw errors when closing\r\n                try {\r\n\r\n                    $( this ).find( 'iframe' ).hide().attr( 'src', '//about:blank' );\r\n\r\n                } catch ( ignore ) {}\r\n\r\n                $( this ).empty();\r\n\r\n                slide.isLoaded = false;\r\n\r\n            });\r\n\r\n        },\r\n\r\n\r\n        // Wrap and append content to the slide\r\n        // ======================================\r\n\r\n        setContent : function ( slide, content ) {\r\n\r\n            var self = this;\r\n\r\n            if ( self.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            self.hideLoading( slide );\r\n\r\n            slide.$slide.empty();\r\n\r\n            if ( isQuery( content ) && content.parent().length ) {\r\n\r\n                // If content is a jQuery object, then it will be moved to the slide.\r\n                // The placeholder is created so we will know where to put it back.\r\n                // If user is navigating gallery fast, then the content might be already inside fancyBox\r\n                // =====================================================================================\r\n\r\n                // Make sure content is not already moved to fancyBox\r\n                content.parent( '.fancybox-slide--inline' ).trigger( 'onReset' );\r\n\r\n                // Create temporary element marking original place of the content\r\n                slide.$placeholder = $( '<div></div>' ).hide().insertAfter( content );\r\n\r\n                // Make sure content is visible\r\n                content.css('display', 'inline-block');\r\n\r\n            } else if ( !slide.hasError ) {\r\n\r\n                // If content is just a plain text, try to convert it to html\r\n                if ( $.type( content ) === 'string' ) {\r\n                    content = $('<div>').append( $.trim( content ) ).contents();\r\n\r\n                    // If we have text node, then add wrapping element to make vertical alignment work\r\n                    if ( content[0].nodeType === 3 ) {\r\n                        content = $('<div>').html( content );\r\n                    }\r\n                }\r\n\r\n                // If \"filter\" option is provided, then filter content\r\n                if ( slide.opts.filter ) {\r\n                    content = $('<div>').html( content ).find( slide.opts.filter );\r\n                }\r\n\r\n            }\r\n\r\n            slide.$slide.one('onReset', function () {\r\n\r\n                // Put content back\r\n                if ( slide.$placeholder ) {\r\n                    slide.$placeholder.after( content.hide() ).remove();\r\n\r\n                    slide.$placeholder = null;\r\n                }\r\n\r\n                // Remove custom close button\r\n                if ( slide.$smallBtn ) {\r\n                    slide.$smallBtn.remove();\r\n\r\n                    slide.$smallBtn = null;\r\n                }\r\n\r\n                // Remove content and mark slide as not loaded\r\n                if ( !slide.hasError ) {\r\n                    $(this).empty();\r\n\r\n                    slide.isLoaded = false;\r\n                }\r\n\r\n            });\r\n\r\n            slide.$content = $( content ).appendTo( slide.$slide );\r\n\r\n            if ( slide.opts.smallBtn && !slide.$smallBtn ) {\r\n                slide.$smallBtn = $( self.translate( slide, slide.opts.btnTpl.smallBtn ) ).appendTo( slide.$content.filter('div').first() );\r\n            }\r\n\r\n            this.afterLoad( slide );\r\n        },\r\n\r\n        // Display error message\r\n        // =====================\r\n\r\n        setError : function ( slide ) {\r\n\r\n            slide.hasError = true;\r\n\r\n            slide.$slide.removeClass( 'fancybox-slide--' + slide.type );\r\n\r\n            this.setContent( slide, this.translate( slide, slide.opts.errorTpl ) );\r\n\r\n        },\r\n\r\n\r\n        // Show loading icon inside the slide\r\n        // ==================================\r\n\r\n        showLoading : function( slide ) {\r\n\r\n            var self = this;\r\n\r\n            slide = slide || self.current;\r\n\r\n            if ( slide && !slide.$spinner ) {\r\n                slide.$spinner = $( self.opts.spinnerTpl ).appendTo( slide.$slide );\r\n            }\r\n\r\n        },\r\n\r\n        // Remove loading icon from the slide\r\n        // ==================================\r\n\r\n        hideLoading : function( slide ) {\r\n\r\n            var self = this;\r\n\r\n            slide = slide || self.current;\r\n\r\n            if ( slide && slide.$spinner ) {\r\n                slide.$spinner.remove();\r\n\r\n                delete slide.$spinner;\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Adjustments after slide content has been loaded\r\n        // ===============================================\r\n\r\n        afterLoad : function( slide ) {\r\n\r\n            var self = this;\r\n\r\n            if ( self.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            slide.isLoading = false;\r\n            slide.isLoaded  = true;\r\n\r\n            self.trigger( 'afterLoad', slide );\r\n\r\n            self.hideLoading( slide );\r\n\r\n            if ( slide.opts.protect && slide.$content && !slide.hasError ) {\r\n\r\n                // Disable right click\r\n                slide.$content.on( 'contextmenu.fb', function( e ) {\r\n                     if ( e.button == 2 ) {\r\n                         e.preventDefault();\r\n                     }\r\n\r\n                    return true;\r\n                });\r\n\r\n                // Add fake element on top of the image\r\n                // This makes a bit harder for user to select image\r\n                if ( slide.type === 'image' ) {\r\n                    $( '<div class=\"fancybox-spaceball\"></div>' ).appendTo( slide.$content );\r\n                }\r\n\r\n            }\r\n\r\n            self.revealContent( slide );\r\n\r\n        },\r\n\r\n\r\n        // Make content visible\r\n        // This method is called right after content has been loaded or\r\n        // user navigates gallery and transition should start\r\n        // ============================================================\r\n\r\n        revealContent : function( slide ) {\r\n\r\n            var self   = this;\r\n            var $slide = slide.$slide;\r\n\r\n            var effect, effectClassName, duration, opacity, end, start = false;\r\n\r\n            effect   = slide.opts[ self.firstRun ? 'animationEffect'   : 'transitionEffect' ];\r\n            duration = slide.opts[ self.firstRun ? 'animationDuration' : 'transitionDuration' ];\r\n\r\n            duration = parseInt( slide.forcedDuration === undefined ? duration : slide.forcedDuration, 10 );\r\n\r\n            if ( slide.isMoved || slide.pos !== self.currPos || !duration ) {\r\n                effect = false;\r\n            }\r\n\r\n            // Check if can zoom\r\n            if ( effect === 'zoom' && !( slide.pos === self.currPos && duration && slide.type === 'image' && !slide.hasError && ( start = self.getThumbPos( slide ) ) ) ) {\r\n                effect = 'fade';\r\n            }\r\n\r\n            // Zoom animation\r\n            // ==============\r\n\r\n            if ( effect === 'zoom' ) {\r\n                end = self.getFitPos( slide );\r\n\r\n                end.scaleX = end.width  / start.width;\r\n                end.scaleY = end.height / start.height;\r\n\r\n                delete end.width;\r\n                delete end.height;\r\n\r\n                // Check if we need to animate opacity\r\n                opacity = slide.opts.zoomOpacity;\r\n\r\n                if ( opacity == 'auto' ) {\r\n                    opacity = Math.abs( slide.width / slide.height - start.width / start.height ) > 0.1;\r\n                }\r\n\r\n                if ( opacity ) {\r\n                    start.opacity = 0.1;\r\n                    end.opacity   = 1;\r\n                }\r\n\r\n                // Draw image at start position\r\n                $.fancybox.setTranslate( slide.$content.removeClass( 'fancybox-is-hidden' ), start );\r\n\r\n                forceRedraw( slide.$content );\r\n\r\n                // Start animation\r\n                $.fancybox.animate( slide.$content, end, duration, function() {\r\n                    self.complete();\r\n                });\r\n\r\n                return;\r\n            }\r\n\r\n\r\n            self.updateSlide( slide );\r\n\r\n\r\n            // Simply show content\r\n            // ===================\r\n\r\n            if ( !effect ) {\r\n                forceRedraw( $slide );\r\n\r\n                slide.$content.removeClass( 'fancybox-is-hidden' );\r\n\r\n                if ( slide.pos === self.currPos ) {\r\n                    self.complete();\r\n                }\r\n\r\n                return;\r\n            }\r\n\r\n            $.fancybox.stop( $slide );\r\n\r\n            effectClassName = 'fancybox-animated fancybox-slide--' + ( slide.pos > self.prevPos ? 'next' : 'previous' ) + ' fancybox-fx-' + effect;\r\n\r\n            $slide.removeAttr( 'style' ).removeClass( 'fancybox-slide--current fancybox-slide--next fancybox-slide--previous' ).addClass( effectClassName );\r\n\r\n            slide.$content.removeClass( 'fancybox-is-hidden' );\r\n\r\n            //Force reflow for CSS3 transitions\r\n            forceRedraw( $slide );\r\n\r\n            $.fancybox.animate( $slide, 'fancybox-slide--current', duration, function(e) {\r\n                $slide.removeClass( effectClassName ).removeAttr( 'style' );\r\n\r\n                if ( slide.pos === self.currPos ) {\r\n                    self.complete();\r\n                }\r\n\r\n            }, true);\r\n\r\n        },\r\n\r\n\r\n        // Check if we can and have to zoom from thumbnail\r\n        //================================================\r\n\r\n        getThumbPos : function( slide ) {\r\n\r\n            var self = this;\r\n            var rez  = false;\r\n\r\n            // Check if element is inside the viewport by at least 1 pixel\r\n            var isElementVisible = function( $el ) {\r\n                var element = $el[0];\r\n\r\n                var elementRect = element.getBoundingClientRect();\r\n                var parentRects = [];\r\n\r\n                var visibleInAllParents;\r\n\r\n                while ( element.parentElement !== null ) {\r\n                    if ( $(element.parentElement).css('overflow') === 'hidden'  || $(element.parentElement).css('overflow') === 'auto' ) {\r\n                        parentRects.push(element.parentElement.getBoundingClientRect());\r\n                    }\r\n\r\n                    element = element.parentElement;\r\n                }\r\n\r\n                visibleInAllParents = parentRects.every(function(parentRect){\r\n                    var visiblePixelX = Math.min(elementRect.right, parentRect.right) - Math.max(elementRect.left, parentRect.left);\r\n                    var visiblePixelY = Math.min(elementRect.bottom, parentRect.bottom) - Math.max(elementRect.top, parentRect.top);\r\n\r\n                    return visiblePixelX > 0 && visiblePixelY > 0;\r\n                });\r\n\r\n                return visibleInAllParents &&\r\n                    elementRect.bottom > 0 && elementRect.right > 0 &&\r\n                    elementRect.left < $(window).width() && elementRect.top < $(window).height();\r\n            };\r\n\r\n            var $thumb   = slide.opts.$thumb;\r\n            var thumbPos = $thumb ? $thumb.offset() : 0;\r\n            var slidePos;\r\n\r\n            if ( thumbPos && $thumb[0].ownerDocument === document && isElementVisible( $thumb ) ) {\r\n                slidePos = self.$refs.stage.offset();\r\n\r\n                rez = {\r\n                    top    : thumbPos.top  - slidePos.top  + parseFloat( $thumb.css( \"border-top-width\" ) || 0 ),\r\n                    left   : thumbPos.left - slidePos.left + parseFloat( $thumb.css( \"border-left-width\" ) || 0 ),\r\n                    width  : $thumb.width(),\r\n                    height : $thumb.height(),\r\n                    scaleX : 1,\r\n                    scaleY : 1\r\n                };\r\n            }\r\n\r\n            return rez;\r\n        },\r\n\r\n\r\n        // Final adjustments after current gallery item is moved to position\r\n        // and it`s content is loaded\r\n        // ==================================================================\r\n\r\n        complete : function() {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var slides  = {};\r\n\r\n            if ( current.isMoved || !current.isLoaded || current.isComplete ) {\r\n                return;\r\n            }\r\n\r\n            current.isComplete = true;\r\n\r\n            current.$slide.siblings().trigger( 'onReset' );\r\n\r\n            // Trigger any CSS3 transiton inside the slide\r\n            forceRedraw( current.$slide );\r\n\r\n            current.$slide.addClass( 'fancybox-slide--complete' );\r\n\r\n            // Remove unnecessary slides\r\n            $.each( self.slides, function( key, slide ) {\r\n                if ( slide.pos >= self.currPos - 1 && slide.pos <= self.currPos + 1 ) {\r\n                    slides[ slide.pos ] = slide;\r\n\r\n                } else if ( slide ) {\r\n\r\n                    $.fancybox.stop( slide.$slide );\r\n\r\n                    slide.$slide.off().remove();\r\n                }\r\n            });\r\n\r\n            self.slides = slides;\r\n\r\n            self.updateCursor();\r\n\r\n            self.trigger( 'afterShow' );\r\n\r\n            // Try to focus on the first focusable element\r\n            if ( $( document.activeElement ).is( '[disabled]' ) || ( current.opts.autoFocus && !( current.type == 'image' || current.type === 'iframe' ) ) ) {\r\n                self.focus();\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Preload next and previous slides\r\n        // ================================\r\n\r\n        preload : function() {\r\n            var self = this;\r\n            var next, prev;\r\n\r\n            if ( self.group.length < 2 ) {\r\n                return;\r\n            }\r\n\r\n            next  = self.slides[ self.currPos + 1 ];\r\n            prev  = self.slides[ self.currPos - 1 ];\r\n\r\n            if ( next && next.type === 'image' ) {\r\n                self.loadSlide( next );\r\n            }\r\n\r\n            if ( prev && prev.type === 'image' ) {\r\n                self.loadSlide( prev );\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Try to find and focus on the first focusable element\r\n        // ====================================================\r\n\r\n        focus : function() {\r\n            var current = this.current;\r\n            var $el;\r\n\r\n            if ( this.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            if ( current && current.isComplete ) {\r\n\r\n                // Look for first input with autofocus attribute\r\n                $el = current.$slide.find('input[autofocus]:enabled:visible:first');\r\n\r\n                if ( !$el.length ) {\r\n                    $el = current.$slide.find('button,:input,[tabindex],a').filter(':enabled:visible:first');\r\n                }\r\n            }\r\n\r\n            $el = $el && $el.length ? $el : this.$refs.container;\r\n\r\n            $el.focus();\r\n        },\r\n\r\n\r\n        // Activates current instance - brings container to the front and enables keyboard,\r\n        // notifies other instances about deactivating\r\n        // =================================================================================\r\n\r\n        activate : function () {\r\n            var self = this;\r\n\r\n            // Deactivate all instances\r\n            $( '.fancybox-container' ).each(function () {\r\n                var instance = $(this).data( 'FancyBox' );\r\n\r\n                // Skip self and closing instances\r\n                if (instance && instance.uid !== self.uid && !instance.isClosing) {\r\n                    instance.trigger( 'onDeactivate' );\r\n                }\r\n\r\n            });\r\n\r\n            if ( self.current ) {\r\n                if ( self.$refs.container.index() > 0 ) {\r\n                    self.$refs.container.prependTo( document.body );\r\n                }\r\n\r\n                self.updateControls();\r\n            }\r\n\r\n            self.trigger( 'onActivate' );\r\n\r\n            self.addEvents();\r\n\r\n        },\r\n\r\n\r\n        // Start closing procedure\r\n        // This will start \"zoom-out\" animation if needed and clean everything up afterwards\r\n        // =================================================================================\r\n\r\n        close : function( e, d ) {\r\n\r\n            var self    = this;\r\n            var current = self.current;\r\n\r\n            var effect, duration;\r\n            var $what, opacity, start, end;\r\n\r\n            var done = function() {\r\n                self.cleanUp( e );\r\n            };\r\n\r\n            if ( self.isClosing ) {\r\n                return false;\r\n            }\r\n\r\n            self.isClosing = true;\r\n\r\n            // If beforeClose callback prevents closing, make sure content is centered\r\n            if ( self.trigger( 'beforeClose', e ) === false ) {\r\n                self.isClosing = false;\r\n\r\n                requestAFrame(function() {\r\n                    self.update();\r\n                });\r\n\r\n                return false;\r\n            }\r\n\r\n            // Remove all events\r\n            // If there are multiple instances, they will be set again by \"activate\" method\r\n            self.removeEvents();\r\n\r\n            if ( current.timouts ) {\r\n                clearTimeout( current.timouts );\r\n            }\r\n\r\n            $what    = current.$content;\r\n            effect   = current.opts.animationEffect;\r\n            duration = $.isNumeric( d ) ? d : ( effect ? current.opts.animationDuration : 0 );\r\n\r\n            // Remove other slides\r\n            current.$slide.off( transitionEnd ).removeClass( 'fancybox-slide--complete fancybox-slide--next fancybox-slide--previous fancybox-animated' );\r\n\r\n            current.$slide.siblings().trigger( 'onReset' ).remove();\r\n\r\n            // Trigger animations\r\n            if ( duration ) {\r\n                self.$refs.container.removeClass( 'fancybox-is-open' ).addClass( 'fancybox-is-closing' );\r\n            }\r\n\r\n            // Clean up\r\n            self.hideLoading( current );\r\n\r\n            self.hideControls();\r\n\r\n            self.updateCursor();\r\n\r\n            // Check if possible to zoom-out\r\n            if ( effect === 'zoom' && !( e !== true && $what && duration && current.type === 'image' && !current.hasError && ( end = self.getThumbPos( current ) ) ) ) {\r\n                effect = 'fade';\r\n            }\r\n\r\n            if ( effect === 'zoom' ) {\r\n                $.fancybox.stop( $what );\r\n\r\n                start = $.fancybox.getTranslate( $what );\r\n\r\n                start.width  = start.width  * start.scaleX;\r\n                start.height = start.height * start.scaleY;\r\n\r\n                // Check if we need to animate opacity\r\n                opacity = current.opts.zoomOpacity;\r\n\r\n                if ( opacity == 'auto' ) {\r\n                    opacity = Math.abs( current.width / current.height - end.width / end.height ) > 0.1;\r\n                }\r\n\r\n                if ( opacity ) {\r\n                    end.opacity = 0;\r\n                }\r\n\r\n                start.scaleX = start.width  / end.width;\r\n                start.scaleY = start.height / end.height;\r\n\r\n                start.width  = end.width;\r\n                start.height = end.height;\r\n\r\n                $.fancybox.setTranslate( current.$content, start );\r\n\r\n                $.fancybox.animate( current.$content, end, duration, done );\r\n\r\n                return true;\r\n            }\r\n\r\n            if ( effect && duration ) {\r\n\r\n                // If skip animation\r\n                if ( e === true ) {\r\n                    setTimeout( done, duration );\r\n\r\n                } else {\r\n                    $.fancybox.animate( current.$slide.removeClass( 'fancybox-slide--current' ), 'fancybox-animated fancybox-slide--previous fancybox-fx-' + effect, duration, done );\r\n                }\r\n\r\n            } else {\r\n                done();\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n\r\n        // Final adjustments after removing the instance\r\n        // =============================================\r\n\r\n        cleanUp : function( e ) {\r\n            var self = this,\r\n                instance;\r\n\r\n            self.current.$slide.trigger( 'onReset' );\r\n\r\n            self.$refs.container.empty().remove();\r\n\r\n            self.trigger( 'afterClose', e );\r\n\r\n            // Place back focus\r\n            if ( self.$lastFocus && !!self.current.opts.backFocus ) {\r\n                self.$lastFocus.focus();\r\n            }\r\n\r\n            self.current = null;\r\n\r\n            // Check if there are other instances\r\n            instance = $.fancybox.getInstance();\r\n\r\n            if ( instance ) {\r\n                instance.activate();\r\n\r\n            } else {\r\n                $W.scrollTop( self.scrollTop ).scrollLeft( self.scrollLeft );\r\n\r\n                $( 'html' ).removeClass( 'fancybox-enabled' );\r\n\r\n                $( '#fancybox-style-noscroll' ).remove();\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Call callback and trigger an event\r\n        // ==================================\r\n\r\n        trigger : function( name, slide ) {\r\n            var args  = Array.prototype.slice.call(arguments, 1),\r\n                self  = this,\r\n                obj   = slide && slide.opts ? slide : self.current,\r\n                rez;\r\n\r\n            if ( obj ) {\r\n                args.unshift( obj );\r\n\r\n            } else {\r\n                obj = self;\r\n            }\r\n\r\n            args.unshift( self );\r\n\r\n            if ( $.isFunction( obj.opts[ name ] ) ) {\r\n                rez = obj.opts[ name ].apply( obj, args );\r\n            }\r\n\r\n            if ( rez === false ) {\r\n                return rez;\r\n            }\r\n\r\n            if ( name === 'afterClose' ) {\r\n                $D.trigger( name + '.fb', args );\r\n\r\n            } else {\r\n                self.$refs.container.trigger( name + '.fb', args );\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Update infobar values, navigation button states and reveal caption\r\n        // ==================================================================\r\n\r\n        updateControls : function ( force ) {\r\n\r\n            var self = this;\r\n\r\n            var current  = self.current;\r\n            var index    = current.index;\r\n            var opts     = current.opts;\r\n            var caption  = opts.caption;\r\n            var $caption = self.$refs.caption;\r\n\r\n            // Recalculate content dimensions\r\n            current.$slide.trigger( 'refresh' );\r\n\r\n            self.$caption = caption && caption.length ? $caption.html( caption ) : null;\r\n\r\n            if ( !self.isHiddenControls ) {\r\n                self.showControls();\r\n            }\r\n\r\n            // Update info and navigation elements\r\n            $('[data-fancybox-count]').html( self.group.length );\r\n            $('[data-fancybox-index]').html( index + 1 );\r\n\r\n            $('[data-fancybox-prev]').prop('disabled', ( !opts.loop && index <= 0 ) );\r\n            $('[data-fancybox-next]').prop('disabled', ( !opts.loop && index >= self.group.length - 1 ) );\r\n\r\n        },\r\n\r\n        // Hide toolbar and caption\r\n        // ========================\r\n\r\n        hideControls : function () {\r\n\r\n            this.isHiddenControls = true;\r\n\r\n            this.$refs.container.removeClass('fancybox-show-infobar fancybox-show-toolbar fancybox-show-caption fancybox-show-nav');\r\n\r\n        },\r\n\r\n        showControls : function() {\r\n\r\n            var self = this;\r\n            var opts = self.current ? self.current.opts : self.opts;\r\n            var $container = self.$refs.container;\r\n\r\n            self.isHiddenControls   = false;\r\n            self.idleSecondsCounter = 0;\r\n\r\n            $container\r\n                .toggleClass('fancybox-show-toolbar', !!( opts.toolbar && opts.buttons ) )\r\n                .toggleClass('fancybox-show-infobar', !!( opts.infobar && self.group.length > 1 ) )\r\n                .toggleClass('fancybox-show-nav',     !!( opts.arrows && self.group.length > 1 ) )\r\n                .toggleClass('fancybox-is-modal',     !!opts.modal );\r\n\r\n            if ( self.$caption ) {\r\n                $container.addClass( 'fancybox-show-caption ');\r\n\r\n            } else {\r\n               $container.removeClass( 'fancybox-show-caption' );\r\n           }\r\n\r\n       },\r\n\r\n\r\n       // Toggle toolbar and caption\r\n       // ==========================\r\n\r\n       toggleControls : function() {\r\n\r\n           if ( this.isHiddenControls ) {\r\n               this.showControls();\r\n\r\n           } else {\r\n               this.hideControls();\r\n           }\r\n\r\n       },\r\n\r\n\r\n    });\r\n\r\n\r\n    $.fancybox = {\r\n\r\n        version  : \"3.1.28\",\r\n        defaults : defaults,\r\n\r\n\r\n        // Get current instance and execute a command.\r\n        //\r\n        // Examples of usage:\r\n        //\r\n        //   $instance = $.fancybox.getInstance();\r\n        //   $.fancybox.getInstance().jumpTo( 1 );\r\n        //   $.fancybox.getInstance( 'jumpTo', 1 );\r\n        //   $.fancybox.getInstance( function() {\r\n        //       console.info( this.currIndex );\r\n        //   });\r\n        // ======================================================\r\n\r\n        getInstance : function ( command ) {\r\n            var instance = $('.fancybox-container:not(\".fancybox-is-closing\"):first').data( 'FancyBox' );\r\n            var args     = Array.prototype.slice.call(arguments, 1);\r\n\r\n            if ( instance instanceof FancyBox ) {\r\n\r\n                if ( $.type( command ) === 'string' ) {\r\n                    instance[ command ].apply( instance, args );\r\n\r\n                } else if ( $.type( command ) === 'function' ) {\r\n                    command.apply( instance, args );\r\n\r\n                }\r\n\r\n                return instance;\r\n            }\r\n\r\n            return false;\r\n\r\n        },\r\n\r\n\r\n        // Create new instance\r\n        // ===================\r\n\r\n        open : function ( items, opts, index ) {\r\n            return new FancyBox( items, opts, index );\r\n        },\r\n\r\n\r\n        // Close current or all instances\r\n        // ==============================\r\n\r\n        close : function ( all ) {\r\n            var instance = this.getInstance();\r\n\r\n            if ( instance ) {\r\n                instance.close();\r\n\r\n                // Try to find and close next instance\r\n\r\n                if ( all === true ) {\r\n                    this.close();\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        // Close instances and unbind all events\r\n        // ==============================\r\n\r\n        destroy : function() {\r\n\r\n            this.close( true );\r\n\r\n            $D.off( 'click.fb-start' );\r\n\r\n        },\r\n\r\n\r\n        // Try to detect mobile devices\r\n        // ============================\r\n\r\n        isMobile : document.createTouch !== undefined && /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent),\r\n\r\n\r\n        // Detect if 'translate3d' support is available\r\n        // ============================================\r\n\r\n        use3d : (function() {\r\n            var div = document.createElement('div');\r\n\r\n            return window.getComputedStyle && window.getComputedStyle( div ).getPropertyValue('transform') && !(document.documentMode && document.documentMode < 11);\r\n        }()),\r\n\r\n\r\n        // Helper function to get current visual state of an element\r\n        // returns array[ top, left, horizontal-scale, vertical-scale, opacity ]\r\n        // =====================================================================\r\n\r\n        getTranslate : function( $el ) {\r\n            var matrix;\r\n\r\n            if ( !$el || !$el.length ) {\r\n                return false;\r\n            }\r\n\r\n            matrix  = $el.eq( 0 ).css('transform');\r\n\r\n            if ( matrix && matrix.indexOf( 'matrix' ) !== -1 ) {\r\n                matrix = matrix.split('(')[1];\r\n                matrix = matrix.split(')')[0];\r\n                matrix = matrix.split(',');\r\n            } else {\r\n                matrix = [];\r\n            }\r\n\r\n            if ( matrix.length ) {\r\n\r\n                // If IE\r\n                if ( matrix.length > 10 ) {\r\n                    matrix = [ matrix[13], matrix[12], matrix[0], matrix[5] ];\r\n\r\n                } else {\r\n                    matrix = [ matrix[5], matrix[4], matrix[0], matrix[3]];\r\n                }\r\n\r\n                matrix = matrix.map(parseFloat);\r\n\r\n            } else {\r\n                matrix = [ 0, 0, 1, 1 ];\r\n\r\n                var transRegex = /\\.*translate\\((.*)px,(.*)px\\)/i;\r\n                var transRez = transRegex.exec( $el.eq( 0 ).attr('style') );\r\n\r\n                if ( transRez ) {\r\n                    matrix[ 0 ] = parseFloat( transRez[2] );\r\n                    matrix[ 1 ] = parseFloat( transRez[1] );\r\n                }\r\n            }\r\n\r\n            return {\r\n                top     : matrix[ 0 ],\r\n                left    : matrix[ 1 ],\r\n                scaleX  : matrix[ 2 ],\r\n                scaleY  : matrix[ 3 ],\r\n                opacity : parseFloat( $el.css('opacity') ),\r\n                width   : $el.width(),\r\n                height  : $el.height()\r\n            };\r\n\r\n        },\r\n\r\n\r\n        // Shortcut for setting \"translate3d\" properties for element\r\n        // Can set be used to set opacity, too\r\n        // ========================================================\r\n\r\n        setTranslate : function( $el, props ) {\r\n            var str  = '';\r\n            var css  = {};\r\n\r\n            if ( !$el || !props ) {\r\n                return;\r\n            }\r\n\r\n            if ( props.left !== undefined || props.top !== undefined ) {\r\n                str = ( props.left === undefined ? $el.position().left : props.left )  + 'px, ' + ( props.top === undefined ? $el.position().top : props.top ) + 'px';\r\n\r\n                if ( this.use3d ) {\r\n                    str = 'translate3d(' + str + ', 0px)';\r\n\r\n                } else {\r\n                    str = 'translate(' + str + ')';\r\n                }\r\n            }\r\n\r\n            if ( props.scaleX !== undefined && props.scaleY !== undefined ) {\r\n                str = (str.length ? str + ' ' : '') + 'scale(' + props.scaleX + ', ' + props.scaleY + ')';\r\n            }\r\n\r\n            if ( str.length ) {\r\n                css.transform = str;\r\n            }\r\n\r\n            if ( props.opacity !== undefined ) {\r\n                css.opacity = props.opacity;\r\n            }\r\n\r\n            if ( props.width !== undefined ) {\r\n                css.width = props.width;\r\n            }\r\n\r\n            if ( props.height !== undefined ) {\r\n                css.height = props.height;\r\n            }\r\n\r\n            return $el.css( css );\r\n        },\r\n\r\n\r\n        // Simple CSS transition handler\r\n        // =============================\r\n\r\n        animate : function ( $el, to, duration, callback, leaveAnimationName ) {\r\n            var event = transitionEnd || 'transitionend';\r\n\r\n            if ( $.isFunction( duration ) ) {\r\n                callback = duration;\r\n                duration = null;\r\n            }\r\n\r\n            if ( !$.isPlainObject( to ) ) {\r\n                $el.removeAttr('style');\r\n            }\r\n\r\n            $el.on( event, function(e) {\r\n\r\n                // Skip events from child elements and z-index change\r\n                if ( e && e.originalEvent && ( !$el.is( e.originalEvent.target ) || e.originalEvent.propertyName == 'z-index' ) ) {\r\n                    return;\r\n                }\r\n\r\n                $el.off( event );\r\n\r\n                if ( $.isPlainObject( to ) ) {\r\n\r\n                    if ( to.scaleX !== undefined && to.scaleY !== undefined ) {\r\n                        $el.css( 'transition-duration', '0ms' );\r\n\r\n                        to.width  = Math.round( $el.width()  * to.scaleX );\r\n                        to.height = Math.round( $el.height() * to.scaleY );\r\n\r\n                        to.scaleX = 1;\r\n                        to.scaleY = 1;\r\n\r\n                        $.fancybox.setTranslate( $el, to );\r\n                    }\r\n\r\n                } else if ( leaveAnimationName !== true ) {\r\n                    $el.removeClass( to );\r\n                }\r\n\r\n                if ( $.isFunction( callback ) ) {\r\n                    callback( e );\r\n                }\r\n\r\n            });\r\n\r\n            if ( $.isNumeric( duration ) ) {\r\n                $el.css( 'transition-duration', duration + 'ms' );\r\n            }\r\n\r\n            if ( $.isPlainObject( to ) ) {\r\n                $.fancybox.setTranslate( $el, to );\r\n\r\n            } else {\r\n                $el.addClass( to );\r\n            }\r\n\r\n            $el.data(\"timer\", setTimeout(function() {\r\n                $el.trigger( 'transitionend' );\r\n            }, duration + 16));\r\n\r\n        },\r\n\r\n        stop : function( $el ) {\r\n            clearTimeout( $el.data(\"timer\") );\r\n\r\n            $el.off( transitionEnd );\r\n        }\r\n\r\n    };\r\n\r\n\r\n    // Default click handler for \"fancyboxed\" links\r\n    // ============================================\r\n\r\n    function _run( e ) {\r\n        var target\t= e.currentTarget,\r\n            opts\t= e.data ? e.data.options : {},\r\n            items\t= opts.selector ? $( opts.selector ) : ( e.data ? e.data.items : [] ),\r\n            value\t= $( target ).attr( 'data-fancybox' ) || '',\r\n            index\t= 0,\r\n            active  = $.fancybox.getInstance();\r\n\r\n        e.preventDefault();\r\n\r\n        // Avoid opening multiple times\r\n        if ( active && active.current.opts.$orig.is( target ) ) {\r\n            return;\r\n        }\r\n\r\n        // Get all related items and find index for clicked one\r\n        if ( value ) {\r\n            items = items.length ? items.filter( '[data-fancybox=\"' + value + '\"]' ) : $( '[data-fancybox=\"' + value + '\"]' );\r\n            index = items.index( target );\r\n\r\n            // Sometimes current item can not be found\r\n            // (for example, when slider clones items)\r\n            if ( index < 0 ) {\r\n                index = 0;\r\n            }\r\n\r\n        } else {\r\n            items = [ target ];\r\n        }\r\n\r\n        $.fancybox.open( items, opts, index );\r\n    }\r\n\r\n\r\n    // Create a jQuery plugin\r\n    // ======================\r\n\r\n    $.fn.fancybox = function (options) {\r\n        var selector;\r\n\r\n        options  = options || {};\r\n        selector = options.selector || false;\r\n\r\n        if ( selector ) {\r\n\r\n            $( 'body' ).off( 'click.fb-start', selector ).on( 'click.fb-start', selector, {\r\n                options : options\r\n            }, _run );\r\n\r\n        } else {\r\n\r\n            this.off( 'click.fb-start' ).on( 'click.fb-start', {\r\n                items   : this,\r\n                options : options\r\n            }, _run);\r\n\r\n        }\r\n\r\n        return this;\r\n    };\r\n\r\n\r\n    // Self initializing plugin\r\n    // ========================\r\n\r\n    $D.on( 'click.fb-start', '[data-fancybox]', _run );\r\n\r\n}( window, document, window.jQuery || jQuery ));\r\n\r\n// ==========================================================================\r\n//\r\n// Media\r\n// Adds additional media type support\r\n//\r\n// ==========================================================================\r\n;(function ($) {\r\n\r\n\t'use strict';\r\n\r\n\t// Formats matching url to final form\r\n\r\n\tvar format = function (url, rez, params) {\r\n\t\tif ( !url ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tparams = params || '';\r\n\r\n\t\tif ( $.type(params) === \"object\" ) {\r\n\t\t\tparams = $.param(params, true);\r\n\t\t}\r\n\r\n\t\t$.each(rez, function (key, value) {\r\n\t\t\turl = url.replace('$' + key, value || '');\r\n\t\t});\r\n\r\n\t\tif (params.length) {\r\n\t\t\turl += (url.indexOf('?') > 0 ? '&' : '?') + params;\r\n\t\t}\r\n\r\n\t\treturn url;\r\n\t};\r\n\r\n\t// Object containing properties for each media type\r\n\r\n\tvar defaults = {\r\n\t\tyoutube : {\r\n\t\t\tmatcher : /(youtube\\.com|youtu\\.be|youtube\\-nocookie\\.com)\\/(watch\\?(.*&)?v=|v\\/|u\\/|embed\\/?)?(videoseries\\?list=(.*)|[\\w-]{11}|\\?listType=(.*)&list=(.*))(.*)/i,\r\n\t\t\tparams  : {\r\n\t\t\t\tautoplay : 1,\r\n\t\t\t\tautohide : 1,\r\n\t\t\t\tfs  : 1,\r\n\t\t\t\trel : 0,\r\n\t\t\t\thd  : 1,\r\n\t\t\t\twmode : 'transparent',\r\n\t\t\t\tenablejsapi : 1,\r\n\t\t\t\thtml5 : 1\r\n\t\t\t},\r\n\t\t\tparamPlace : 8,\r\n\t\t\ttype  : 'iframe',\r\n\t\t\turl   : '//www.youtube.com/embed/$4',\r\n\t\t\tthumb : '//img.youtube.com/vi/$4/hqdefault.jpg'\r\n\t\t},\r\n\r\n\t\tvimeo : {\r\n\t\t\tmatcher : /^.+vimeo.com\\/(.*\\/)?([\\d]+)(.*)?/,\r\n\t\t\tparams  : {\r\n\t\t\t\tautoplay : 1,\r\n\t\t\t\thd : 1,\r\n\t\t\t\tshow_title    : 1,\r\n\t\t\t\tshow_byline   : 1,\r\n\t\t\t\tshow_portrait : 0,\r\n\t\t\t\tfullscreen    : 1,\r\n\t\t\t\tapi : 1\r\n\t\t\t},\r\n\t\t\tparamPlace : 3,\r\n\t\t\ttype : 'iframe',\r\n\t\t\turl : '//player.vimeo.com/video/$2'\r\n\t\t},\r\n\r\n\t\tmetacafe : {\r\n\t\t\tmatcher : /metacafe.com\\/watch\\/(\\d+)\\/(.*)?/,\r\n\t\t\ttype    : 'iframe',\r\n\t\t\turl     : '//www.metacafe.com/embed/$1/?ap=1'\r\n\t\t},\r\n\r\n\t\tdailymotion : {\r\n\t\t\tmatcher : /dailymotion.com\\/video\\/(.*)\\/?(.*)/,\r\n\t\t\tparams : {\r\n\t\t\t\tadditionalInfos : 0,\r\n\t\t\t\tautoStart : 1\r\n\t\t\t},\r\n\t\t\ttype : 'iframe',\r\n\t\t\turl  : '//www.dailymotion.com/embed/video/$1'\r\n\t\t},\r\n\r\n\t\tvine : {\r\n\t\t\tmatcher : /vine.co\\/v\\/([a-zA-Z0-9\\?\\=\\-]+)/,\r\n\t\t\ttype    : 'iframe',\r\n\t\t\turl     : '//vine.co/v/$1/embed/simple'\r\n\t\t},\r\n\r\n\t\tinstagram : {\r\n\t\t\tmatcher : /(instagr\\.am|instagram\\.com)\\/p\\/([a-zA-Z0-9_\\-]+)\\/?/i,\r\n\t\t\ttype    : 'image',\r\n\t\t\turl     : '//$1/p/$2/media/?size=l'\r\n\t\t},\r\n\r\n\t\t// Examples:\r\n\t\t// http://maps.google.com/?ll=48.857995,2.294297&spn=0.007666,0.021136&t=m&z=16\r\n\t\t// https://www.google.com/maps/@37.7852006,-122.4146355,14.65z\r\n\t\t// https://www.google.com/maps/place/Googleplex/@37.4220041,-122.0833494,17z/data=!4m5!3m4!1s0x0:0x6c296c66619367e0!8m2!3d37.4219998!4d-122.0840572\r\n\t\tgmap_place : {\r\n\t\t\tmatcher : /(maps\\.)?google\\.([a-z]{2,3}(\\.[a-z]{2})?)\\/(((maps\\/(place\\/(.*)\\/)?\\@(.*),(\\d+.?\\d+?)z))|(\\?ll=))(.*)?/i,\r\n\t\t\ttype    : 'iframe',\r\n\t\t\turl     : function (rez) {\r\n\t\t\t\treturn '//maps.google.' + rez[2] + '/?ll=' + ( rez[9] ? rez[9] + '&z=' + Math.floor(  rez[10]  ) + ( rez[12] ? rez[12].replace(/^\\//, \"&\") : '' )  : rez[12] ) + '&output=' + ( rez[12] && rez[12].indexOf('layer=c') > 0 ? 'svembed' : 'embed' );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// Examples:\r\n\t\t// https://www.google.com/maps/search/Empire+State+Building/\r\n\t\t// https://www.google.com/maps/search/?api=1&query=centurylink+field\r\n\t\t// https://www.google.com/maps/search/?api=1&query=47.5951518,-122.3316393\r\n\t\tgmap_search : {\r\n\t\t\tmatcher : /(maps\\.)?google\\.([a-z]{2,3}(\\.[a-z]{2})?)\\/(maps\\/search\\/)(.*)/i,\r\n\t\t\ttype    : 'iframe',\r\n\t\t\turl     : function (rez) {\r\n\t\t\t\treturn '//maps.google.' + rez[2] + '/maps?q=' + rez[5].replace('query=', 'q=').replace('api=1', '') + '&output=embed';\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t$(document).on('onInit.fb', function (e, instance) {\r\n\r\n\t\t$.each(instance.group, function( i, item ) {\r\n\r\n\t\t\tvar url\t = item.src || '',\r\n\t\t\t\ttype = false,\r\n\t\t\t\tmedia,\r\n\t\t\t\tthumb,\r\n\t\t\t\trez,\r\n\t\t\t\tparams,\r\n\t\t\t\turlParams,\r\n\t\t\t\to,\r\n\t\t\t\tprovider;\r\n\r\n\t\t\t// Skip items that already have content type\r\n\t\t\tif ( item.type ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tmedia = $.extend( true, {}, defaults, item.opts.media );\r\n\r\n\t\t\t// Look for any matching media type\r\n\t\t\t$.each(media, function ( n, el ) {\r\n\t\t\t\trez = url.match(el.matcher);\r\n\t\t\t\to   = {};\r\n\t\t\t\tprovider = n;\r\n\r\n\t\t\t\tif (!rez) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttype = el.type;\r\n\r\n\t\t\t\tif ( el.paramPlace && rez[ el.paramPlace ] ) {\r\n\t\t\t\t\turlParams = rez[ el.paramPlace ];\r\n\r\n\t\t\t\t\tif ( urlParams[ 0 ] == '?' ) {\r\n\t\t\t\t\t\turlParams = urlParams.substring(1);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\turlParams = urlParams.split('&');\r\n\r\n\t\t\t\t\tfor ( var m = 0; m < urlParams.length; ++m ) {\r\n\t\t\t\t\t\tvar p = urlParams[ m ].split('=', 2);\r\n\r\n\t\t\t\t\t\tif ( p.length == 2 ) {\r\n\t\t\t\t\t\t\to[ p[0] ] = decodeURIComponent( p[1].replace(/\\+/g, \" \") );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tparams = $.extend( true, {}, el.params, item.opts[ n ], o );\r\n\r\n\t\t\t\turl   = $.type(el.url) === \"function\" ? el.url.call(this, rez, params, item) : format(el.url, rez, params);\r\n\t\t\t\tthumb = $.type(el.thumb) === \"function\" ? el.thumb.call(this, rez, params, item) : format(el.thumb, rez);\r\n\r\n\t\t\t\tif ( provider === 'vimeo' ) {\r\n\t\t\t\t\turl = url.replace('&%23', '#');\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\r\n\t\t\t// If it is found, then change content type and update the url\r\n\r\n\t\t\tif ( type ) {\r\n\t\t\t\titem.src  = url;\r\n\t\t\t\titem.type = type;\r\n\r\n\t\t\t\tif ( !item.opts.thumb && !( item.opts.$thumb && item.opts.$thumb.length ) ) {\r\n\t\t\t\t\titem.opts.thumb = thumb;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( type === 'iframe' ) {\r\n\t\t\t\t\t$.extend(true, item.opts, {\r\n\t\t\t\t\t\tiframe : {\r\n\t\t\t\t\t\t\tpreload : false,\r\n\t\t\t\t\t\t\tattr : {\r\n\t\t\t\t\t\t\t\tscrolling : \"no\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\titem.contentProvider = provider;\r\n\r\n\t\t\t\t\titem.opts.slideClass += ' fancybox-slide--' + ( provider == 'gmap_place' || provider == 'gmap_search' ? 'map' : 'video' );\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// If no content type is found, then set it to `image` as fallback\r\n\t\t\t\titem.type = 'image';\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t});\r\n\r\n}(window.jQuery));\r\n\r\n// ==========================================================================\r\n//\r\n// Guestures\r\n// Adds touch guestures, handles click and tap events\r\n//\r\n// ==========================================================================\r\n;(function (window, document, $) {\r\n\t'use strict';\r\n\r\n\tvar requestAFrame = (function () {\r\n        return window.requestAnimationFrame ||\r\n                window.webkitRequestAnimationFrame ||\r\n                window.mozRequestAnimationFrame ||\r\n                window.oRequestAnimationFrame ||\r\n                // if all else fails, use setTimeout\r\n                function (callback) {\r\n                    return window.setTimeout(callback, 1000 / 60);\r\n                };\r\n    })();\r\n\r\n\r\n    var cancelAFrame = (function () {\r\n        return window.cancelAnimationFrame ||\r\n                window.webkitCancelAnimationFrame ||\r\n                window.mozCancelAnimationFrame ||\r\n                window.oCancelAnimationFrame ||\r\n                function (id) {\r\n                    window.clearTimeout(id);\r\n                };\r\n    })();\r\n\r\n\r\n\tvar pointers = function( e ) {\r\n\t\tvar result = [];\r\n\r\n\t\te = e.originalEvent || e || window.e;\r\n\t\te = e.touches && e.touches.length ? e.touches : ( e.changedTouches && e.changedTouches.length ? e.changedTouches : [ e ] );\r\n\r\n\t\tfor ( var key in e ) {\r\n\r\n\t\t\tif ( e[ key ].pageX ) {\r\n\t\t\t\tresult.push( { x : e[ key ].pageX, y : e[ key ].pageY } );\r\n\r\n\t\t\t} else if ( e[ key ].clientX ) {\r\n\t\t\t\tresult.push( { x : e[ key ].clientX, y : e[ key ].clientY } );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t};\r\n\r\n\tvar distance = function( point2, point1, what ) {\r\n\t\tif ( !point1 || !point2 ) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tif ( what === 'x' ) {\r\n\t\t\treturn point2.x - point1.x;\r\n\r\n\t\t} else if ( what === 'y' ) {\r\n\t\t\treturn point2.y - point1.y;\r\n\t\t}\r\n\r\n\t\treturn Math.sqrt( Math.pow( point2.x - point1.x, 2 ) + Math.pow( point2.y - point1.y, 2 ) );\r\n\t};\r\n\r\n\tvar isClickable = function( $el ) {\r\n\r\n\t\tif ( $el.is('a,button,input,select,textarea,label') || $.isFunction( $el.get(0).onclick ) || $el.data('selectable') ) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t// Check for attributes like data-fancybox-next or data-fancybox-close\r\n\t\tfor ( var i = 0, atts = $el[0].attributes, n = atts.length; i < n; i++ ) {\r\n            if ( atts[i].nodeName.substr(0, 14) === 'data-fancybox-' ) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n\t \treturn false;\r\n\t};\r\n\r\n\tvar hasScrollbars = function( el ) {\r\n\t\tvar overflowY = window.getComputedStyle( el )['overflow-y'];\r\n\t\tvar overflowX = window.getComputedStyle( el )['overflow-x'];\r\n\r\n\t\tvar vertical   = (overflowY === 'scroll' || overflowY === 'auto') && el.scrollHeight > el.clientHeight;\r\n\t\tvar horizontal = (overflowX === 'scroll' || overflowX === 'auto') && el.scrollWidth > el.clientWidth;\r\n\r\n\t\treturn vertical || horizontal;\r\n\t};\r\n\r\n\tvar isScrollable = function ( $el ) {\r\n\t\tvar rez = false;\r\n\r\n\t\twhile ( true ) {\r\n\t\t\trez\t= hasScrollbars( $el.get(0) );\r\n\r\n\t\t\tif ( rez ) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\t$el = $el.parent();\r\n\r\n\t\t\tif ( !$el.length || $el.hasClass( 'fancybox-stage' ) || $el.is( 'body' ) ) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn rez;\r\n\t};\r\n\r\n\r\n\tvar Guestures = function ( instance ) {\r\n\t\tvar self = this;\r\n\r\n\t\tself.instance = instance;\r\n\r\n\t\tself.$bg        = instance.$refs.bg;\r\n\t\tself.$stage     = instance.$refs.stage;\r\n\t\tself.$container = instance.$refs.container;\r\n\r\n\t\tself.destroy();\r\n\r\n\t\tself.$container.on( 'touchstart.fb.touch mousedown.fb.touch', $.proxy(self, 'ontouchstart') );\r\n\t};\r\n\r\n\tGuestures.prototype.destroy = function() {\r\n\t\tthis.$container.off( '.fb.touch' );\r\n\t};\r\n\r\n\tGuestures.prototype.ontouchstart = function( e ) {\r\n\t\tvar self = this;\r\n\r\n\t\tvar $target  = $( e.target );\r\n\t\tvar instance = self.instance;\r\n\t\tvar current  = instance.current;\r\n\t\tvar $content = current.$content;\r\n\r\n\t\tvar isTouchDevice = ( e.type == 'touchstart' );\r\n\r\n\t\t// Do not respond to both events\r\n\t\tif ( isTouchDevice ) {\r\n\t        self.$container.off( 'mousedown.fb.touch' );\r\n\t    }\r\n\r\n\t\t// Ignore clicks while zooming or closing\r\n\t\tif ( !current || self.instance.isAnimating || self.instance.isClosing ) {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Ignore right click\r\n\t\tif ( e.originalEvent && e.originalEvent.button == 2 ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Ignore taping on links, buttons, input elements\r\n\t\tif ( !$target.length || isClickable( $target ) || isClickable( $target.parent() ) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Ignore clicks on the scrollbar\r\n\t\tif ( e.originalEvent.clientX > $target[0].clientWidth + $target.offset().left ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tself.startPoints = pointers( e );\r\n\r\n\t\t// Prevent zooming if already swiping\r\n\t\tif ( !self.startPoints || ( self.startPoints.length > 1 && instance.isSliding ) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tself.$target  = $target;\r\n\t\tself.$content = $content;\r\n\t\tself.canTap   = true;\r\n\r\n\t\t$(document).off( '.fb.touch' );\r\n\r\n\t\t$(document).on( isTouchDevice ? 'touchend.fb.touch touchcancel.fb.touch' : 'mouseup.fb.touch mouseleave.fb.touch',  $.proxy(self, \"ontouchend\"));\r\n\t\t$(document).on( isTouchDevice ? 'touchmove.fb.touch' : 'mousemove.fb.touch',  $.proxy(self, \"ontouchmove\"));\r\n\r\n\t\tif ( !(instance.current.opts.touch || instance.canPan() ) || !( $target.is( self.$stage ) || self.$stage.find( $target ).length ) ) {\r\n\r\n\t\t\t// Prevent ghosting\r\n\t\t\tif ( $target.is('img') ) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\te.stopPropagation();\r\n\r\n\t\tif ( !( $.fancybox.isMobile && ( isScrollable( self.$target ) || isScrollable( self.$target.parent() ) ) ) ) {\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\r\n\t\tself.canvasWidth  = Math.round( current.$slide[0].clientWidth );\r\n\t\tself.canvasHeight = Math.round( current.$slide[0].clientHeight );\r\n\r\n\t\tself.startTime = new Date().getTime();\r\n\t\tself.distanceX = self.distanceY = self.distance = 0;\r\n\r\n\t\tself.isPanning = false;\r\n\t\tself.isSwiping = false;\r\n\t\tself.isZooming = false;\r\n\r\n\t\tself.sliderStartPos  = self.sliderLastPos || { top: 0, left: 0 };\r\n\t\tself.contentStartPos = $.fancybox.getTranslate( self.$content );\r\n\t\tself.contentLastPos  = null;\r\n\r\n\t\tif ( self.startPoints.length === 1 && !self.isZooming ) {\r\n\t\t\tself.canTap = !instance.isSliding;\r\n\r\n\t\t\tif ( current.type === 'image' && ( self.contentStartPos.width > self.canvasWidth + 1 || self.contentStartPos.height > self.canvasHeight + 1 ) ) {\r\n\r\n\t\t\t\t$.fancybox.stop( self.$content );\r\n\r\n\t\t\t\tself.$content.css( 'transition-duration', '0ms' );\r\n\r\n\t\t\t\tself.isPanning = true;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tself.isSwiping = true;\r\n\t\t\t}\r\n\r\n\t\t\tself.$container.addClass('fancybox-controls--isGrabbing');\r\n\t\t}\r\n\r\n\t\tif ( self.startPoints.length === 2 && !instance.isAnimating && !current.hasError && current.type === 'image' && ( current.isLoaded || current.$ghost ) ) {\r\n\t\t\tself.isZooming = true;\r\n\r\n\t\t\tself.isSwiping = false;\r\n\t\t\tself.isPanning = false;\r\n\r\n\t\t\t$.fancybox.stop( self.$content );\r\n\r\n\t\t\tself.$content.css( 'transition-duration', '0ms' );\r\n\r\n\t\t\tself.centerPointStartX = ( ( self.startPoints[0].x + self.startPoints[1].x ) * 0.5 ) - $(window).scrollLeft();\r\n\t\t\tself.centerPointStartY = ( ( self.startPoints[0].y + self.startPoints[1].y ) * 0.5 ) - $(window).scrollTop();\r\n\r\n\t\t\tself.percentageOfImageAtPinchPointX = ( self.centerPointStartX - self.contentStartPos.left ) / self.contentStartPos.width;\r\n\t\t\tself.percentageOfImageAtPinchPointY = ( self.centerPointStartY - self.contentStartPos.top  ) / self.contentStartPos.height;\r\n\r\n\t\t\tself.startDistanceBetweenFingers = distance( self.startPoints[0], self.startPoints[1] );\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.ontouchmove = function( e ) {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tself.newPoints = pointers( e );\r\n\r\n\t\tif ( $.fancybox.isMobile && ( isScrollable( self.$target ) || isScrollable( self.$target.parent() ) ) ) {\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\tself.canTap = false;\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( !( self.instance.current.opts.touch || self.instance.canPan() ) || !self.newPoints || !self.newPoints.length ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tself.distanceX = distance( self.newPoints[0], self.startPoints[0], 'x' );\r\n\t\tself.distanceY = distance( self.newPoints[0], self.startPoints[0], 'y' );\r\n\r\n\t\tself.distance = distance( self.newPoints[0], self.startPoints[0] );\r\n\r\n\t\t// Skip false ontouchmove events (Chrome)\r\n\t\tif ( self.distance > 0 ) {\r\n\r\n\t\t\tif ( !( self.$target.is( self.$stage ) || self.$stage.find( self.$target ).length ) ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tif ( self.isSwiping ) {\r\n\t\t\t\tself.onSwipe();\r\n\r\n\t\t\t} else if ( self.isPanning ) {\r\n\t\t\t\tself.onPan();\r\n\r\n\t\t\t} else if ( self.isZooming ) {\r\n\t\t\t\tself.onZoom();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.onSwipe = function() {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar swiping = self.isSwiping;\r\n\t\tvar left    = self.sliderStartPos.left || 0;\r\n\t\tvar angle;\r\n\r\n\t\tif ( swiping === true ) {\r\n\r\n\t\t\tif ( Math.abs( self.distance ) > 10 )  {\r\n\r\n\t\t\t\tself.canTap = false;\r\n\r\n\t\t\t\tif ( self.instance.group.length < 2 && self.instance.opts.touch.vertical ) {\r\n\t\t\t\t\tself.isSwiping  = 'y';\r\n\r\n\t\t\t\t} else if ( self.instance.isSliding || self.instance.opts.touch.vertical === false || ( self.instance.opts.touch.vertical === 'auto' && $( window ).width() > 800 ) ) {\r\n\t\t\t\t\tself.isSwiping  = 'x';\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tangle = Math.abs( Math.atan2( self.distanceY, self.distanceX ) * 180 / Math.PI );\r\n\r\n\t\t\t\t\tself.isSwiping = ( angle > 45 && angle < 135 ) ? 'y' : 'x';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tself.instance.isSliding = self.isSwiping;\r\n\r\n\t\t\t\t// Reset points to avoid jumping, because we dropped first swipes to calculate the angle\r\n\t\t\t\tself.startPoints = self.newPoints;\r\n\r\n\t\t\t\t$.each(self.instance.slides, function( index, slide ) {\r\n\t\t\t\t\t$.fancybox.stop( slide.$slide );\r\n\r\n\t\t\t\t\tslide.$slide.css( 'transition-duration', '0ms' );\r\n\r\n\t\t\t\t\tslide.inTransition = false;\r\n\r\n\t\t\t\t\tif ( slide.pos === self.instance.current.pos ) {\r\n\t\t\t\t\t\tself.sliderStartPos.left = $.fancybox.getTranslate( slide.$slide ).left;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t//self.instance.current.isMoved = true;\r\n\r\n\t\t\t\t// Stop slideshow\r\n\t\t\t\tif ( self.instance.SlideShow && self.instance.SlideShow.isActive ) {\r\n\t\t\t\t\tself.instance.SlideShow.stop();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( swiping == 'x' ) {\r\n\r\n\t\t\t\t// Sticky edges\r\n\t\t\t\tif ( self.distanceX > 0 && ( self.instance.group.length < 2 || ( self.instance.current.index === 0 && !self.instance.current.opts.loop ) ) ) {\r\n\t\t\t\t\tleft = left + Math.pow( self.distanceX, 0.8 );\r\n\r\n\t\t\t\t} else if ( self.distanceX < 0 && ( self.instance.group.length < 2 || ( self.instance.current.index === self.instance.group.length - 1 && !self.instance.current.opts.loop ) ) ) {\r\n\t\t\t\t\tleft = left - Math.pow( -self.distanceX, 0.8 );\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tleft = left + self.distanceX;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tself.sliderLastPos = {\r\n\t\t\t\ttop  : swiping == 'x' ? 0 : self.sliderStartPos.top + self.distanceY,\r\n\t\t\t\tleft : left\r\n\t\t\t};\r\n\r\n\t\t\tif ( self.requestId ) {\r\n\t\t\t\tcancelAFrame( self.requestId );\r\n\r\n\t\t\t\tself.requestId = null;\r\n\t\t\t}\r\n\r\n\t\t\tself.requestId = requestAFrame(function() {\r\n\r\n\t\t\t\tif ( self.sliderLastPos ) {\r\n\t\t\t\t\t$.each(self.instance.slides, function( index, slide ) {\r\n\t\t\t\t\t\tvar pos = slide.pos - self.instance.currPos;\r\n\r\n\t\t\t\t\t\t$.fancybox.setTranslate( slide.$slide, {\r\n\t\t\t\t\t\t\ttop  : self.sliderLastPos.top,\r\n\t\t\t\t\t\t\tleft : self.sliderLastPos.left + ( pos * self.canvasWidth ) + ( pos * slide.opts.gutter )\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tself.$container.addClass( 'fancybox-is-sliding' );\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.onPan = function() {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar newOffsetX, newOffsetY, newPos;\r\n\r\n\t\tself.canTap = false;\r\n\r\n\t\tif ( self.contentStartPos.width > self.canvasWidth ) {\r\n\t\t\tnewOffsetX = self.contentStartPos.left + self.distanceX;\r\n\r\n\t\t} else {\r\n\t\t\tnewOffsetX = self.contentStartPos.left;\r\n\t\t}\r\n\r\n\t\tnewOffsetY = self.contentStartPos.top + self.distanceY;\r\n\r\n\t\tnewPos = self.limitMovement( newOffsetX, newOffsetY, self.contentStartPos.width, self.contentStartPos.height );\r\n\r\n\t\tnewPos.scaleX = self.contentStartPos.scaleX;\r\n\t\tnewPos.scaleY = self.contentStartPos.scaleY;\r\n\r\n\t\tself.contentLastPos = newPos;\r\n\r\n\t\tif ( self.requestId ) {\r\n\t\t\tcancelAFrame( self.requestId );\r\n\r\n\t\t\tself.requestId = null;\r\n\t\t}\r\n\r\n\t\tself.requestId = requestAFrame(function() {\r\n\t\t\t$.fancybox.setTranslate( self.$content, self.contentLastPos );\r\n\t\t});\r\n\t};\r\n\r\n\t// Make panning sticky to the edges\r\n\tGuestures.prototype.limitMovement = function( newOffsetX, newOffsetY, newWidth, newHeight ) {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar minTranslateX, minTranslateY, maxTranslateX, maxTranslateY;\r\n\r\n\t\tvar canvasWidth  = self.canvasWidth;\r\n\t\tvar canvasHeight = self.canvasHeight;\r\n\r\n\t\tvar currentOffsetX = self.contentStartPos.left;\r\n\t\tvar currentOffsetY = self.contentStartPos.top;\r\n\r\n\t\tvar distanceX = self.distanceX;\r\n\t\tvar distanceY = self.distanceY;\r\n\r\n\t\t// Slow down proportionally to traveled distance\r\n\r\n\t\tminTranslateX = Math.max(0, canvasWidth  * 0.5 - newWidth  * 0.5 );\r\n\t\tminTranslateY = Math.max(0, canvasHeight * 0.5 - newHeight * 0.5 );\r\n\r\n\t\tmaxTranslateX = Math.min( canvasWidth  - newWidth,  canvasWidth  * 0.5 - newWidth  * 0.5 );\r\n\t\tmaxTranslateY = Math.min( canvasHeight - newHeight, canvasHeight * 0.5 - newHeight * 0.5 );\r\n\r\n\t\tif ( newWidth > canvasWidth ) {\r\n\r\n\t\t\t//   ->\r\n\t\t\tif ( distanceX > 0 && newOffsetX > minTranslateX ) {\r\n\t\t\t\tnewOffsetX = minTranslateX - 1 + Math.pow( -minTranslateX + currentOffsetX + distanceX, 0.8 ) || 0;\r\n\t\t\t}\r\n\r\n\t\t\t//    <-\r\n\t\t\tif ( distanceX  < 0 && newOffsetX < maxTranslateX ) {\r\n\t\t\t\tnewOffsetX = maxTranslateX + 1 - Math.pow( maxTranslateX - currentOffsetX - distanceX, 0.8 ) || 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( newHeight > canvasHeight ) {\r\n\r\n\t\t\t//   \\/\r\n\t\t\tif ( distanceY > 0 && newOffsetY > minTranslateY ) {\r\n\t\t\t\tnewOffsetY = minTranslateY - 1 + Math.pow(-minTranslateY + currentOffsetY + distanceY, 0.8 ) || 0;\r\n\t\t\t}\r\n\r\n\t\t\t//   /\\\r\n\t\t\tif ( distanceY < 0 && newOffsetY < maxTranslateY ) {\r\n\t\t\t\tnewOffsetY = maxTranslateY + 1 - Math.pow ( maxTranslateY - currentOffsetY - distanceY, 0.8 ) || 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttop  : newOffsetY,\r\n\t\t\tleft : newOffsetX\r\n\t\t};\r\n\r\n\t};\r\n\r\n\r\n\tGuestures.prototype.limitPosition = function( newOffsetX, newOffsetY, newWidth, newHeight ) {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar canvasWidth  = self.canvasWidth;\r\n\t\tvar canvasHeight = self.canvasHeight;\r\n\r\n\t\tif ( newWidth > canvasWidth ) {\r\n\t\t\tnewOffsetX = newOffsetX > 0 ? 0 : newOffsetX;\r\n\t\t\tnewOffsetX = newOffsetX < canvasWidth - newWidth ? canvasWidth - newWidth : newOffsetX;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Center horizontally\r\n\t\t\tnewOffsetX = Math.max( 0, canvasWidth / 2 - newWidth / 2 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( newHeight > canvasHeight ) {\r\n\t\t\tnewOffsetY = newOffsetY > 0 ? 0 : newOffsetY;\r\n\t\t\tnewOffsetY = newOffsetY < canvasHeight - newHeight ? canvasHeight - newHeight : newOffsetY;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Center vertically\r\n\t\t\tnewOffsetY = Math.max( 0, canvasHeight / 2 - newHeight / 2 );\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttop  : newOffsetY,\r\n\t\t\tleft : newOffsetX\r\n\t\t};\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.onZoom = function() {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\t// Calculate current distance between points to get pinch ratio and new width and height\r\n\r\n\t\tvar currentWidth  = self.contentStartPos.width;\r\n\t\tvar currentHeight = self.contentStartPos.height;\r\n\r\n\t\tvar currentOffsetX = self.contentStartPos.left;\r\n\t\tvar currentOffsetY = self.contentStartPos.top;\r\n\r\n\t\tvar endDistanceBetweenFingers = distance( self.newPoints[0], self.newPoints[1] );\r\n\r\n\t\tvar pinchRatio = endDistanceBetweenFingers / self.startDistanceBetweenFingers;\r\n\r\n\t\tvar newWidth  = Math.floor( currentWidth  * pinchRatio );\r\n\t\tvar newHeight = Math.floor( currentHeight * pinchRatio );\r\n\r\n\t\t// This is the translation due to pinch-zooming\r\n\t\tvar translateFromZoomingX = (currentWidth  - newWidth)  * self.percentageOfImageAtPinchPointX;\r\n\t\tvar translateFromZoomingY = (currentHeight - newHeight) * self.percentageOfImageAtPinchPointY;\r\n\r\n\t\t//Point between the two touches\r\n\r\n\t\tvar centerPointEndX = ((self.newPoints[0].x + self.newPoints[1].x) / 2) - $(window).scrollLeft();\r\n\t\tvar centerPointEndY = ((self.newPoints[0].y + self.newPoints[1].y) / 2) - $(window).scrollTop();\r\n\r\n\t\t// And this is the translation due to translation of the centerpoint\r\n\t\t// between the two fingers\r\n\r\n\t\tvar translateFromTranslatingX = centerPointEndX - self.centerPointStartX;\r\n\t\tvar translateFromTranslatingY = centerPointEndY - self.centerPointStartY;\r\n\r\n\t\t// The new offset is the old/current one plus the total translation\r\n\r\n\t\tvar newOffsetX = currentOffsetX + ( translateFromZoomingX + translateFromTranslatingX );\r\n\t\tvar newOffsetY = currentOffsetY + ( translateFromZoomingY + translateFromTranslatingY );\r\n\r\n\t\tvar newPos = {\r\n\t\t\ttop    : newOffsetY,\r\n\t\t\tleft   : newOffsetX,\r\n\t\t\tscaleX : self.contentStartPos.scaleX * pinchRatio,\r\n\t\t\tscaleY : self.contentStartPos.scaleY * pinchRatio\r\n\t\t};\r\n\r\n\t\tself.canTap = false;\r\n\r\n\t\tself.newWidth  = newWidth;\r\n\t\tself.newHeight = newHeight;\r\n\r\n\t\tself.contentLastPos = newPos;\r\n\r\n\t\tif ( self.requestId ) {\r\n\t\t\tcancelAFrame( self.requestId );\r\n\r\n\t\t\tself.requestId = null;\r\n\t\t}\r\n\r\n\t\tself.requestId = requestAFrame(function() {\r\n\t\t\t$.fancybox.setTranslate( self.$content, self.contentLastPos );\r\n\t\t});\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.ontouchend = function( e ) {\r\n\r\n\t\tvar self = this;\r\n\t\tvar dMs  = Math.max( (new Date().getTime() ) - self.startTime, 1);\r\n\r\n\t\tvar swiping = self.isSwiping;\r\n\t\tvar panning = self.isPanning;\r\n\t\tvar zooming = self.isZooming;\r\n\r\n\t\tself.endPoints = pointers( e );\r\n\r\n\t\tself.$container.removeClass( 'fancybox-controls--isGrabbing' );\r\n\r\n\t\t$(document).off( '.fb.touch' );\r\n\r\n\t\tif ( self.requestId ) {\r\n\t\t\tcancelAFrame( self.requestId );\r\n\r\n\t\t\tself.requestId = null;\r\n\t\t}\r\n\r\n\t\tself.isSwiping = false;\r\n\t\tself.isPanning = false;\r\n\t\tself.isZooming = false;\r\n\r\n\t\tif ( self.canTap )  {\r\n\t\t\treturn self.onTap( e );\r\n\t\t}\r\n\r\n\t\tself.speed = 366;\r\n\r\n\t\t// Speed in px/ms\r\n\t\tself.velocityX = self.distanceX / dMs * 0.5;\r\n\t\tself.velocityY = self.distanceY / dMs * 0.5;\r\n\r\n\t\tself.speedX = Math.max( self.speed * 0.5, Math.min( self.speed * 1.5, ( 1 / Math.abs( self.velocityX ) ) * self.speed ) );\r\n\r\n\t\tif ( panning ) {\r\n\t\t\tself.endPanning();\r\n\r\n\t\t} else if ( zooming ) {\r\n\t\t\tself.endZooming();\r\n\r\n\t\t} else {\r\n\t\t\tself.endSwiping( swiping );\r\n\t\t}\r\n\r\n\t\treturn;\r\n\t};\r\n\r\n\tGuestures.prototype.endSwiping = function( swiping ) {\r\n\r\n\t\tvar self = this;\r\n\t\tvar ret = false;\r\n\r\n\t\tself.instance.isSliding = false;\r\n\t\tself.sliderLastPos      = null;\r\n\r\n\t\t// Close if swiped vertically / navigate if horizontally\r\n\t\tif ( swiping == 'y' && Math.abs( self.distanceY ) > 50 ) {\r\n\r\n\t\t\t// Continue vertical movement\r\n\t\t\t$.fancybox.animate( self.instance.current.$slide, {\r\n\t\t\t\ttop     : self.sliderStartPos.top + self.distanceY + ( self.velocityY * 150 ),\r\n\t\t\t\topacity : 0\r\n\t\t\t}, 150 );\r\n\r\n\t\t\tret = self.instance.close( true, 300 );\r\n\r\n\t\t} else if ( swiping == 'x' && self.distanceX > 50 && self.instance.group.length > 1 ) {\r\n\t\t\tret = self.instance.previous( self.speedX );\r\n\r\n\t\t} else if ( swiping == 'x' && self.distanceX < -50  && self.instance.group.length > 1 ) {\r\n\t\t\tret = self.instance.next( self.speedX );\r\n\t\t}\r\n\r\n\t\tif ( ret === false && ( swiping == 'x' || swiping == 'y' ) ) {\r\n\t\t\tself.instance.jumpTo( self.instance.current.index, 150 );\r\n\t\t}\r\n\r\n\t\tself.$container.removeClass( 'fancybox-is-sliding' );\r\n\r\n\t};\r\n\r\n\t// Limit panning from edges\r\n\t// ========================\r\n\r\n\tGuestures.prototype.endPanning = function() {\r\n\r\n\t\tvar self = this;\r\n\t\tvar newOffsetX, newOffsetY, newPos;\r\n\r\n\t\tif ( !self.contentLastPos ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( self.instance.current.opts.touch.momentum === false ) {\r\n\t\t\tnewOffsetX = self.contentLastPos.left;\r\n\t\t\tnewOffsetY = self.contentLastPos.top;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Continue movement\r\n\t\t\tnewOffsetX = self.contentLastPos.left + ( self.velocityX * self.speed );\r\n\t\t\tnewOffsetY = self.contentLastPos.top  + ( self.velocityY * self.speed );\r\n\t\t}\r\n\r\n\t\tnewPos = self.limitPosition( newOffsetX, newOffsetY, self.contentStartPos.width, self.contentStartPos.height );\r\n\r\n\t\t newPos.width  = self.contentStartPos.width;\r\n\t\t newPos.height = self.contentStartPos.height;\r\n\r\n\t\t$.fancybox.animate( self.$content, newPos, 330 );\r\n\t};\r\n\r\n\r\n\tGuestures.prototype.endZooming = function() {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar current = self.instance.current;\r\n\r\n\t\tvar newOffsetX, newOffsetY, newPos, reset;\r\n\r\n\t\tvar newWidth  = self.newWidth;\r\n\t\tvar newHeight = self.newHeight;\r\n\r\n\t\tif ( !self.contentLastPos ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tnewOffsetX = self.contentLastPos.left;\r\n\t\tnewOffsetY = self.contentLastPos.top;\r\n\r\n\t\treset = {\r\n\t\t   \ttop    : newOffsetY,\r\n\t\t   \tleft   : newOffsetX,\r\n\t\t   \twidth  : newWidth,\r\n\t\t   \theight : newHeight,\r\n\t\t\tscaleX : 1,\r\n\t\t\tscaleY : 1\r\n\t   };\r\n\r\n\t   // Reset scalex/scaleY values; this helps for perfomance and does not break animation\r\n\t   $.fancybox.setTranslate( self.$content, reset );\r\n\r\n\t\tif ( newWidth < self.canvasWidth && newHeight < self.canvasHeight ) {\r\n\t\t\tself.instance.scaleToFit( 150 );\r\n\r\n\t\t} else if ( newWidth > current.width || newHeight > current.height ) {\r\n\t\t\tself.instance.scaleToActual( self.centerPointStartX, self.centerPointStartY, 150 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tnewPos = self.limitPosition( newOffsetX, newOffsetY, newWidth, newHeight );\r\n\r\n\t\t\t// Switch from scale() to width/height or animation will not work correctly\r\n\t\t\t$.fancybox.setTranslate( self.content, $.fancybox.getTranslate( self.$content ) );\r\n\r\n\t\t\t$.fancybox.animate( self.$content, newPos, 150 );\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.onTap = function(e) {\r\n\t\tvar self    = this;\r\n\t\tvar $target = $( e.target );\r\n\r\n\t\tvar instance = self.instance;\r\n\t\tvar current  = instance.current;\r\n\r\n\t\tvar endPoints = ( e && pointers( e ) ) || self.startPoints;\r\n\r\n\t\tvar tapX = endPoints[0] ? endPoints[0].x - self.$stage.offset().left : 0;\r\n\t\tvar tapY = endPoints[0] ? endPoints[0].y - self.$stage.offset().top  : 0;\r\n\r\n\t\tvar where;\r\n\r\n\t\tvar process = function ( prefix ) {\r\n\r\n\t\t\tvar action = current.opts[ prefix ];\r\n\r\n\t\t\tif ( $.isFunction( action ) ) {\r\n\t\t\t\taction = action.apply( instance, [ current, e ] );\r\n\t\t\t}\r\n\r\n\t\t\tif ( !action) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tswitch ( action ) {\r\n\r\n\t\t\t\tcase \"close\" :\r\n\r\n\t\t\t\t\tinstance.close( self.startEvent );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"toggleControls\" :\r\n\r\n\t\t\t\t\tinstance.toggleControls( true );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"next\" :\r\n\r\n\t\t\t\t\tinstance.next();\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"nextOrClose\" :\r\n\r\n\t\t\t\t\tif ( instance.group.length > 1 ) {\r\n\t\t\t\t\t\tinstance.next();\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tinstance.close( self.startEvent );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"zoom\" :\r\n\r\n\t\t\t\t\tif ( current.type == 'image' && ( current.isLoaded || current.$ghost ) ) {\r\n\r\n\t\t\t\t\t\tif ( instance.canPan() ) {\r\n\t\t\t\t\t\t\tinstance.scaleToFit();\r\n\r\n\t\t\t\t\t\t} else if ( instance.isScaledDown() ) {\r\n\t\t\t\t\t\t\tinstance.scaleToActual( tapX, tapY );\r\n\r\n\t\t\t\t\t\t} else if ( instance.group.length < 2 ) {\r\n\t\t\t\t\t\t\tinstance.close( self.startEvent );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\t// Ignore right click\r\n\t\tif ( e.originalEvent && e.originalEvent.button == 2 ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Skip if current slide is not in the center\r\n\t\tif ( instance.isSliding ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Skip if clicked on the scrollbar\r\n\t\tif ( tapX > $target[0].clientWidth + $target.offset().left ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Check where is clicked\r\n\t\tif ( $target.is( '.fancybox-bg,.fancybox-inner,.fancybox-outer,.fancybox-container' ) ) {\r\n\t\t\twhere = 'Outside';\r\n\r\n\t\t} else if ( $target.is( '.fancybox-slide' ) ) {\r\n\t\t\twhere = 'Slide';\r\n\r\n\t\t} else if  ( instance.current.$content && instance.current.$content.has( e.target ).length ) {\r\n\t\t \twhere = 'Content';\r\n\r\n\t\t} else {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Check if this is a double tap\r\n\t\tif ( self.tapped ) {\r\n\r\n\t\t\t// Stop previously created single tap\r\n\t\t\tclearTimeout( self.tapped );\r\n\t\t\tself.tapped = null;\r\n\r\n\t\t\t// Skip if distance between taps is too big\r\n\t\t\tif ( Math.abs( tapX - self.tapX ) > 50 || Math.abs( tapY - self.tapY ) > 50 || instance.isSliding ) {\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\r\n\t\t\t// OK, now we assume that this is a double-tap\r\n\t\t\tprocess( 'dblclick' + where );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Single tap will be processed if user has not clicked second time within 300ms\r\n\t\t\t// or there is no need to wait for double-tap\r\n\t\t\tself.tapX = tapX;\r\n\t\t\tself.tapY = tapY;\r\n\r\n\t\t\tif ( current.opts[ 'dblclick' + where ] && current.opts[ 'dblclick' + where ] !== current.opts[ 'click' + where ] ) {\r\n\t\t\t\tself.tapped = setTimeout(function() {\r\n\t\t\t\t\tself.tapped = null;\r\n\r\n\t\t\t\t\tprocess( 'click' + where );\r\n\r\n\t\t\t\t}, 300);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tprocess( 'click' + where );\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t};\r\n\r\n\t$(document).on('onActivate.fb', function (e, instance) {\r\n\t\tif ( instance && !instance.Guestures ) {\r\n\t\t\tinstance.Guestures = new Guestures( instance );\r\n\t\t}\r\n\t});\r\n\r\n\t$(document).on('beforeClose.fb', function (e, instance) {\r\n\t\tif ( instance && instance.Guestures ) {\r\n\t\t\tinstance.Guestures.destroy();\r\n\t\t}\r\n\t});\r\n\r\n\r\n}(window, document, window.jQuery));\r\n\r\n// ==========================================================================\r\n//\r\n// SlideShow\r\n// Enables slideshow functionality\r\n//\r\n// Example of usage:\r\n// $.fancybox.getInstance().SlideShow.start()\r\n//\r\n// ==========================================================================\r\n;(function (document, $) {\r\n\t'use strict';\r\n\r\n\tvar SlideShow = function( instance ) {\r\n\t\tthis.instance = instance;\r\n\t\tthis.init();\r\n\t};\r\n\r\n\t$.extend( SlideShow.prototype, {\r\n\t\ttimer    : null,\r\n\t\tisActive : false,\r\n\t\t$button  : null,\r\n\t\tspeed    : 3000,\r\n\r\n\t\tinit : function() {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tself.$button = self.instance.$refs.toolbar.find('[data-fancybox-play]').on('click', function() {\r\n\t\t\t\tself.toggle();\r\n\t\t\t});\r\n\r\n\t\t\tif ( self.instance.group.length < 2 || !self.instance.group[ self.instance.currIndex ].opts.slideShow ) {\r\n\t\t\t\tself.$button.hide();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tset : function() {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\t// Check if reached last element\r\n\t\t\tif ( self.instance && self.instance.current && (self.instance.current.opts.loop || self.instance.currIndex < self.instance.group.length - 1 )) {\r\n\t\t\t\tself.timer = setTimeout(function() {\r\n\t\t\t\t\tself.instance.next();\r\n\r\n\t\t\t\t}, self.instance.current.opts.slideShow.speed || self.speed);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tself.stop();\r\n\t\t\t\tself.instance.idleSecondsCounter = 0;\r\n\t\t\t\tself.instance.showControls();\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tclear : function() {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tclearTimeout( self.timer );\r\n\r\n\t\t\tself.timer = null;\r\n\t\t},\r\n\r\n\t\tstart : function() {\r\n\t\t\tvar self = this;\r\n\t\t\tvar current = self.instance.current;\r\n\r\n\t\t\tif ( self.instance && current && ( current.opts.loop || current.index < self.instance.group.length - 1 )) {\r\n\r\n\t\t\t\tself.isActive = true;\r\n\r\n\t\t\t\tself.$button\r\n\t\t\t\t\t.attr( 'title', current.opts.i18n[ current.opts.lang ].PLAY_STOP )\r\n\t\t\t\t\t.addClass( 'fancybox-button--pause' );\r\n\r\n\t\t\t\tif ( current.isComplete ) {\r\n\t\t\t\t\tself.set();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tstop : function() {\r\n\t\t\tvar self = this;\r\n\t\t\tvar current = self.instance.current;\r\n\r\n\t\t\tself.clear();\r\n\r\n\t\t\tself.$button\r\n\t\t\t\t.attr( 'title', current.opts.i18n[ current.opts.lang ].PLAY_START )\r\n\t\t\t\t.removeClass( 'fancybox-button--pause' );\r\n\r\n\t\t\tself.isActive = false;\r\n\t\t},\r\n\r\n\t\ttoggle : function() {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tif ( self.isActive ) {\r\n\t\t\t\tself.stop();\r\n\r\n\t\t\t} else {\r\n\t\t\t\tself.start();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t$(document).on({\r\n\t\t'onInit.fb' : function(e, instance) {\r\n\t\t\tif ( instance && !instance.SlideShow ) {\r\n\t\t\t\tinstance.SlideShow = new SlideShow( instance );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'beforeShow.fb' : function(e, instance, current, firstRun) {\r\n\t\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\t\tif ( firstRun ) {\r\n\r\n\t\t\t\tif ( SlideShow && current.opts.slideShow.autoStart ) {\r\n\t\t\t\t\tSlideShow.start();\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( SlideShow && SlideShow.isActive )  {\r\n\t\t\t\tSlideShow.clear();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'afterShow.fb' : function(e, instance, current) {\r\n\t\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\t\tif ( SlideShow && SlideShow.isActive ) {\r\n\t\t\t\tSlideShow.set();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'afterKeydown.fb' : function(e, instance, current, keypress, keycode) {\r\n\t\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\t\t// \"P\" or Spacebar\r\n\t\t\tif ( SlideShow && current.opts.slideShow && ( keycode === 80 || keycode === 32 ) && !$(document.activeElement).is( 'button,a,input' ) ) {\r\n\t\t\t\tkeypress.preventDefault();\r\n\r\n\t\t\t\tSlideShow.toggle();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'beforeClose.fb onDeactivate.fb' : function(e, instance) {\r\n\t\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\t\tif ( SlideShow ) {\r\n\t\t\t\tSlideShow.stop();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t// Page Visibility API to pause slideshow when window is not active\r\n\t$(document).on(\"visibilitychange\", function() {\r\n\t\tvar instance  = $.fancybox.getInstance();\r\n\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\tif ( SlideShow && SlideShow.isActive ) {\r\n\t\t\tif ( document.hidden ) {\r\n\t\t\t\tSlideShow.clear();\r\n\r\n\t\t\t} else {\r\n\t\t\t\tSlideShow.set();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n}(document, window.jQuery));\r\n\r\n// ==========================================================================\r\n//\r\n// FullScreen\r\n// Adds fullscreen functionality\r\n//\r\n// ==========================================================================\r\n;(function (document, $) {\r\n\t'use strict';\r\n\r\n\t// Collection of methods supported by user browser\r\n\tvar fn = (function () {\r\n\r\n\t\tvar fnMap = [\r\n\t\t\t[\r\n\t\t\t\t'requestFullscreen',\r\n\t\t\t\t'exitFullscreen',\r\n\t\t\t\t'fullscreenElement',\r\n\t\t\t\t'fullscreenEnabled',\r\n\t\t\t\t'fullscreenchange',\r\n\t\t\t\t'fullscreenerror'\r\n\t\t\t],\r\n\t\t\t// new WebKit\r\n\t\t\t[\r\n\t\t\t\t'webkitRequestFullscreen',\r\n\t\t\t\t'webkitExitFullscreen',\r\n\t\t\t\t'webkitFullscreenElement',\r\n\t\t\t\t'webkitFullscreenEnabled',\r\n\t\t\t\t'webkitfullscreenchange',\r\n\t\t\t\t'webkitfullscreenerror'\r\n\r\n\t\t\t],\r\n\t\t\t// old WebKit (Safari 5.1)\r\n\t\t\t[\r\n\t\t\t\t'webkitRequestFullScreen',\r\n\t\t\t\t'webkitCancelFullScreen',\r\n\t\t\t\t'webkitCurrentFullScreenElement',\r\n\t\t\t\t'webkitCancelFullScreen',\r\n\t\t\t\t'webkitfullscreenchange',\r\n\t\t\t\t'webkitfullscreenerror'\r\n\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t'mozRequestFullScreen',\r\n\t\t\t\t'mozCancelFullScreen',\r\n\t\t\t\t'mozFullScreenElement',\r\n\t\t\t\t'mozFullScreenEnabled',\r\n\t\t\t\t'mozfullscreenchange',\r\n\t\t\t\t'mozfullscreenerror'\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t'msRequestFullscreen',\r\n\t\t\t\t'msExitFullscreen',\r\n\t\t\t\t'msFullscreenElement',\r\n\t\t\t\t'msFullscreenEnabled',\r\n\t\t\t\t'MSFullscreenChange',\r\n\t\t\t\t'MSFullscreenError'\r\n\t\t\t]\r\n\t\t];\r\n\r\n\t\tvar val;\r\n\t\tvar ret = {};\r\n\t\tvar i, j;\r\n\r\n\t\tfor ( i = 0; i < fnMap.length; i++ ) {\r\n\t\t\tval = fnMap[ i ];\r\n\r\n\t\t\tif ( val && val[ 1 ] in document ) {\r\n\t\t\t\tfor ( j = 0; j < val.length; j++ ) {\r\n\t\t\t\t\tret[ fnMap[ 0 ][ j ] ] = val[ j ];\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn ret;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t})();\r\n\r\n\t// If browser does not have Full Screen API, then simply unset default button template and stop\r\n\tif ( !fn ) {\r\n\r\n\t\tif ( $ && $.fancybox ) {\r\n\t\t\t$.fancybox.defaults.btnTpl.fullScreen = false;\r\n\t\t}\r\n\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar FullScreen = {\r\n\r\n\t\trequest : function ( elem ) {\r\n\r\n\t\t\telem = elem || document.documentElement;\r\n\r\n\t\t\telem[ fn.requestFullscreen ]( elem.ALLOW_KEYBOARD_INPUT );\r\n\r\n\t\t},\r\n\t\texit : function () {\r\n\r\n\t\t\tdocument[ fn.exitFullscreen ]();\r\n\r\n\t\t},\r\n\t\ttoggle : function ( elem ) {\r\n\r\n\t\t\telem = elem || document.documentElement;\r\n\r\n\t\t\tif ( this.isFullscreen() ) {\r\n\t\t\t\tthis.exit();\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis.request( elem );\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tisFullscreen : function()  {\r\n\r\n\t\t\treturn Boolean( document[ fn.fullscreenElement ] );\r\n\r\n\t\t},\r\n\t\tenabled : function()  {\r\n\r\n\t\t\treturn Boolean( document[ fn.fullscreenEnabled ] );\r\n\r\n\t\t}\r\n\t};\r\n\r\n\t$(document).on({\r\n\t\t'onInit.fb' : function(e, instance) {\r\n\t\t\tvar $container;\r\n\r\n\t\t\tvar $button = instance.$refs.toolbar.find('[data-fancybox-fullscreen]');\r\n\r\n\t\t\tif ( instance && !instance.FullScreen && instance.group[ instance.currIndex ].opts.fullScreen ) {\r\n\t\t\t\t$container = instance.$refs.container;\r\n\r\n\t\t\t\t$container.on('click.fb-fullscreen', '[data-fancybox-fullscreen]', function(e) {\r\n\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\tFullScreen.toggle( $container[ 0 ] );\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif ( instance.opts.fullScreen && instance.opts.fullScreen.autoStart === true ) {\r\n\t\t\t\t\tFullScreen.request( $container[ 0 ] );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Expose API\r\n\t\t\t\tinstance.FullScreen = FullScreen;\r\n\r\n\t\t\t} else {\r\n\t\t\t\t$button.hide();\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t'afterKeydown.fb' : function(e, instance, current, keypress, keycode) {\r\n\r\n\t\t\t// \"P\" or Spacebar\r\n\t\t\tif ( instance && instance.FullScreen && keycode === 70 ) {\r\n\t\t\t\tkeypress.preventDefault();\r\n\r\n\t\t\t\tinstance.FullScreen.toggle( instance.$refs.container[ 0 ] );\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t'beforeClose.fb' : function( instance ) {\r\n\t\t\tif ( instance && instance.FullScreen ) {\r\n\t\t\t\tFullScreen.exit();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t$(document).on(fn.fullscreenchange, function() {\r\n\t\tvar instance = $.fancybox.getInstance();\r\n\r\n\t\t// If image is zooming, then force to stop and reposition properly\r\n\t\tif ( instance.current && instance.current.type === 'image' && instance.isAnimating ) {\r\n\t\t\tinstance.current.$content.css( 'transition', 'none' );\r\n\r\n\t\t\tinstance.isAnimating = false;\r\n\r\n\t\t\tinstance.update( true, true, 0 );\r\n\t\t}\r\n\r\n\t\tinstance.trigger('onFullscreenChange', FullScreen.isFullscreen() );\r\n\r\n\t});\r\n\r\n}(document, window.jQuery));\r\n\r\n// ==========================================================================\r\n//\r\n// Thumbs\r\n// Displays thumbnails in a grid\r\n//\r\n// ==========================================================================\r\n;(function (document, $) {\r\n\t'use strict';\r\n\r\n\tvar FancyThumbs = function( instance ) {\r\n\t\tthis.instance = instance;\r\n\t\tthis.init();\r\n\t};\r\n\r\n\t$.extend( FancyThumbs.prototype, {\r\n\r\n\t\t$button\t\t: null,\r\n\t\t$grid\t\t: null,\r\n\t\t$list\t\t: null,\r\n\t\tisVisible\t: false,\r\n\r\n\t\tinit : function() {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tvar first  = self.instance.group[0],\r\n\t\t\t\tsecond = self.instance.group[1];\r\n\r\n\t\t\tself.$button = self.instance.$refs.toolbar.find( '[data-fancybox-thumbs]' );\r\n\r\n\t\t\tif ( self.instance.group.length > 1 && self.instance.group[ self.instance.currIndex ].opts.thumbs && (\r\n\t\t    \t\t( first.type == 'image'  || first.opts.thumb  || first.opts.$thumb ) &&\r\n\t\t    \t\t( second.type == 'image' || second.opts.thumb || second.opts.$thumb )\r\n\t\t\t)) {\r\n\r\n\t\t\t\tself.$button.on('click', function() {\r\n\t\t\t\t\tself.toggle();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tself.isActive = true;\r\n\r\n\t\t\t} else {\r\n\t\t\t\tself.$button.hide();\r\n\r\n\t\t\t\tself.isActive = false;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tcreate : function() {\r\n\t\t\tvar instance = this.instance,\r\n\t\t\t\tlist,\r\n\t\t\t\tsrc;\r\n\r\n\t\t\tthis.$grid = $('<div class=\"fancybox-thumbs\"></div>').appendTo( instance.$refs.container );\r\n\r\n\t\t\tlist = '<ul>';\r\n\r\n\t\t\t$.each(instance.group, function( i, item ) {\r\n\r\n\t\t\t\tsrc = item.opts.thumb || ( item.opts.$thumb ? item.opts.$thumb.attr('src') : null );\r\n\r\n\t\t\t\tif ( !src && item.type === 'image' ) {\r\n\t\t\t\t\tsrc = item.src;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( src && src.length ) {\r\n\t\t\t\t\tlist += '<li data-index=\"' + i + '\"  tabindex=\"0\" class=\"fancybox-thumbs-loading\"><img data-src=\"' + src + '\" /></li>';\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t\tlist += '</ul>';\r\n\r\n\t\t\tthis.$list = $( list ).appendTo( this.$grid ).on('click', 'li', function() {\r\n\t\t\t\tinstance.jumpTo( $(this).data('index') );\r\n\t\t\t});\r\n\r\n\t\t\tthis.$list.find('img').hide().one('load', function() {\r\n\r\n\t\t\t\tvar $parent\t\t= $(this).parent().removeClass( 'fancybox-thumbs-loading' ),\r\n\t\t\t\t\tthumbWidth\t= $parent.outerWidth(),\r\n\t\t\t\t\tthumbHeight\t= $parent.outerHeight(),\r\n\t\t\t\t\twidth,\r\n\t\t\t\t\theight,\r\n\t\t\t\t\twidthRatio,\r\n\t\t\t\t\theightRatio;\r\n\r\n\t\t\t\twidth  = this.naturalWidth\t|| this.width;\r\n\t\t\t\theight = this.naturalHeight\t|| this.height;\r\n\r\n\t\t\t\t// Calculate thumbnail width/height and center it\r\n\r\n\t\t\t\twidthRatio  = width  / thumbWidth;\r\n\t\t\t\theightRatio = height / thumbHeight;\r\n\r\n\t\t\t\tif ( widthRatio >= 1 && heightRatio >= 1 ) {\r\n\t\t\t\t\tif (widthRatio > heightRatio) {\r\n\t\t\t\t\t\twidth  = width / heightRatio;\r\n\t\t\t\t\t\theight = thumbHeight;\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\twidth  = thumbWidth;\r\n\t\t\t\t\t\theight = height / widthRatio;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$(this).css({\r\n\t\t\t\t\twidth         : Math.floor(width),\r\n\t\t\t\t\theight        : Math.floor(height),\r\n\t\t\t\t\t'margin-top'  : Math.min( 0, Math.floor(thumbHeight * 0.3 - height * 0.3 ) ),\r\n\t\t\t\t\t'margin-left' : Math.min( 0, Math.floor(thumbWidth  * 0.5 - width  * 0.5 ) )\r\n\t\t\t\t}).show();\r\n\r\n\t\t\t})\r\n\t\t\t.each(function() {\r\n\t\t\t\tthis.src = $( this ).data( 'src' );\r\n\t\t\t});\r\n\r\n\t\t},\r\n\r\n\t\tfocus : function() {\r\n\r\n\t\t\tif ( this.instance.current ) {\r\n\t\t\t\tthis.$list\r\n\t\t\t\t\t.children()\r\n\t\t\t\t\t.removeClass( 'fancybox-thumbs-active' )\r\n\t\t\t\t\t.filter( '[data-index=\"' + this.instance.current.index  + '\"]' )\r\n\t\t\t\t\t.addClass( 'fancybox-thumbs-active' )\r\n\t\t\t\t\t.focus();\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tclose : function() {\r\n\t\t\tthis.$grid.hide();\r\n\t\t},\r\n\r\n\t\tupdate : function() {\r\n\r\n\t\t\tthis.instance.$refs.container.toggleClass( 'fancybox-show-thumbs', this.isVisible );\r\n\r\n\t\t\tif ( this.isVisible ) {\r\n\r\n\t\t\t\tif ( !this.$grid ) {\r\n\t\t\t\t\tthis.create();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.instance.trigger( 'onThumbsShow' );\r\n\r\n\t\t\t\tthis.focus();\r\n\r\n\t\t\t} else if ( this.$grid ) {\r\n\t\t\t\tthis.instance.trigger( 'onThumbsHide' );\r\n\t\t\t}\r\n\r\n\t\t\t// Update content position\r\n\t\t\tthis.instance.update();\r\n\r\n\t\t},\r\n\r\n\t\thide : function() {\r\n\t\t\tthis.isVisible = false;\r\n\t\t\tthis.update();\r\n\t\t},\r\n\r\n\t\tshow : function() {\r\n\t\t\tthis.isVisible = true;\r\n\t\t\tthis.update();\r\n\t\t},\r\n\r\n\t\ttoggle : function() {\r\n\t\t\tthis.isVisible = !this.isVisible;\r\n\t\t\tthis.update();\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t$(document).on({\r\n\r\n\t\t'onInit.fb' : function(e, instance) {\r\n\t\t\tif ( instance && !instance.Thumbs ) {\r\n\t\t\t\tinstance.Thumbs = new FancyThumbs( instance );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'beforeShow.fb' : function(e, instance, item, firstRun) {\r\n\t\t\tvar Thumbs = instance && instance.Thumbs;\r\n\r\n\t\t\tif ( !Thumbs || !Thumbs.isActive ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif ( item.modal ) {\r\n\t\t\t\tThumbs.$button.hide();\r\n\r\n\t\t\t\tThumbs.hide();\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif ( firstRun && item.opts.thumbs.autoStart === true ) {\r\n\t\t\t\tThumbs.show();\r\n\t\t\t}\r\n\r\n\t\t\tif ( Thumbs.isVisible ) {\r\n\t\t\t\tThumbs.focus();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'afterKeydown.fb' : function(e, instance, current, keypress, keycode) {\r\n\t\t\tvar Thumbs = instance && instance.Thumbs;\r\n\r\n\t\t\t// \"G\"\r\n\t\t\tif ( Thumbs && Thumbs.isActive && keycode === 71 ) {\r\n\t\t\t\tkeypress.preventDefault();\r\n\r\n\t\t\t\tThumbs.toggle();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'beforeClose.fb' : function( e, instance ) {\r\n\t\t\tvar Thumbs = instance && instance.Thumbs;\r\n\r\n\t\t\tif ( Thumbs && Thumbs.isVisible && instance.opts.thumbs.hideOnClose !== false ) {\r\n\t\t\t\tThumbs.close();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n\r\n}(document, window.jQuery));\r\n\r\n// ==========================================================================\r\n//\r\n// Hash\r\n// Enables linking to each modal\r\n//\r\n// ==========================================================================\r\n;(function (document, window, $) {\r\n\t'use strict';\r\n\r\n\t// Simple $.escapeSelector polyfill (for jQuery prior v3)\r\n\tif ( !$.escapeSelector ) {\r\n\t\t$.escapeSelector = function( sel ) {\r\n\t\t\tvar rcssescape = /([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\x80-\\uFFFF\\w-]/g;\r\n\t\t\tvar fcssescape = function( ch, asCodePoint ) {\r\n\t\t\t\tif ( asCodePoint ) {\r\n\t\t\t\t\t// U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER\r\n\t\t\t\t\tif ( ch === \"\\0\" ) {\r\n\t\t\t\t\t\treturn \"\\uFFFD\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Control characters and (dependent upon position) numbers get escaped as code points\r\n\t\t\t\t\treturn ch.slice( 0, -1 ) + \"\\\\\" + ch.charCodeAt( ch.length - 1 ).toString( 16 ) + \" \";\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Other potentially-special ASCII characters get backslash-escaped\r\n\t\t\t\treturn \"\\\\\" + ch;\r\n\t\t\t};\r\n\r\n\t\t\treturn ( sel + \"\" ).replace( rcssescape, fcssescape );\r\n\t\t};\r\n\t}\r\n\r\n\t// Create new history entry only once\r\n\tvar shouldCreateHistory = true;\r\n\r\n\t// Variable containing last hash value set by fancyBox\r\n\t// It will be used to determine if fancyBox needs to close after hash change is detected\r\n    var currentHash = null;\r\n\r\n\t// Throttling the history change\r\n\tvar timerID = null;\r\n\r\n\t// Get info about gallery name and current index from url\r\n    function parseUrl() {\r\n        var hash    = window.location.hash.substr( 1 );\r\n        var rez     = hash.split( '-' );\r\n        var index   = rez.length > 1 && /^\\+?\\d+$/.test( rez[ rez.length - 1 ] ) ? parseInt( rez.pop( -1 ), 10 ) || 1 : 1;\r\n        var gallery = rez.join( '-' );\r\n\r\n\t\t// Index is starting from 1\r\n\t\tif ( index < 1 ) {\r\n\t\t\tindex = 1;\r\n\t\t}\r\n\r\n        return {\r\n            hash    : hash,\r\n            index   : index,\r\n            gallery : gallery\r\n        };\r\n    }\r\n\r\n\t// Trigger click evnt on links to open new fancyBox instance\r\n\tfunction triggerFromUrl( url ) {\r\n\t\tvar $el;\r\n\r\n        if ( url.gallery !== '' ) {\r\n\r\n\t\t\t// If we can find element matching 'data-fancybox' atribute, then trigger click event for that ..\r\n\t\t\t$el = $( \"[data-fancybox='\" + $.escapeSelector( url.gallery ) + \"']\" ).eq( url.index - 1 );\r\n\r\n            if ( !$el.length ) {\r\n\t\t\t\t// .. if not, try finding element by ID\r\n\t\t\t\t$el = $( \"#\" + $.escapeSelector( url.gallery ) + \"\" );\r\n\t\t\t}\r\n\r\n\t\t\tif ( $el.length ) {\r\n\t\t\t\tshouldCreateHistory = false;\r\n\r\n\t\t\t\t$el.trigger( 'click' );\r\n\t\t\t}\r\n\r\n        }\r\n\t}\r\n\r\n\t// Get gallery name from current instance\r\n\tfunction getGalleryID( instance ) {\r\n\t\tvar opts;\r\n\r\n\t\tif ( !instance ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\topts = instance.current ? instance.current.opts : instance.opts;\r\n\r\n\t\treturn opts.hash || ( opts.$orig ? opts.$orig.data( 'fancybox' ) : ''  );\r\n\t}\r\n\r\n\t// Star when DOM becomes ready\r\n    $(function() {\r\n\r\n\t\t// Small delay is used to allow other scripts to process \"dom ready\" event\r\n\t\tsetTimeout(function() {\r\n\r\n\t\t\t// Check if this module is not disabled\r\n\t\t\tif ( $.fancybox.defaults.hash === false ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Update hash when opening/closing fancyBox\r\n\t\t    $(document).on({\r\n\t\t\t\t'onInit.fb' : function( e, instance ) {\r\n\t\t\t\t\tvar url, gallery;\r\n\r\n\t\t\t\t\tif ( instance.group[ instance.currIndex ].opts.hash === false ) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\turl     = parseUrl();\r\n\t\t\t\t\tgallery = getGalleryID( instance );\r\n\r\n\t\t\t\t\t// Make sure gallery start index matches index from hash\r\n\t\t\t\t\tif ( gallery && url.gallery && gallery == url.gallery ) {\r\n\t\t\t\t\t\tinstance.currIndex = url.index - 1;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\t'beforeShow.fb' : function( e, instance, current ) {\r\n\t\t\t\t\tvar gallery;\r\n\r\n\t\t\t\t\tif ( !current || current.opts.hash === false ) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t            gallery = getGalleryID( instance );\r\n\r\n\t\t            // Update window hash\r\n\t\t            if ( gallery && gallery !== '' ) {\r\n\r\n\t\t\t\t\t\tif ( window.location.hash.indexOf( gallery ) < 0 ) {\r\n\t\t\t                instance.opts.origHash = window.location.hash;\r\n\t\t\t            }\r\n\r\n\t\t\t\t\t\tcurrentHash = gallery + ( instance.group.length > 1 ? '-' + ( current.index + 1 ) : '' );\r\n\r\n\t\t\t\t\t\tif ( 'replaceState' in window.history ) {\r\n\t\t\t\t\t\t\tif ( timerID ) {\r\n\t\t\t\t\t\t\t\tclearTimeout( timerID );\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\ttimerID = setTimeout(function() {\r\n\t\t\t\t\t\t\t\twindow.history[ shouldCreateHistory ? 'pushState' : 'replaceState' ]( {} , document.title, window.location.pathname + window.location.search + '#' +  currentHash );\r\n\r\n\t\t\t\t\t\t\t\ttimerID = null;\r\n\r\n\t\t\t\t\t\t\t\tshouldCreateHistory = false;\r\n\r\n\t\t\t\t\t\t\t}, 300);\r\n\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\twindow.location.hash = currentHash;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t            }\r\n\r\n\t\t        },\r\n\r\n\t\t\t\t'beforeClose.fb' : function( e, instance, current ) {\r\n\t\t\t\t\tvar gallery, origHash;\r\n\r\n\t\t\t\t\tif ( timerID ) {\r\n\t\t\t\t\t\tclearTimeout( timerID );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( current.opts.hash === false ) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgallery  = getGalleryID( instance );\r\n\t\t\t\t\torigHash = instance && instance.opts.origHash ? instance.opts.origHash : '';\r\n\r\n\t\t            // Remove hash from location bar\r\n\t\t            if ( gallery && gallery !== '' ) {\r\n\r\n\t\t                if ( 'replaceState' in history ) {\r\n\t\t\t\t\t\t\twindow.history.replaceState( {} , document.title, window.location.pathname + window.location.search + origHash );\r\n\r\n\t\t                } else {\r\n\t\t\t\t\t\t\twindow.location.hash = origHash;\r\n\r\n\t\t\t\t\t\t\t// Keep original scroll position\r\n\t\t\t\t\t\t\t$( window ).scrollTop( instance.scrollTop ).scrollLeft( instance.scrollLeft );\r\n\t\t                }\r\n\t\t            }\r\n\r\n\t\t\t\t\tcurrentHash = null;\r\n\t\t        }\r\n\t\t    });\r\n\r\n\t\t\t// Check if need to close after url has changed\r\n\t\t\t$(window).on('hashchange.fb', function() {\r\n\t\t\t\tvar url = parseUrl();\r\n\r\n\t\t\t\tif ( $.fancybox.getInstance() ) {\r\n\t\t\t\t\tif ( currentHash && currentHash !== url.gallery + '-' + url.index && !( url.index === 1 && currentHash == url.gallery ) ) {\r\n\t\t\t\t\t\tcurrentHash = null;\r\n\r\n\t\t\t\t\t\t$.fancybox.close();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( url.gallery !== '' ) {\r\n\t\t\t\t\ttriggerFromUrl( url );\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// Check current hash and trigger click event on matching element to start fancyBox, if needed\r\n\t\t\ttriggerFromUrl( parseUrl() );\r\n\r\n\t\t}, 50);\r\n\r\n    });\r\n\r\n}(document, window, window.jQuery));\r\n","/*\r\n * jQuery Form Styler v2.0.1\r\n * https://github.com/Dimox/jQueryFormStyler\r\n *\r\n * Copyright 2012-2017 Dimox (http://dimox.name/)\r\n * Released under the MIT license.\r\n *\r\n * Date: 2017.08.29\r\n *\r\n */\r\n\r\n;(function(factory) {\r\n\tif (typeof define === 'function' && define.amd) {\r\n\t\t// AMD\r\n\t\tdefine(['jquery'], factory);\r\n\t} else if (typeof exports === 'object') {\r\n\t\t// CommonJS\r\n\t\tmodule.exports = factory($ || require('jquery'));\r\n\t} else {\r\n\t\tfactory(jQuery);\r\n\t}\r\n}(function($) {\r\n\r\n\t'use strict';\r\n\r\n\tvar pluginName = 'styler',\r\n\t\t\tdefaults = {\r\n\t\t\t\tidSuffix: '-styler',\r\n\t\t\t\tfilePlaceholder: 'Файл не выбран',\r\n\t\t\t\tfileBrowse: 'Обзор...',\r\n\t\t\t\tfileNumber: 'Выбрано файлов: %s',\r\n\t\t\t\tselectPlaceholder: 'Выберите...',\r\n\t\t\t\tselectSearch: false,\r\n\t\t\t\tselectSearchLimit: 10,\r\n\t\t\t\tselectSearchNotFound: 'Совпадений не найдено',\r\n\t\t\t\tselectSearchPlaceholder: 'Поиск...',\r\n\t\t\t\tselectVisibleOptions: 0,\r\n\t\t\t\tselectSmartPositioning: true,\r\n\t\t\t\tlocale: 'ru',\r\n\t\t\t\tlocales: {\r\n\t\t\t\t\t'en': {\r\n\t\t\t\t\t\tfilePlaceholder: 'No file selected',\r\n\t\t\t\t\t\tfileBrowse: 'Browse...',\r\n\t\t\t\t\t\tfileNumber: 'Selected files: %s',\r\n\t\t\t\t\t\tselectPlaceholder: 'Select...',\r\n\t\t\t\t\t\tselectSearchNotFound: 'No matches found',\r\n\t\t\t\t\t\tselectSearchPlaceholder: 'Search...'\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tonSelectOpened: function() {},\r\n\t\t\t\tonSelectClosed: function() {},\r\n\t\t\t\tonFormStyled: function() {}\r\n\t\t\t};\r\n\r\n\tfunction Plugin(element, options) {\r\n\t\tthis.element = element;\r\n\t\tthis.options = $.extend({}, defaults, options);\r\n\t\tvar locale = this.options.locale;\r\n\t\tif (this.options.locales[locale] !== undefined) {\r\n\t\t\t$.extend(this.options, this.options.locales[locale]);\r\n\t\t}\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tPlugin.prototype = {\r\n\r\n\t\t// инициализация\r\n\t\tinit: function() {\r\n\r\n\t\t\tvar el = $(this.element);\r\n\t\t\tvar opt = this.options;\r\n\r\n\t\t\tvar iOS = (navigator.userAgent.match(/(iPad|iPhone|iPod)/i) && !navigator.userAgent.match(/(Windows\\sPhone)/i)) ? true : false;\r\n\t\t\tvar Android = (navigator.userAgent.match(/Android/i) && !navigator.userAgent.match(/(Windows\\sPhone)/i)) ? true : false;\r\n\r\n\t\t\tfunction Attributes() {\r\n\t\t\t\tif (el.attr('id') !== undefined && el.attr('id') !== '') {\r\n\t\t\t\t\tthis.id = el.attr('id') + opt.idSuffix;\r\n\t\t\t\t}\r\n\t\t\t\tthis.title = el.attr('title');\r\n\t\t\t\tthis.classes = el.attr('class');\r\n\t\t\t\tthis.data = el.data();\r\n\t\t\t}\r\n\r\n\t\t\t// checkbox\r\n\t\t\tif (el.is(':checkbox')) {\r\n\r\n\t\t\t\tvar checkboxOutput = function() {\r\n\r\n\t\t\t\t\tvar att = new Attributes();\r\n\t\t\t\t\tvar checkbox = $('<div class=\"jq-checkbox\"><div class=\"jq-checkbox__div\"></div></div>')\r\n\t\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t\tid: att.id,\r\n\t\t\t\t\t\t\ttitle: att.title\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.addClass(att.classes)\r\n\t\t\t\t\t\t.data(att.data)\r\n\t\t\t\t\t;\r\n\r\n\t\t\t\t\tel.after(checkbox).prependTo(checkbox);\r\n\t\t\t\t\tif (el.is(':checked')) checkbox.addClass('checked');\r\n\t\t\t\t\tif (el.is(':disabled')) checkbox.addClass('disabled');\r\n\r\n\t\t\t\t\t// клик на псевдочекбокс\r\n\t\t\t\t\tcheckbox.click(function(e) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tel.triggerHandler('click');\r\n\t\t\t\t\t\tif (!checkbox.is('.disabled')) {\r\n\t\t\t\t\t\t\tif (el.is(':checked')) {\r\n\t\t\t\t\t\t\t\tel.prop('checked', false);\r\n\t\t\t\t\t\t\t\tcheckbox.removeClass('checked');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tel.prop('checked', true);\r\n\t\t\t\t\t\t\t\tcheckbox.addClass('checked');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tel.focus().change();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// клик на label\r\n\t\t\t\t\tel.closest('label').add('label[for=\"' + el.attr('id') + '\"]').on('click.styler', function(e) {\r\n\t\t\t\t\t\tif (!$(e.target).is('a') && !$(e.target).closest(checkbox).length) {\r\n\t\t\t\t\t\t\tcheckbox.triggerHandler('click');\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// переключение по Space или Enter\r\n\t\t\t\t\tel.on('change.styler', function() {\r\n\t\t\t\t\t\tif (el.is(':checked')) checkbox.addClass('checked');\r\n\t\t\t\t\t\telse checkbox.removeClass('checked');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// чтобы переключался чекбокс, который находится в теге label\r\n\t\t\t\t\t.on('keydown.styler', function(e) {\r\n\t\t\t\t\t\tif (e.which == 32) checkbox.click();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('focus.styler', function() {\r\n\t\t\t\t\t\tif (!checkbox.is('.disabled')) checkbox.addClass('focused');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('blur.styler', function() {\r\n\t\t\t\t\t\tcheckbox.removeClass('focused');\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}; // end checkboxOutput()\r\n\r\n\t\t\t\tcheckboxOutput();\r\n\r\n\t\t\t\t// обновление при динамическом изменении\r\n\t\t\t\tel.on('refresh', function() {\r\n\t\t\t\t\tel.closest('label').add('label[for=\"' + el.attr('id') + '\"]').off('.styler');\r\n\t\t\t\t\tel.off('.styler').parent().before(el).remove();\r\n\t\t\t\t\tcheckboxOutput();\r\n\t\t\t\t});\r\n\r\n\t\t\t// end checkbox\r\n\r\n\t\t\t// radio\r\n\t\t\t} else if (el.is(':radio')) {\r\n\r\n\t\t\t\tvar radioOutput = function() {\r\n\r\n\t\t\t\t\tvar att = new Attributes();\r\n\t\t\t\t\tvar radio = $('<div class=\"jq-radio\"><div class=\"jq-radio__div\"></div></div>')\r\n\t\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t\tid: att.id,\r\n\t\t\t\t\t\t\ttitle: att.title\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.addClass(att.classes)\r\n\t\t\t\t\t\t.data(att.data)\r\n\t\t\t\t\t;\r\n\r\n\t\t\t\t\tel.after(radio).prependTo(radio);\r\n\t\t\t\t\tif (el.is(':checked')) radio.addClass('checked');\r\n\t\t\t\t\tif (el.is(':disabled')) radio.addClass('disabled');\r\n\r\n\t\t\t\t\t// определяем общего родителя у радиокнопок с одинаковым name\r\n\t\t\t\t\t// http://stackoverflow.com/a/27733847\r\n\t\t\t\t\t$.fn.commonParents = function() {\r\n\t\t\t\t\t\tvar cachedThis = this;\r\n\t\t\t\t\t\treturn cachedThis.first().parents().filter(function() {\r\n\t\t\t\t\t\t\treturn $(this).find(cachedThis).length === cachedThis.length;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\t\t\t\t\t$.fn.commonParent = function() {\r\n\t\t\t\t\t\treturn $(this).commonParents().first();\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t// клик на псевдорадиокнопке\r\n\t\t\t\t\tradio.click(function(e) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tel.triggerHandler('click');\r\n\t\t\t\t\t\tif (!radio.is('.disabled')) {\r\n\t\t\t\t\t\t\tvar inputName = $('input[name=\"' + el.attr('name') + '\"]');\r\n\t\t\t\t\t\t\tinputName.commonParent().find(inputName).prop('checked', false).parent().removeClass('checked');\r\n\t\t\t\t\t\t\tel.prop('checked', true).parent().addClass('checked');\r\n\t\t\t\t\t\t\tel.focus().change();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// клик на label\r\n\t\t\t\t\tel.closest('label').add('label[for=\"' + el.attr('id') + '\"]').on('click.styler', function(e) {\r\n\t\t\t\t\t\tif (!$(e.target).is('a') && !$(e.target).closest(radio).length) {\r\n\t\t\t\t\t\t\tradio.triggerHandler('click');\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// переключение стрелками\r\n\t\t\t\t\tel.on('change.styler', function() {\r\n\t\t\t\t\t\tel.parent().addClass('checked');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('focus.styler', function() {\r\n\t\t\t\t\t\tif (!radio.is('.disabled')) radio.addClass('focused');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('blur.styler', function() {\r\n\t\t\t\t\t\tradio.removeClass('focused');\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}; // end radioOutput()\r\n\r\n\t\t\t\tradioOutput();\r\n\r\n\t\t\t\t// обновление при динамическом изменении\r\n\t\t\t\tel.on('refresh', function() {\r\n\t\t\t\t\tel.closest('label').add('label[for=\"' + el.attr('id') + '\"]').off('.styler');\r\n\t\t\t\t\tel.off('.styler').parent().before(el).remove();\r\n\t\t\t\t\tradioOutput();\r\n\t\t\t\t});\r\n\r\n\t\t\t// end radio\r\n\r\n\t\t\t// file\r\n\t\t\t} else if (el.is(':file')) {\r\n\r\n\t\t\t\tvar fileOutput = function() {\r\n\r\n\t\t\t\t\tvar att = new Attributes();\r\n\t\t\t\t\tvar placeholder = el.data('placeholder');\r\n\t\t\t\t\tif (placeholder === undefined) placeholder = opt.filePlaceholder;\r\n\t\t\t\t\tvar browse = el.data('browse');\r\n\t\t\t\t\tif (browse === undefined || browse === '') browse = opt.fileBrowse;\r\n\r\n\t\t\t\t\tvar file =\r\n\t\t\t\t\t\t$('<div class=\"jq-file\">' +\r\n\t\t\t\t\t\t\t\t'<div class=\"jq-file__name\">' + placeholder + '</div>' +\r\n\t\t\t\t\t\t\t\t'<div class=\"jq-file__browse\">' + browse + '</div>' +\r\n\t\t\t\t\t\t\t'</div>')\r\n\t\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t\tid: att.id,\r\n\t\t\t\t\t\t\ttitle: att.title\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.addClass(att.classes)\r\n\t\t\t\t\t\t.data(att.data)\r\n\t\t\t\t\t;\r\n\r\n\t\t\t\t\tel.after(file).appendTo(file);\r\n\t\t\t\t\tif (el.is(':disabled')) file.addClass('disabled');\r\n\r\n\t\t\t\t\tvar value = el.val();\r\n\t\t\t\t\tvar name = $('div.jq-file__name', file);\r\n\r\n\t\t\t\t\t// чтобы при динамическом изменении имя файла не сбрасывалось\r\n\t\t\t\t\tif (value) name.text(value.replace(/.+[\\\\\\/]/, ''));\r\n\r\n\t\t\t\t\tel.on('change.styler', function() {\r\n\t\t\t\t\t\tvar value = el.val();\r\n\t\t\t\t\t\tif (el.is('[multiple]')) {\r\n\t\t\t\t\t\t\tvalue = '';\r\n\t\t\t\t\t\t\tvar files = el[0].files.length;\r\n\t\t\t\t\t\t\tif (files > 0) {\r\n\t\t\t\t\t\t\t\tvar number = el.data('number');\r\n\t\t\t\t\t\t\t\tif (number === undefined) number = opt.fileNumber;\r\n\t\t\t\t\t\t\t\tnumber = number.replace('%s', files);\r\n\t\t\t\t\t\t\t\tvalue = number;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tname.text(value.replace(/.+[\\\\\\/]/, ''));\r\n\t\t\t\t\t\tif (value === '') {\r\n\t\t\t\t\t\t\tname.text(placeholder);\r\n\t\t\t\t\t\t\tfile.removeClass('changed');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfile.addClass('changed');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('focus.styler', function() {\r\n\t\t\t\t\t\tfile.addClass('focused');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('blur.styler', function() {\r\n\t\t\t\t\t\tfile.removeClass('focused');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('click.styler', function() {\r\n\t\t\t\t\t\tfile.removeClass('focused');\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}; // end fileOutput()\r\n\r\n\t\t\t\tfileOutput();\r\n\r\n\t\t\t\t// обновление при динамическом изменении\r\n\t\t\t\tel.on('refresh', function() {\r\n\t\t\t\t\tel.off('.styler').parent().before(el).remove();\r\n\t\t\t\t\tfileOutput();\r\n\t\t\t\t});\r\n\r\n\t\t\t// end file\r\n\r\n\t\t\t// number\r\n\t\t\t} else if (el.is('input[type=\"number\"]')) {\r\n\r\n\t\t\t\tvar numberOutput = function() {\r\n\r\n\t\t\t\t\tvar att = new Attributes();\r\n\t\t\t\t\tvar number =\r\n\t\t\t\t\t\t$('<div class=\"jq-number\">' +\r\n\t\t\t\t\t\t\t\t'<div class=\"jq-number__spin minus\"></div>' +\r\n\t\t\t\t\t\t\t\t'<div class=\"jq-number__spin plus\"></div>' +\r\n\t\t\t\t\t\t\t'</div>')\r\n\t\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t\tid: att.id,\r\n\t\t\t\t\t\t\ttitle: att.title\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.addClass(att.classes)\r\n\t\t\t\t\t\t.data(att.data)\r\n\t\t\t\t\t;\r\n\r\n\t\t\t\t\tel.after(number).prependTo(number).wrap('<div class=\"jq-number__field\"></div>');\r\n\t\t\t\t\tif (el.is(':disabled')) number.addClass('disabled');\r\n\r\n\t\t\t\t\tvar min,\r\n\t\t\t\t\t\t\tmax,\r\n\t\t\t\t\t\t\tstep,\r\n\t\t\t\t\t\t\ttimeout = null,\r\n\t\t\t\t\t\t\tinterval = null;\r\n\t\t\t\t\tif (el.attr('min') !== undefined) min = el.attr('min');\r\n\t\t\t\t\tif (el.attr('max') !== undefined) max = el.attr('max');\r\n\t\t\t\t\tif (el.attr('step') !== undefined && $.isNumeric(el.attr('step')))\r\n\t\t\t\t\t\tstep = Number(el.attr('step'));\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tstep = Number(1);\r\n\r\n\t\t\t\t\tvar changeValue = function(spin) {\r\n\t\t\t\t\t\tvar value = el.val(),\r\n\t\t\t\t\t\t\t\tnewValue;\r\n\r\n\t\t\t\t\t\tif (!$.isNumeric(value)) {\r\n\t\t\t\t\t\t\tvalue = 0;\r\n\t\t\t\t\t\t\tel.val('0');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (spin.is('.minus')) {\r\n\t\t\t\t\t\t\tnewValue = Number(value) - step;\r\n\t\t\t\t\t\t} else if (spin.is('.plus')) {\r\n\t\t\t\t\t\t\tnewValue = Number(value) + step;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// определяем количество десятичных знаков после запятой в step\r\n\t\t\t\t\t\tvar decimals = (step.toString().split('.')[1] || []).length;\r\n\t\t\t\t\t\tif (decimals > 0) {\r\n\t\t\t\t\t\t\tvar multiplier = '1';\r\n\t\t\t\t\t\t\twhile (multiplier.length <= decimals) multiplier = multiplier + '0';\r\n\t\t\t\t\t\t\t// избегаем появления лишних знаков после запятой\r\n\t\t\t\t\t\t\tnewValue = Math.round(newValue * multiplier) / multiplier;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ($.isNumeric(min) && $.isNumeric(max)) {\r\n\t\t\t\t\t\t\tif (newValue >= min && newValue <= max) el.val(newValue);\r\n\t\t\t\t\t\t} else if ($.isNumeric(min) && !$.isNumeric(max)) {\r\n\t\t\t\t\t\t\tif (newValue >= min) el.val(newValue);\r\n\t\t\t\t\t\t} else if (!$.isNumeric(min) && $.isNumeric(max)) {\r\n\t\t\t\t\t\t\tif (newValue <= max) el.val(newValue);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tel.val(newValue);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif (!number.is('.disabled')) {\r\n\t\t\t\t\t\tnumber.on('mousedown', 'div.jq-number__spin', function() {\r\n\t\t\t\t\t\t\tvar spin = $(this);\r\n\t\t\t\t\t\t\tchangeValue(spin);\r\n\t\t\t\t\t\t\ttimeout = setTimeout(function(){\r\n\t\t\t\t\t\t\t\tinterval = setInterval(function(){ changeValue(spin); }, 40);\r\n\t\t\t\t\t\t\t}, 350);\r\n\t\t\t\t\t\t}).on('mouseup mouseout', 'div.jq-number__spin', function() {\r\n\t\t\t\t\t\t\tclearTimeout(timeout);\r\n\t\t\t\t\t\t\tclearInterval(interval);\r\n\t\t\t\t\t\t}).on('mouseup', 'div.jq-number__spin', function() {\r\n\t\t\t\t\t\t\tel.change().trigger('input');\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tel.on('focus.styler', function() {\r\n\t\t\t\t\t\t\tnumber.addClass('focused');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on('blur.styler', function() {\r\n\t\t\t\t\t\t\tnumber.removeClass('focused');\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}; // end numberOutput()\r\n\r\n\t\t\t\tnumberOutput();\r\n\r\n\t\t\t\t// обновление при динамическом изменении\r\n\t\t\t\tel.on('refresh', function() {\r\n\t\t\t\t\tel.off('.styler').closest('.jq-number').before(el).remove();\r\n\t\t\t\t\tnumberOutput();\r\n\t\t\t\t});\r\n\r\n\t\t\t// end number\r\n\r\n\t\t\t// select\r\n\t\t\t} else if (el.is('select')) {\r\n\r\n\t\t\t\tvar selectboxOutput = function() {\r\n\r\n\t\t\t\t\t// запрещаем прокрутку страницы при прокрутке селекта\r\n\t\t\t\t\tfunction preventScrolling(selector) {\r\n\r\n\t\t\t\t\t\tvar scrollDiff = selector.prop('scrollHeight') - selector.outerHeight(),\r\n\t\t\t\t\t\t\t\twheelDelta = null,\r\n\t\t\t\t\t\t\t\tscrollTop = null;\r\n\r\n\t\t\t\t\t\tselector.off('mousewheel DOMMouseScroll').on('mousewheel DOMMouseScroll', function(e) {\r\n\r\n\t\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t\t * нормализация направления прокрутки\r\n\t\t\t\t\t\t\t * (firefox < 0 || chrome etc... > 0)\r\n\t\t\t\t\t\t\t * (e.originalEvent.detail < 0 || e.originalEvent.wheelDelta > 0)\r\n\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\twheelDelta = (e.originalEvent.detail < 0 || e.originalEvent.wheelDelta > 0) ? 1 : -1; // направление прокрутки (-1 вниз, 1 вверх)\r\n\t\t\t\t\t\t\tscrollTop = selector.scrollTop(); // позиция скролла\r\n\r\n\t\t\t\t\t\t\tif ((scrollTop >= scrollDiff && wheelDelta < 0) || (scrollTop <= 0 && wheelDelta > 0)) {\r\n\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar option = $('option', el);\r\n\t\t\t\t\tvar list = '';\r\n\t\t\t\t\t// формируем список селекта\r\n\t\t\t\t\tfunction makeList() {\r\n\t\t\t\t\t\tfor (var i = 0; i < option.length; i++) {\r\n\t\t\t\t\t\t\tvar op = option.eq(i);\r\n\t\t\t\t\t\t\tvar li = '',\r\n\t\t\t\t\t\t\t\t\tliClass = '',\r\n\t\t\t\t\t\t\t\t\tliClasses = '',\r\n\t\t\t\t\t\t\t\t\tid = '',\r\n\t\t\t\t\t\t\t\t\ttitle = '',\r\n\t\t\t\t\t\t\t\t\tdataList = '',\r\n\t\t\t\t\t\t\t\t\toptionClass = '',\r\n\t\t\t\t\t\t\t\t\toptgroupClass = '',\r\n\t\t\t\t\t\t\t\t\tdataJqfsClass = '';\r\n\t\t\t\t\t\t\tvar disabled = 'disabled';\r\n\t\t\t\t\t\t\tvar selDis = 'selected sel disabled';\r\n\t\t\t\t\t\t\tif (op.prop('selected')) liClass = 'selected sel';\r\n\t\t\t\t\t\t\tif (op.is(':disabled')) liClass = disabled;\r\n\t\t\t\t\t\t\tif (op.is(':selected:disabled')) liClass = selDis;\r\n\t\t\t\t\t\t\tif (op.attr('id') !== undefined && op.attr('id') !== '') id = ' id=\"' + op.attr('id') + opt.idSuffix + '\"';\r\n\t\t\t\t\t\t\tif (op.attr('title') !== undefined && option.attr('title') !== '') title = ' title=\"' + op.attr('title') + '\"';\r\n\t\t\t\t\t\t\tif (op.attr('class') !== undefined) {\r\n\t\t\t\t\t\t\t\toptionClass = ' ' + op.attr('class');\r\n\t\t\t\t\t\t\t\tdataJqfsClass = ' data-jqfs-class=\"' + op.attr('class') + '\"';\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar data = op.data();\r\n\t\t\t\t\t\t\tfor (var k in data) {\r\n\t\t\t\t\t\t\t\tif (data[k] !== '') dataList += ' data-' + k + '=\"' + data[k] + '\"';\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ( (liClass + optionClass) !== '' )   liClasses = ' class=\"' + liClass + optionClass + '\"';\r\n\t\t\t\t\t\t\tli = '<li' + dataJqfsClass + dataList + liClasses + title + id + '>'+ op.html() +'</li>';\r\n\r\n\t\t\t\t\t\t\t// если есть optgroup\r\n\t\t\t\t\t\t\tif (op.parent().is('optgroup')) {\r\n\t\t\t\t\t\t\t\tif (op.parent().attr('class') !== undefined) optgroupClass = ' ' + op.parent().attr('class');\r\n\t\t\t\t\t\t\t\tli = '<li' + dataJqfsClass + dataList + ' class=\"' + liClass + optionClass + ' option' + optgroupClass + '\"' + title + id + '>'+ op.html() +'</li>';\r\n\t\t\t\t\t\t\t\tif (op.is(':first-child')) {\r\n\t\t\t\t\t\t\t\t\tli = '<li class=\"optgroup' + optgroupClass + '\">' + op.parent().attr('label') + '</li>' + li;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tlist += li;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} // end makeList()\r\n\r\n\t\t\t\t\t// одиночный селект\r\n\t\t\t\t\tfunction doSelect() {\r\n\r\n\t\t\t\t\t\tvar att = new Attributes();\r\n\t\t\t\t\t\tvar searchHTML = '';\r\n\t\t\t\t\t\tvar selectPlaceholder = el.data('placeholder');\r\n\t\t\t\t\t\tvar selectSearch = el.data('search');\r\n\t\t\t\t\t\tvar selectSearchLimit = el.data('search-limit');\r\n\t\t\t\t\t\tvar selectSearchNotFound = el.data('search-not-found');\r\n\t\t\t\t\t\tvar selectSearchPlaceholder = el.data('search-placeholder');\r\n\t\t\t\t\t\tvar selectSmartPositioning = el.data('smart-positioning');\r\n\r\n\t\t\t\t\t\tif (selectPlaceholder === undefined) selectPlaceholder = opt.selectPlaceholder;\r\n\t\t\t\t\t\tif (selectSearch === undefined || selectSearch === '') selectSearch = opt.selectSearch;\r\n\t\t\t\t\t\tif (selectSearchLimit === undefined || selectSearchLimit === '') selectSearchLimit = opt.selectSearchLimit;\r\n\t\t\t\t\t\tif (selectSearchNotFound === undefined || selectSearchNotFound === '') selectSearchNotFound = opt.selectSearchNotFound;\r\n\t\t\t\t\t\tif (selectSearchPlaceholder === undefined) selectSearchPlaceholder = opt.selectSearchPlaceholder;\r\n\t\t\t\t\t\tif (selectSmartPositioning === undefined || selectSmartPositioning === '') selectSmartPositioning = opt.selectSmartPositioning;\r\n\r\n\t\t\t\t\t\tvar selectbox =\r\n\t\t\t\t\t\t\t$('<div class=\"jq-selectbox jqselect\">' +\r\n\t\t\t\t\t\t\t\t\t'<div class=\"jq-selectbox__select\">' +\r\n\t\t\t\t\t\t\t\t\t\t'<div class=\"jq-selectbox__select-text\"></div>' +\r\n\t\t\t\t\t\t\t\t\t\t'<div class=\"jq-selectbox__trigger\">' +\r\n\t\t\t\t\t\t\t\t\t\t\t'<div class=\"jq-selectbox__trigger-arrow\"></div></div>' +\r\n\t\t\t\t\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t\t\t\t'</div>')\r\n\t\t\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t\t\tid: att.id,\r\n\t\t\t\t\t\t\t\ttitle: att.title\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.addClass(att.classes)\r\n\t\t\t\t\t\t\t.data(att.data)\r\n\t\t\t\t\t\t;\r\n\r\n\t\t\t\t\t\tel.after(selectbox).prependTo(selectbox);\r\n\r\n\t\t\t\t\t\tvar selectzIndex = selectbox.css('z-index');\r\n\t\t\t\t\t\tselectzIndex = (selectzIndex > 0 ) ? selectzIndex : 1;\r\n\t\t\t\t\t\tvar divSelect = $('div.jq-selectbox__select', selectbox);\r\n\t\t\t\t\t\tvar divText = $('div.jq-selectbox__select-text', selectbox);\r\n\t\t\t\t\t\tvar optionSelected = option.filter(':selected');\r\n\r\n\t\t\t\t\t\tmakeList();\r\n\r\n\t\t\t\t\t\tif (selectSearch) searchHTML =\r\n\t\t\t\t\t\t\t'<div class=\"jq-selectbox__search\"><input type=\"search\" autocomplete=\"off\" placeholder=\"' + selectSearchPlaceholder + '\"></div>' +\r\n\t\t\t\t\t\t\t'<div class=\"jq-selectbox__not-found\">' + selectSearchNotFound + '</div>';\r\n\t\t\t\t\t\tvar dropdown =\r\n\t\t\t\t\t\t\t$('<div class=\"jq-selectbox__dropdown\">' +\r\n\t\t\t\t\t\t\t\t\tsearchHTML + '<ul>' + list + '</ul>' +\r\n\t\t\t\t\t\t\t\t'</div>');\r\n\t\t\t\t\t\tselectbox.append(dropdown);\r\n\t\t\t\t\t\tvar ul = $('ul', dropdown);\r\n\t\t\t\t\t\tvar li = $('li', dropdown);\r\n\t\t\t\t\t\tvar search = $('input', dropdown);\r\n\t\t\t\t\t\tvar notFound = $('div.jq-selectbox__not-found', dropdown).hide();\r\n\t\t\t\t\t\tif (li.length < selectSearchLimit) search.parent().hide();\r\n\r\n\t\t\t\t\t\t// показываем опцию по умолчанию\r\n\t\t\t\t\t\t// если у 1-й опции нет текста, она выбрана по умолчанию и параметр selectPlaceholder не false, то показываем плейсхолдер\r\n\t\t\t\t\t\tif (option.first().text() === '' && option.first().is(':selected') && selectPlaceholder !== false) {\r\n\t\t\t\t\t\t\tdivText.text(selectPlaceholder).addClass('placeholder');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tdivText.text(optionSelected.text());\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// определяем самый широкий пункт селекта\r\n\t\t\t\t\t\tvar liWidthInner = 0,\r\n\t\t\t\t\t\t\t\tliWidth = 0;\r\n\t\t\t\t\t\tli.css({'display': 'inline-block'});\r\n\t\t\t\t\t\tli.each(function() {\r\n\t\t\t\t\t\t\tvar l = $(this);\r\n\t\t\t\t\t\t\tif (l.innerWidth() > liWidthInner) {\r\n\t\t\t\t\t\t\t\tliWidthInner = l.innerWidth();\r\n\t\t\t\t\t\t\t\tliWidth = l.width();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tli.css({'display': ''});\r\n\r\n\t\t\t\t\t\t// подстраиваем ширину свернутого селекта в зависимости\r\n\t\t\t\t\t\t// от ширины плейсхолдера или самого широкого пункта\r\n\t\t\t\t\t\tif (divText.is('.placeholder') && (divText.width() > liWidthInner)) {\r\n\t\t\t\t\t\t\tdivText.width(divText.width());\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar selClone = selectbox.clone().appendTo('body').width('auto');\r\n\t\t\t\t\t\t\tvar selCloneWidth = selClone.outerWidth();\r\n\t\t\t\t\t\t\tselClone.remove();\r\n\t\t\t\t\t\t\tif (selCloneWidth == selectbox.outerWidth()) {\r\n\t\t\t\t\t\t\t\tdivText.width(liWidth);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// подстраиваем ширину выпадающего списка в зависимости от самого широкого пункта\r\n\t\t\t\t\t\tif (liWidthInner > selectbox.width()) dropdown.width(liWidthInner);\r\n\r\n\t\t\t\t\t\t// прячем 1-ю пустую опцию, если она есть и если атрибут data-placeholder не пустой\r\n\t\t\t\t\t\t// если все же нужно, чтобы первая пустая опция отображалась, то указываем у селекта: data-placeholder=\"\"\r\n\t\t\t\t\t\tif (option.first().text() === '' && el.data('placeholder') !== '') {\r\n\t\t\t\t\t\t\tli.first().hide();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar selectHeight = selectbox.outerHeight(true);\r\n\t\t\t\t\t\tvar searchHeight = search.parent().outerHeight(true) || 0;\r\n\t\t\t\t\t\tvar isMaxHeight = ul.css('max-height');\r\n\t\t\t\t\t\tvar liSelected = li.filter('.selected');\r\n\t\t\t\t\t\tif (liSelected.length < 1) li.first().addClass('selected sel');\r\n\t\t\t\t\t\tif (li.data('li-height') === undefined) {\r\n\t\t\t\t\t\t\tvar liOuterHeight = li.outerHeight();\r\n\t\t\t\t\t\t\tif (selectPlaceholder !== false) liOuterHeight = li.eq(1).outerHeight();\r\n\t\t\t\t\t\t\tli.data('li-height', liOuterHeight);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar position = dropdown.css('top');\r\n\t\t\t\t\t\tif (dropdown.css('left') == 'auto') dropdown.css({left: 0});\r\n\t\t\t\t\t\tif (dropdown.css('top') == 'auto') {\r\n\t\t\t\t\t\t\tdropdown.css({top: selectHeight});\r\n\t\t\t\t\t\t\tposition = selectHeight;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdropdown.hide();\r\n\r\n\t\t\t\t\t\t// если выбран не дефолтный пункт\r\n\t\t\t\t\t\tif (liSelected.length) {\r\n\t\t\t\t\t\t\t// добавляем класс, показывающий изменение селекта\r\n\t\t\t\t\t\t\tif (option.first().text() != optionSelected.text()) {\r\n\t\t\t\t\t\t\t\tselectbox.addClass('changed');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// передаем селекту класс выбранного пункта\r\n\t\t\t\t\t\t\tselectbox.data('jqfs-class', liSelected.data('jqfs-class'));\r\n\t\t\t\t\t\t\tselectbox.addClass(liSelected.data('jqfs-class'));\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// если селект неактивный\r\n\t\t\t\t\t\tif (el.is(':disabled')) {\r\n\t\t\t\t\t\t\tselectbox.addClass('disabled');\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// при клике на псевдоселекте\r\n\t\t\t\t\t\tdivSelect.click(function() {\r\n\r\n\t\t\t\t\t\t\t// колбек при закрытии селекта\r\n\t\t\t\t\t\t\tif ($('div.jq-selectbox').filter('.opened').length) {\r\n\t\t\t\t\t\t\t\topt.onSelectClosed.call($('div.jq-selectbox').filter('.opened'));\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tel.focus();\r\n\r\n\t\t\t\t\t\t\t// если iOS, то не показываем выпадающий список,\r\n\t\t\t\t\t\t\t// т.к. отображается нативный и неизвестно, как его спрятать\r\n\t\t\t\t\t\t\tif (iOS) return;\r\n\r\n\t\t\t\t\t\t\t// умное позиционирование\r\n\t\t\t\t\t\t\tvar win = $(window);\r\n\t\t\t\t\t\t\tvar liHeight = li.data('li-height');\r\n\t\t\t\t\t\t\tvar topOffset = selectbox.offset().top;\r\n\t\t\t\t\t\t\tvar bottomOffset = win.height() - selectHeight - (topOffset - win.scrollTop());\r\n\t\t\t\t\t\t\tvar visible = el.data('visible-options');\r\n\t\t\t\t\t\t\tif (visible === undefined || visible === '') visible = opt.selectVisibleOptions;\r\n\t\t\t\t\t\t\tvar minHeight = liHeight * 5;\r\n\t\t\t\t\t\t\tvar newHeight = liHeight * visible;\r\n\t\t\t\t\t\t\tif (visible > 0 && visible < 6) minHeight = newHeight;\r\n\t\t\t\t\t\t\tif (visible === 0) newHeight = 'auto';\r\n\r\n\t\t\t\t\t\t\tvar dropDown = function() {\r\n\t\t\t\t\t\t\t\tdropdown.height('auto').css({bottom: 'auto', top: position});\r\n\t\t\t\t\t\t\t\tvar maxHeightBottom = function() {\r\n\t\t\t\t\t\t\t\t\tul.css('max-height', Math.floor((bottomOffset - 20 - searchHeight) / liHeight) * liHeight);\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tmaxHeightBottom();\r\n\t\t\t\t\t\t\t\tul.css('max-height', newHeight);\r\n\t\t\t\t\t\t\t\tif (isMaxHeight != 'none') {\r\n\t\t\t\t\t\t\t\t\tul.css('max-height', isMaxHeight);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (bottomOffset < (dropdown.outerHeight() + 20)) {\r\n\t\t\t\t\t\t\t\t\tmaxHeightBottom();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\tvar dropUp = function() {\r\n\t\t\t\t\t\t\t\tdropdown.height('auto').css({top: 'auto', bottom: position});\r\n\t\t\t\t\t\t\t\tvar maxHeightTop = function() {\r\n\t\t\t\t\t\t\t\t\tul.css('max-height', Math.floor((topOffset - win.scrollTop() - 20 - searchHeight) / liHeight) * liHeight);\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tmaxHeightTop();\r\n\t\t\t\t\t\t\t\tul.css('max-height', newHeight);\r\n\t\t\t\t\t\t\t\tif (isMaxHeight != 'none') {\r\n\t\t\t\t\t\t\t\t\tul.css('max-height', isMaxHeight);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif ((topOffset - win.scrollTop() - 20) < (dropdown.outerHeight() + 20)) {\r\n\t\t\t\t\t\t\t\t\tmaxHeightTop();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\tif (selectSmartPositioning === true || selectSmartPositioning === 1) {\r\n\t\t\t\t\t\t\t\t// раскрытие вниз\r\n\t\t\t\t\t\t\t\tif (bottomOffset > (minHeight + searchHeight + 20)) {\r\n\t\t\t\t\t\t\t\t\tdropDown();\r\n\t\t\t\t\t\t\t\t\tselectbox.removeClass('dropup').addClass('dropdown');\r\n\t\t\t\t\t\t\t\t// раскрытие вверх\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tdropUp();\r\n\t\t\t\t\t\t\t\t\tselectbox.removeClass('dropdown').addClass('dropup');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if (selectSmartPositioning === false || selectSmartPositioning === 0) {\r\n\t\t\t\t\t\t\t\t// раскрытие вниз\r\n\t\t\t\t\t\t\t\tif (bottomOffset > (minHeight + searchHeight + 20)) {\r\n\t\t\t\t\t\t\t\t\tdropDown();\r\n\t\t\t\t\t\t\t\t\tselectbox.removeClass('dropup').addClass('dropdown');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t// если умное позиционирование отключено\r\n\t\t\t\t\t\t\t\tdropdown.height('auto').css({bottom: 'auto', top: position});\r\n\t\t\t\t\t\t\t\tul.css('max-height', newHeight);\r\n\t\t\t\t\t\t\t\tif (isMaxHeight != 'none') {\r\n\t\t\t\t\t\t\t\t\tul.css('max-height', isMaxHeight);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// если выпадающий список выходит за правый край окна браузера,\r\n\t\t\t\t\t\t\t// то меняем позиционирование с левого на правое\r\n\t\t\t\t\t\t\tif (selectbox.offset().left + dropdown.outerWidth() > win.width()) {\r\n\t\t\t\t\t\t\t\tdropdown.css({left: 'auto', right: 0});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// конец умного позиционирования\r\n\r\n\t\t\t\t\t\t\t$('div.jqselect').css({zIndex: (selectzIndex - 1)}).removeClass('opened');\r\n\t\t\t\t\t\t\tselectbox.css({zIndex: selectzIndex});\r\n\t\t\t\t\t\t\tif (dropdown.is(':hidden')) {\r\n\t\t\t\t\t\t\t\t$('div.jq-selectbox__dropdown:visible').hide();\r\n\t\t\t\t\t\t\t\tdropdown.show();\r\n\t\t\t\t\t\t\t\tselectbox.addClass('opened focused');\r\n\t\t\t\t\t\t\t\t// колбек при открытии селекта\r\n\t\t\t\t\t\t\t\topt.onSelectOpened.call(selectbox);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdropdown.hide();\r\n\t\t\t\t\t\t\t\tselectbox.removeClass('opened dropup dropdown');\r\n\t\t\t\t\t\t\t\t// колбек при закрытии селекта\r\n\t\t\t\t\t\t\t\tif ($('div.jq-selectbox').filter('.opened').length) {\r\n\t\t\t\t\t\t\t\t\topt.onSelectClosed.call(selectbox);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// поисковое поле\r\n\t\t\t\t\t\t\tif (search.length) {\r\n\t\t\t\t\t\t\t\tsearch.val('').keyup();\r\n\t\t\t\t\t\t\t\tnotFound.hide();\r\n\t\t\t\t\t\t\t\tsearch.keyup(function() {\r\n\t\t\t\t\t\t\t\t\tvar query = $(this).val();\r\n\t\t\t\t\t\t\t\t\tli.each(function() {\r\n\t\t\t\t\t\t\t\t\t\tif (!$(this).html().match(new RegExp('.*?' + query + '.*?', 'i'))) {\r\n\t\t\t\t\t\t\t\t\t\t\t$(this).hide();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t$(this).show();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t// прячем 1-ю пустую опцию\r\n\t\t\t\t\t\t\t\t\tif (option.first().text() === '' && el.data('placeholder') !== '') {\r\n\t\t\t\t\t\t\t\t\t\tli.first().hide();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (li.filter(':visible').length < 1) {\r\n\t\t\t\t\t\t\t\t\t\tnotFound.show();\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tnotFound.hide();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// прокручиваем до выбранного пункта при открытии списка\r\n\t\t\t\t\t\t\tif (li.filter('.selected').length) {\r\n\t\t\t\t\t\t\t\tif (el.val() === '') {\r\n\t\t\t\t\t\t\t\t\tul.scrollTop(0);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t// если нечетное количество видимых пунктов,\r\n\t\t\t\t\t\t\t\t\t// то высоту пункта делим пополам для последующего расчета\r\n\t\t\t\t\t\t\t\t\tif ( (ul.innerHeight() / liHeight) % 2 !== 0 ) liHeight = liHeight / 2;\r\n\t\t\t\t\t\t\t\t\tul.scrollTop(ul.scrollTop() + li.filter('.selected').position().top - ul.innerHeight() / 2 + liHeight);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tpreventScrolling(ul);\r\n\r\n\t\t\t\t\t\t}); // end divSelect.click()\r\n\r\n\t\t\t\t\t\t// при наведении курсора на пункт списка\r\n\t\t\t\t\t\tli.hover(function() {\r\n\t\t\t\t\t\t\t$(this).siblings().removeClass('selected');\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tvar selectedText = li.filter('.selected').text();\r\n\r\n\t\t\t\t\t\t// при клике на пункт списка\r\n\t\t\t\t\t\tli.filter(':not(.disabled):not(.optgroup)').click(function() {\r\n\t\t\t\t\t\t\tel.focus();\r\n\t\t\t\t\t\t\tvar t = $(this);\r\n\t\t\t\t\t\t\tvar liText = t.text();\r\n\t\t\t\t\t\t\tif (!t.is('.selected')) {\r\n\t\t\t\t\t\t\t\tvar index = t.index();\r\n\t\t\t\t\t\t\t\tindex -= t.prevAll('.optgroup').length;\r\n\t\t\t\t\t\t\t\tt.addClass('selected sel').siblings().removeClass('selected sel');\r\n\t\t\t\t\t\t\t\toption.prop('selected', false).eq(index).prop('selected', true);\r\n\t\t\t\t\t\t\t\tselectedText = liText;\r\n\t\t\t\t\t\t\t\tdivText.text(liText);\r\n\r\n\t\t\t\t\t\t\t\t// передаем селекту класс выбранного пункта\r\n\t\t\t\t\t\t\t\tif (selectbox.data('jqfs-class')) selectbox.removeClass(selectbox.data('jqfs-class'));\r\n\t\t\t\t\t\t\t\tselectbox.data('jqfs-class', t.data('jqfs-class'));\r\n\t\t\t\t\t\t\t\tselectbox.addClass(t.data('jqfs-class'));\r\n\r\n\t\t\t\t\t\t\t\tel.change();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdropdown.hide();\r\n\t\t\t\t\t\t\tselectbox.removeClass('opened dropup dropdown');\r\n\t\t\t\t\t\t\t// колбек при закрытии селекта\r\n\t\t\t\t\t\t\topt.onSelectClosed.call(selectbox);\r\n\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tdropdown.mouseout(function() {\r\n\t\t\t\t\t\t\t$('li.sel', dropdown).addClass('selected');\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// изменение селекта\r\n\t\t\t\t\t\tel.on('change.styler', function() {\r\n\t\t\t\t\t\t\tdivText.text(option.filter(':selected').text()).removeClass('placeholder');\r\n\t\t\t\t\t\t\tli.removeClass('selected sel').not('.optgroup').eq(el[0].selectedIndex).addClass('selected sel');\r\n\t\t\t\t\t\t\t// добавляем класс, показывающий изменение селекта\r\n\t\t\t\t\t\t\tif (option.first().text() != li.filter('.selected').text()) {\r\n\t\t\t\t\t\t\t\tselectbox.addClass('changed');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tselectbox.removeClass('changed');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on('focus.styler', function() {\r\n\t\t\t\t\t\t\tselectbox.addClass('focused');\r\n\t\t\t\t\t\t\t$('div.jqselect').not('.focused').removeClass('opened dropup dropdown').find('div.jq-selectbox__dropdown').hide();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on('blur.styler', function() {\r\n\t\t\t\t\t\t\tselectbox.removeClass('focused');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t// изменение селекта с клавиатуры\r\n\t\t\t\t\t\t.on('keydown.styler keyup.styler', function(e) {\r\n\t\t\t\t\t\t\tvar liHeight = li.data('li-height');\r\n\t\t\t\t\t\t\tif (el.val() === '') {\r\n\t\t\t\t\t\t\t\tdivText.text(selectPlaceholder).addClass('placeholder');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdivText.text(option.filter(':selected').text());\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tli.removeClass('selected sel').not('.optgroup').eq(el[0].selectedIndex).addClass('selected sel');\r\n\t\t\t\t\t\t\t// вверх, влево, Page Up, Home\r\n\t\t\t\t\t\t\tif (e.which == 38 || e.which == 37 || e.which == 33 || e.which == 36) {\r\n\t\t\t\t\t\t\t\tif (el.val() === '') {\r\n\t\t\t\t\t\t\t\t\tul.scrollTop(0);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tul.scrollTop(ul.scrollTop() + li.filter('.selected').position().top);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// вниз, вправо, Page Down, End\r\n\t\t\t\t\t\t\tif (e.which == 40 || e.which == 39 || e.which == 34 || e.which == 35) {\r\n\t\t\t\t\t\t\t\tul.scrollTop(ul.scrollTop() + li.filter('.selected').position().top - ul.innerHeight() + liHeight);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// закрываем выпадающий список при нажатии Enter\r\n\t\t\t\t\t\t\tif (e.which == 13) {\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\tdropdown.hide();\r\n\t\t\t\t\t\t\t\tselectbox.removeClass('opened dropup dropdown');\r\n\t\t\t\t\t\t\t\t// колбек при закрытии селекта\r\n\t\t\t\t\t\t\t\topt.onSelectClosed.call(selectbox);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).on('keydown.styler', function(e) {\r\n\t\t\t\t\t\t\t// открываем выпадающий список при нажатии Space\r\n\t\t\t\t\t\t\tif (e.which == 32) {\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\tdivSelect.click();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// прячем выпадающий список при клике за пределами селекта\r\n\t\t\t\t\t\tif (!onDocumentClick.registered) {\r\n\t\t\t\t\t\t\t$(document).on('click', onDocumentClick);\r\n\t\t\t\t\t\t\tonDocumentClick.registered = true;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} // end doSelect()\r\n\r\n\t\t\t\t\t// мультиселект\r\n\t\t\t\t\tfunction doMultipleSelect() {\r\n\r\n\t\t\t\t\t\tvar att = new Attributes();\r\n\t\t\t\t\t\tvar selectbox =\r\n\t\t\t\t\t\t\t$('<div class=\"jq-select-multiple jqselect\"></div>')\r\n\t\t\t\t\t\t\t.attr({\r\n\t\t\t\t\t\t\t\tid: att.id,\r\n\t\t\t\t\t\t\t\ttitle: att.title\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.addClass(att.classes)\r\n\t\t\t\t\t\t\t.data(att.data)\r\n\t\t\t\t\t\t;\r\n\r\n\t\t\t\t\t\tel.after(selectbox);\r\n\r\n\t\t\t\t\t\tmakeList();\r\n\t\t\t\t\t\tselectbox.append('<ul>' + list + '</ul>');\r\n\t\t\t\t\t\tvar ul = $('ul', selectbox);\r\n\t\t\t\t\t\tvar li = $('li', selectbox);\r\n\t\t\t\t\t\tvar size = el.attr('size');\r\n\t\t\t\t\t\tvar ulHeight = ul.outerHeight();\r\n\t\t\t\t\t\tvar liHeight = li.outerHeight();\r\n\t\t\t\t\t\tif (size !== undefined && size > 0) {\r\n\t\t\t\t\t\t\tul.css({'height': liHeight * size});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tul.css({'height': liHeight * 4});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (ulHeight > selectbox.height()) {\r\n\t\t\t\t\t\t\tul.css('overflowY', 'scroll');\r\n\t\t\t\t\t\t\tpreventScrolling(ul);\r\n\t\t\t\t\t\t\t// прокручиваем до выбранного пункта\r\n\t\t\t\t\t\t\tif (li.filter('.selected').length) {\r\n\t\t\t\t\t\t\t\tul.scrollTop(ul.scrollTop() + li.filter('.selected').position().top);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// прячем оригинальный селект\r\n\t\t\t\t\t\tel.prependTo(selectbox);\r\n\r\n\t\t\t\t\t\t// если селект неактивный\r\n\t\t\t\t\t\tif (el.is(':disabled')) {\r\n\t\t\t\t\t\t\tselectbox.addClass('disabled');\r\n\t\t\t\t\t\t\toption.each(function() {\r\n\t\t\t\t\t\t\t\tif ($(this).is(':selected')) li.eq($(this).index()).addClass('selected');\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// если селект активный\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t// при клике на пункт списка\r\n\t\t\t\t\t\t\tli.filter(':not(.disabled):not(.optgroup)').click(function(e) {\r\n\t\t\t\t\t\t\t\tel.focus();\r\n\t\t\t\t\t\t\t\tvar clkd = $(this);\r\n\t\t\t\t\t\t\t\tif(!e.ctrlKey && !e.metaKey) clkd.addClass('selected');\r\n\t\t\t\t\t\t\t\tif(!e.shiftKey) clkd.addClass('first');\r\n\t\t\t\t\t\t\t\tif(!e.ctrlKey && !e.metaKey && !e.shiftKey) clkd.siblings().removeClass('selected first');\r\n\r\n\t\t\t\t\t\t\t\t// выделение пунктов при зажатом Ctrl\r\n\t\t\t\t\t\t\t\tif(e.ctrlKey || e.metaKey) {\r\n\t\t\t\t\t\t\t\t\tif (clkd.is('.selected')) clkd.removeClass('selected first');\r\n\t\t\t\t\t\t\t\t\t\telse clkd.addClass('selected first');\r\n\t\t\t\t\t\t\t\t\tclkd.siblings().removeClass('first');\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t// выделение пунктов при зажатом Shift\r\n\t\t\t\t\t\t\t\tif(e.shiftKey) {\r\n\t\t\t\t\t\t\t\t\tvar prev = false,\r\n\t\t\t\t\t\t\t\t\t\t\tnext = false;\r\n\t\t\t\t\t\t\t\t\tclkd.siblings().removeClass('selected').siblings('.first').addClass('selected');\r\n\t\t\t\t\t\t\t\t\tclkd.prevAll().each(function() {\r\n\t\t\t\t\t\t\t\t\t\tif ($(this).is('.first')) prev = true;\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tclkd.nextAll().each(function() {\r\n\t\t\t\t\t\t\t\t\t\tif ($(this).is('.first')) next = true;\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tif (prev) {\r\n\t\t\t\t\t\t\t\t\t\tclkd.prevAll().each(function() {\r\n\t\t\t\t\t\t\t\t\t\t\tif ($(this).is('.selected')) return false;\r\n\t\t\t\t\t\t\t\t\t\t\t\telse $(this).not('.disabled, .optgroup').addClass('selected');\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (next) {\r\n\t\t\t\t\t\t\t\t\t\tclkd.nextAll().each(function() {\r\n\t\t\t\t\t\t\t\t\t\t\tif ($(this).is('.selected')) return false;\r\n\t\t\t\t\t\t\t\t\t\t\t\telse $(this).not('.disabled, .optgroup').addClass('selected');\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (li.filter('.selected').length == 1) clkd.addClass('first');\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t// отмечаем выбранные мышью\r\n\t\t\t\t\t\t\t\toption.prop('selected', false);\r\n\t\t\t\t\t\t\t\tli.filter('.selected').each(function() {\r\n\t\t\t\t\t\t\t\t\tvar t = $(this);\r\n\t\t\t\t\t\t\t\t\tvar index = t.index();\r\n\t\t\t\t\t\t\t\t\tif (t.is('.option')) index -= t.prevAll('.optgroup').length;\r\n\t\t\t\t\t\t\t\t\toption.eq(index).prop('selected', true);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tel.change();\r\n\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t// отмечаем выбранные с клавиатуры\r\n\t\t\t\t\t\t\toption.each(function(i) {\r\n\t\t\t\t\t\t\t\t$(this).data('optionIndex', i);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tel.on('change.styler', function() {\r\n\t\t\t\t\t\t\t\tli.removeClass('selected');\r\n\t\t\t\t\t\t\t\tvar arrIndexes = [];\r\n\t\t\t\t\t\t\t\toption.filter(':selected').each(function() {\r\n\t\t\t\t\t\t\t\t\tarrIndexes.push($(this).data('optionIndex'));\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tli.not('.optgroup').filter(function(i) {\r\n\t\t\t\t\t\t\t\t\treturn $.inArray(i, arrIndexes) > -1;\r\n\t\t\t\t\t\t\t\t}).addClass('selected');\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.on('focus.styler', function() {\r\n\t\t\t\t\t\t\t\tselectbox.addClass('focused');\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.on('blur.styler', function() {\r\n\t\t\t\t\t\t\t\tselectbox.removeClass('focused');\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t// прокручиваем с клавиатуры\r\n\t\t\t\t\t\t\tif (ulHeight > selectbox.height()) {\r\n\t\t\t\t\t\t\t\tel.on('keydown.styler', function(e) {\r\n\t\t\t\t\t\t\t\t\t// вверх, влево, PageUp\r\n\t\t\t\t\t\t\t\t\tif (e.which == 38 || e.which == 37 || e.which == 33) {\r\n\t\t\t\t\t\t\t\t\t\tul.scrollTop(ul.scrollTop() + li.filter('.selected').position().top - liHeight);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t// вниз, вправо, PageDown\r\n\t\t\t\t\t\t\t\t\tif (e.which == 40 || e.which == 39 || e.which == 34) {\r\n\t\t\t\t\t\t\t\t\t\tul.scrollTop(ul.scrollTop() + li.filter('.selected:last').position().top - ul.innerHeight() + liHeight * 2);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} // end doMultipleSelect()\r\n\r\n\t\t\t\t\tif (el.is('[multiple]')) {\r\n\r\n\t\t\t\t\t\t// если Android или iOS, то мультиселект не стилизуем\r\n\t\t\t\t\t\t// причина для Android - в стилизованном селекте нет возможности выбрать несколько пунктов\r\n\t\t\t\t\t\t// причина для iOS - в стилизованном селекте неправильно отображаются выбранные пункты\r\n\t\t\t\t\t\tif (Android || iOS) return;\r\n\r\n\t\t\t\t\t\tdoMultipleSelect();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdoSelect();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}; // end selectboxOutput()\r\n\r\n\t\t\t\tselectboxOutput();\r\n\r\n\t\t\t\t// обновление при динамическом изменении\r\n\t\t\t\tel.on('refresh', function() {\r\n\t\t\t\t\tel.off('.styler').parent().before(el).remove();\r\n\t\t\t\t\tselectboxOutput();\r\n\t\t\t\t});\r\n\r\n\t\t\t// end select\r\n\r\n\t\t\t// reset\r\n\t\t\t} else if (el.is(':reset')) {\r\n\t\t\t\tel.on('click', function() {\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tel.closest('form').find('input, select').trigger('refresh');\r\n\t\t\t\t\t}, 1);\r\n\t\t\t\t});\r\n\t\t\t} // end reset\r\n\r\n\t\t}, // init: function()\r\n\r\n\t\t// деструктор\r\n\t\tdestroy: function() {\r\n\r\n\t\t\tvar el = $(this.element);\r\n\r\n\t\t\tif (el.is(':checkbox') || el.is(':radio')) {\r\n\t\t\t\tel.removeData('_' + pluginName).off('.styler refresh').removeAttr('style').parent().before(el).remove();\r\n\t\t\t\tel.closest('label').add('label[for=\"' + el.attr('id') + '\"]').off('.styler');\r\n\t\t\t} else if (el.is('input[type=\"number\"]')) {\r\n\t\t\t\tel.removeData('_' + pluginName).off('.styler refresh').closest('.jq-number').before(el).remove();\r\n\t\t\t} else if (el.is(':file') || el.is('select')) {\r\n\t\t\t\tel.removeData('_' + pluginName).off('.styler refresh').removeAttr('style').parent().before(el).remove();\r\n\t\t\t}\r\n\r\n\t\t} // destroy: function()\r\n\r\n\t}; // Plugin.prototype\r\n\r\n\t$.fn[pluginName] = function(options) {\r\n\t\tvar args = arguments;\r\n\t\tif (options === undefined || typeof options === 'object') {\r\n\t\t\tthis.each(function() {\r\n\t\t\t\tif (!$.data(this, '_' + pluginName)) {\r\n\t\t\t\t\t$.data(this, '_' + pluginName, new Plugin(this, options));\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t// колбек после выполнения плагина\r\n\t\t\t.promise()\r\n\t\t\t.done(function() {\r\n\t\t\t\tvar opt = $(this[0]).data('_' + pluginName);\r\n\t\t\t\tif (opt) opt.options.onFormStyled.call();\r\n\t\t\t});\r\n\t\t\treturn this;\r\n\t\t} else if (typeof options === 'string' && options[0] !== '_' && options !== 'init') {\r\n\t\t\tvar returns;\r\n\t\t\tthis.each(function() {\r\n\t\t\t\tvar instance = $.data(this, '_' + pluginName);\r\n\t\t\t\tif (instance instanceof Plugin && typeof instance[options] === 'function') {\r\n\t\t\t\t\treturns = instance[options].apply(instance, Array.prototype.slice.call(args, 1));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn returns !== undefined ? returns : this;\r\n\t\t}\r\n\t};\r\n\r\n\t// прячем выпадающий список при клике за пределами селекта\r\n\tfunction onDocumentClick(e) {\r\n\t\t// e.target.nodeName != 'OPTION' - добавлено для обхода бага в Opera на движке Presto\r\n\t\t// (при изменении селекта с клавиатуры срабатывает событие onclick)\r\n\t\tif (!$(e.target).parents().hasClass('jq-selectbox') && e.target.nodeName != 'OPTION') {\r\n\t\t\tif ($('div.jq-selectbox.opened').length) {\r\n\t\t\t\tvar selectbox = $('div.jq-selectbox.opened'),\r\n\t\t\t\t\t\tsearch = $('div.jq-selectbox__search input', selectbox),\r\n\t\t\t\t\t\tdropdown = $('div.jq-selectbox__dropdown', selectbox),\r\n\t\t\t\t\t\topt = selectbox.find('select').data('_' + pluginName).options;\r\n\r\n\t\t\t\t// колбек при закрытии селекта\r\n\t\t\t\topt.onSelectClosed.call(selectbox);\r\n\r\n\t\t\t\tif (search.length) search.val('').keyup();\r\n\t\t\t\tdropdown.hide().find('li.sel').addClass('selected');\r\n\t\t\t\tselectbox.removeClass('focused opened dropup dropdown');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tonDocumentClick.registered = false;\r\n\r\n}));","/*!\r\n * jQuery Validation Plugin v1.17.0\r\n *\r\n * https://jqueryvalidation.org/\r\n *\r\n * Copyright (c) 2017 Jörn Zaefferer\r\n * Released under the MIT license\r\n */\r\n(function( factory ) {\r\n\tif ( typeof define === \"function\" && define.amd ) {\r\n\t\tdefine( [\"jquery\"], factory );\r\n\t} else if (typeof module === \"object\" && module.exports) {\r\n\t\tmodule.exports = factory( require( \"jquery\" ) );\r\n\t} else {\r\n\t\tfactory( jQuery );\r\n\t}\r\n}(function( $ ) {\r\n\r\n$.extend( $.fn, {\r\n\r\n\t// https://jqueryvalidation.org/validate/\r\n\tvalidate: function( options ) {\r\n\r\n\t\t// If nothing is selected, return nothing; can't chain anyway\r\n\t\tif ( !this.length ) {\r\n\t\t\tif ( options && options.debug && window.console ) {\r\n\t\t\t\tconsole.warn( \"Nothing selected, can't validate, returning nothing.\" );\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Check if a validator for this form was already created\r\n\t\tvar validator = $.data( this[ 0 ], \"validator\" );\r\n\t\tif ( validator ) {\r\n\t\t\treturn validator;\r\n\t\t}\r\n\r\n\t\t// Add novalidate tag if HTML5.\r\n\t\tthis.attr( \"novalidate\", \"novalidate\" );\r\n\r\n\t\tvalidator = new $.validator( options, this[ 0 ] );\r\n\t\t$.data( this[ 0 ], \"validator\", validator );\r\n\r\n\t\tif ( validator.settings.onsubmit ) {\r\n\r\n\t\t\tthis.on( \"click.validate\", \":submit\", function( event ) {\r\n\r\n\t\t\t\t// Track the used submit button to properly handle scripted\r\n\t\t\t\t// submits later.\r\n\t\t\t\tvalidator.submitButton = event.currentTarget;\r\n\r\n\t\t\t\t// Allow suppressing validation by adding a cancel class to the submit button\r\n\t\t\t\tif ( $( this ).hasClass( \"cancel\" ) ) {\r\n\t\t\t\t\tvalidator.cancelSubmit = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Allow suppressing validation by adding the html5 formnovalidate attribute to the submit button\r\n\t\t\t\tif ( $( this ).attr( \"formnovalidate\" ) !== undefined ) {\r\n\t\t\t\t\tvalidator.cancelSubmit = true;\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\r\n\t\t\t// Validate the form on submit\r\n\t\t\tthis.on( \"submit.validate\", function( event ) {\r\n\t\t\t\tif ( validator.settings.debug ) {\r\n\r\n\t\t\t\t\t// Prevent form submit to be able to see console output\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t\tfunction handle() {\r\n\t\t\t\t\tvar hidden, result;\r\n\r\n\t\t\t\t\t// Insert a hidden input as a replacement for the missing submit button\r\n\t\t\t\t\t// The hidden input is inserted in two cases:\r\n\t\t\t\t\t//   - A user defined a `submitHandler`\r\n\t\t\t\t\t//   - There was a pending request due to `remote` method and `stopRequest()`\r\n\t\t\t\t\t//     was called to submit the form in case it's valid\r\n\t\t\t\t\tif ( validator.submitButton && ( validator.settings.submitHandler || validator.formSubmitted ) ) {\r\n\t\t\t\t\t\thidden = $( \"<input type='hidden'/>\" )\r\n\t\t\t\t\t\t\t.attr( \"name\", validator.submitButton.name )\r\n\t\t\t\t\t\t\t.val( $( validator.submitButton ).val() )\r\n\t\t\t\t\t\t\t.appendTo( validator.currentForm );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( validator.settings.submitHandler ) {\r\n\t\t\t\t\t\tresult = validator.settings.submitHandler.call( validator, validator.currentForm, event );\r\n\t\t\t\t\t\tif ( hidden ) {\r\n\r\n\t\t\t\t\t\t\t// And clean up afterwards; thanks to no-block-scope, hidden can be referenced\r\n\t\t\t\t\t\t\thidden.remove();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ( result !== undefined ) {\r\n\t\t\t\t\t\t\treturn result;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Prevent submit for invalid forms or custom submit handlers\r\n\t\t\t\tif ( validator.cancelSubmit ) {\r\n\t\t\t\t\tvalidator.cancelSubmit = false;\r\n\t\t\t\t\treturn handle();\r\n\t\t\t\t}\r\n\t\t\t\tif ( validator.form() ) {\r\n\t\t\t\t\tif ( validator.pendingRequest ) {\r\n\t\t\t\t\t\tvalidator.formSubmitted = true;\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn handle();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvalidator.focusInvalid();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t}\r\n\r\n\t\treturn validator;\r\n\t},\r\n\r\n\t// https://jqueryvalidation.org/valid/\r\n\tvalid: function() {\r\n\t\tvar valid, validator, errorList;\r\n\r\n\t\tif ( $( this[ 0 ] ).is( \"form\" ) ) {\r\n\t\t\tvalid = this.validate().form();\r\n\t\t} else {\r\n\t\t\terrorList = [];\r\n\t\t\tvalid = true;\r\n\t\t\tvalidator = $( this[ 0 ].form ).validate();\r\n\t\t\tthis.each( function() {\r\n\t\t\t\tvalid = validator.element( this ) && valid;\r\n\t\t\t\tif ( !valid ) {\r\n\t\t\t\t\terrorList = errorList.concat( validator.errorList );\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t\tvalidator.errorList = errorList;\r\n\t\t}\r\n\t\treturn valid;\r\n\t},\r\n\r\n\t// https://jqueryvalidation.org/rules/\r\n\trules: function( command, argument ) {\r\n\t\tvar element = this[ 0 ],\r\n\t\t\tsettings, staticRules, existingRules, data, param, filtered;\r\n\r\n\t\t// If nothing is selected, return empty object; can't chain anyway\r\n\t\tif ( element == null ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( !element.form && element.hasAttribute( \"contenteditable\" ) ) {\r\n\t\t\telement.form = this.closest( \"form\" )[ 0 ];\r\n\t\t\telement.name = this.attr( \"name\" );\r\n\t\t}\r\n\r\n\t\tif ( element.form == null ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( command ) {\r\n\t\t\tsettings = $.data( element.form, \"validator\" ).settings;\r\n\t\t\tstaticRules = settings.rules;\r\n\t\t\texistingRules = $.validator.staticRules( element );\r\n\t\t\tswitch ( command ) {\r\n\t\t\tcase \"add\":\r\n\t\t\t\t$.extend( existingRules, $.validator.normalizeRule( argument ) );\r\n\r\n\t\t\t\t// Remove messages from rules, but allow them to be set separately\r\n\t\t\t\tdelete existingRules.messages;\r\n\t\t\t\tstaticRules[ element.name ] = existingRules;\r\n\t\t\t\tif ( argument.messages ) {\r\n\t\t\t\t\tsettings.messages[ element.name ] = $.extend( settings.messages[ element.name ], argument.messages );\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"remove\":\r\n\t\t\t\tif ( !argument ) {\r\n\t\t\t\t\tdelete staticRules[ element.name ];\r\n\t\t\t\t\treturn existingRules;\r\n\t\t\t\t}\r\n\t\t\t\tfiltered = {};\r\n\t\t\t\t$.each( argument.split( /\\s/ ), function( index, method ) {\r\n\t\t\t\t\tfiltered[ method ] = existingRules[ method ];\r\n\t\t\t\t\tdelete existingRules[ method ];\r\n\t\t\t\t} );\r\n\t\t\t\treturn filtered;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tdata = $.validator.normalizeRules(\r\n\t\t$.extend(\r\n\t\t\t{},\r\n\t\t\t$.validator.classRules( element ),\r\n\t\t\t$.validator.attributeRules( element ),\r\n\t\t\t$.validator.dataRules( element ),\r\n\t\t\t$.validator.staticRules( element )\r\n\t\t), element );\r\n\r\n\t\t// Make sure required is at front\r\n\t\tif ( data.required ) {\r\n\t\t\tparam = data.required;\r\n\t\t\tdelete data.required;\r\n\t\t\tdata = $.extend( { required: param }, data );\r\n\t\t}\r\n\r\n\t\t// Make sure remote is at back\r\n\t\tif ( data.remote ) {\r\n\t\t\tparam = data.remote;\r\n\t\t\tdelete data.remote;\r\n\t\t\tdata = $.extend( data, { remote: param } );\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n} );\r\n\r\n// Custom selectors\r\n$.extend( $.expr.pseudos || $.expr[ \":\" ], {\t\t// '|| $.expr[ \":\" ]' here enables backwards compatibility to jQuery 1.7. Can be removed when dropping jQ 1.7.x support\r\n\r\n\t// https://jqueryvalidation.org/blank-selector/\r\n\tblank: function( a ) {\r\n\t\treturn !$.trim( \"\" + $( a ).val() );\r\n\t},\r\n\r\n\t// https://jqueryvalidation.org/filled-selector/\r\n\tfilled: function( a ) {\r\n\t\tvar val = $( a ).val();\r\n\t\treturn val !== null && !!$.trim( \"\" + val );\r\n\t},\r\n\r\n\t// https://jqueryvalidation.org/unchecked-selector/\r\n\tunchecked: function( a ) {\r\n\t\treturn !$( a ).prop( \"checked\" );\r\n\t}\r\n} );\r\n\r\n// Constructor for validator\r\n$.validator = function( options, form ) {\r\n\tthis.settings = $.extend( true, {}, $.validator.defaults, options );\r\n\tthis.currentForm = form;\r\n\tthis.init();\r\n};\r\n\r\n// https://jqueryvalidation.org/jQuery.validator.format/\r\n$.validator.format = function( source, params ) {\r\n\tif ( arguments.length === 1 ) {\r\n\t\treturn function() {\r\n\t\t\tvar args = $.makeArray( arguments );\r\n\t\t\targs.unshift( source );\r\n\t\t\treturn $.validator.format.apply( this, args );\r\n\t\t};\r\n\t}\r\n\tif ( params === undefined ) {\r\n\t\treturn source;\r\n\t}\r\n\tif ( arguments.length > 2 && params.constructor !== Array  ) {\r\n\t\tparams = $.makeArray( arguments ).slice( 1 );\r\n\t}\r\n\tif ( params.constructor !== Array ) {\r\n\t\tparams = [ params ];\r\n\t}\r\n\t$.each( params, function( i, n ) {\r\n\t\tsource = source.replace( new RegExp( \"\\\\{\" + i + \"\\\\}\", \"g\" ), function() {\r\n\t\t\treturn n;\r\n\t\t} );\r\n\t} );\r\n\treturn source;\r\n};\r\n\r\n$.extend( $.validator, {\r\n\r\n\tdefaults: {\r\n\t\tmessages: {},\r\n\t\tgroups: {},\r\n\t\trules: {},\r\n\t\terrorClass: \"error\",\r\n\t\tpendingClass: \"pending\",\r\n\t\tvalidClass: \"valid\",\r\n\t\terrorElement: \"label\",\r\n\t\tfocusCleanup: false,\r\n\t\tfocusInvalid: true,\r\n\t\terrorContainer: $( [] ),\r\n\t\terrorLabelContainer: $( [] ),\r\n\t\tonsubmit: true,\r\n\t\tignore: \":hidden\",\r\n\t\tignoreTitle: false,\r\n\t\tonfocusin: function( element ) {\r\n\t\t\tthis.lastActive = element;\r\n\r\n\t\t\t// Hide error label and remove error class on focus if enabled\r\n\t\t\tif ( this.settings.focusCleanup ) {\r\n\t\t\t\tif ( this.settings.unhighlight ) {\r\n\t\t\t\t\tthis.settings.unhighlight.call( this, element, this.settings.errorClass, this.settings.validClass );\r\n\t\t\t\t}\r\n\t\t\t\tthis.hideThese( this.errorsFor( element ) );\r\n\t\t\t}\r\n\t\t},\r\n\t\tonfocusout: function( element ) {\r\n\t\t\tif ( !this.checkable( element ) && ( element.name in this.submitted || !this.optional( element ) ) ) {\r\n\t\t\t\tthis.element( element );\r\n\t\t\t}\r\n\t\t},\r\n\t\tonkeyup: function( element, event ) {\r\n\r\n\t\t\t// Avoid revalidate the field when pressing one of the following keys\r\n\t\t\t// Shift       => 16\r\n\t\t\t// Ctrl        => 17\r\n\t\t\t// Alt         => 18\r\n\t\t\t// Caps lock   => 20\r\n\t\t\t// End         => 35\r\n\t\t\t// Home        => 36\r\n\t\t\t// Left arrow  => 37\r\n\t\t\t// Up arrow    => 38\r\n\t\t\t// Right arrow => 39\r\n\t\t\t// Down arrow  => 40\r\n\t\t\t// Insert      => 45\r\n\t\t\t// Num lock    => 144\r\n\t\t\t// AltGr key   => 225\r\n\t\t\tvar excludedKeys = [\r\n\t\t\t\t16, 17, 18, 20, 35, 36, 37,\r\n\t\t\t\t38, 39, 40, 45, 144, 225\r\n\t\t\t];\r\n\r\n\t\t\tif ( event.which === 9 && this.elementValue( element ) === \"\" || $.inArray( event.keyCode, excludedKeys ) !== -1 ) {\r\n\t\t\t\treturn;\r\n\t\t\t} else if ( element.name in this.submitted || element.name in this.invalid ) {\r\n\t\t\t\tthis.element( element );\r\n\t\t\t}\r\n\t\t},\r\n\t\tonclick: function( element ) {\r\n\r\n\t\t\t// Click on selects, radiobuttons and checkboxes\r\n\t\t\tif ( element.name in this.submitted ) {\r\n\t\t\t\tthis.element( element );\r\n\r\n\t\t\t// Or option elements, check parent select in that case\r\n\t\t\t} else if ( element.parentNode.name in this.submitted ) {\r\n\t\t\t\tthis.element( element.parentNode );\r\n\t\t\t}\r\n\t\t},\r\n\t\thighlight: function( element, errorClass, validClass ) {\r\n\t\t\tif ( element.type === \"radio\" ) {\r\n\t\t\t\tthis.findByName( element.name ).addClass( errorClass ).removeClass( validClass );\r\n\t\t\t} else {\r\n\t\t\t\t$( element ).addClass( errorClass ).removeClass( validClass );\r\n\t\t\t}\r\n\t\t},\r\n\t\tunhighlight: function( element, errorClass, validClass ) {\r\n\t\t\tif ( element.type === \"radio\" ) {\r\n\t\t\t\tthis.findByName( element.name ).removeClass( errorClass ).addClass( validClass );\r\n\t\t\t} else {\r\n\t\t\t\t$( element ).removeClass( errorClass ).addClass( validClass );\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t// https://jqueryvalidation.org/jQuery.validator.setDefaults/\r\n\tsetDefaults: function( settings ) {\r\n\t\t$.extend( $.validator.defaults, settings );\r\n\t},\r\n\r\n\tmessages: {\r\n\t\trequired: \"This field is required.\",\r\n\t\tremote: \"Please fix this field.\",\r\n\t\temail: \"Please enter a valid email address.\",\r\n\t\turl: \"Please enter a valid URL.\",\r\n\t\tdate: \"Please enter a valid date.\",\r\n\t\tdateISO: \"Please enter a valid date (ISO).\",\r\n\t\tnumber: \"Please enter a valid number.\",\r\n\t\tdigits: \"Please enter only digits.\",\r\n\t\tequalTo: \"Please enter the same value again.\",\r\n\t\tmaxlength: $.validator.format( \"Please enter no more than {0} characters.\" ),\r\n\t\tminlength: $.validator.format( \"Please enter at least {0} characters.\" ),\r\n\t\trangelength: $.validator.format( \"Please enter a value between {0} and {1} characters long.\" ),\r\n\t\trange: $.validator.format( \"Please enter a value between {0} and {1}.\" ),\r\n\t\tmax: $.validator.format( \"Please enter a value less than or equal to {0}.\" ),\r\n\t\tmin: $.validator.format( \"Please enter a value greater than or equal to {0}.\" ),\r\n\t\tstep: $.validator.format( \"Please enter a multiple of {0}.\" )\r\n\t},\r\n\r\n\tautoCreateRanges: false,\r\n\r\n\tprototype: {\r\n\r\n\t\tinit: function() {\r\n\t\t\tthis.labelContainer = $( this.settings.errorLabelContainer );\r\n\t\t\tthis.errorContext = this.labelContainer.length && this.labelContainer || $( this.currentForm );\r\n\t\t\tthis.containers = $( this.settings.errorContainer ).add( this.settings.errorLabelContainer );\r\n\t\t\tthis.submitted = {};\r\n\t\t\tthis.valueCache = {};\r\n\t\t\tthis.pendingRequest = 0;\r\n\t\t\tthis.pending = {};\r\n\t\t\tthis.invalid = {};\r\n\t\t\tthis.reset();\r\n\r\n\t\t\tvar groups = ( this.groups = {} ),\r\n\t\t\t\trules;\r\n\t\t\t$.each( this.settings.groups, function( key, value ) {\r\n\t\t\t\tif ( typeof value === \"string\" ) {\r\n\t\t\t\t\tvalue = value.split( /\\s/ );\r\n\t\t\t\t}\r\n\t\t\t\t$.each( value, function( index, name ) {\r\n\t\t\t\t\tgroups[ name ] = key;\r\n\t\t\t\t} );\r\n\t\t\t} );\r\n\t\t\trules = this.settings.rules;\r\n\t\t\t$.each( rules, function( key, value ) {\r\n\t\t\t\trules[ key ] = $.validator.normalizeRule( value );\r\n\t\t\t} );\r\n\r\n\t\t\tfunction delegate( event ) {\r\n\r\n\t\t\t\t// Set form expando on contenteditable\r\n\t\t\t\tif ( !this.form && this.hasAttribute( \"contenteditable\" ) ) {\r\n\t\t\t\t\tthis.form = $( this ).closest( \"form\" )[ 0 ];\r\n\t\t\t\t\tthis.name = $( this ).attr( \"name\" );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar validator = $.data( this.form, \"validator\" ),\r\n\t\t\t\t\teventType = \"on\" + event.type.replace( /^validate/, \"\" ),\r\n\t\t\t\t\tsettings = validator.settings;\r\n\t\t\t\tif ( settings[ eventType ] && !$( this ).is( settings.ignore ) ) {\r\n\t\t\t\t\tsettings[ eventType ].call( validator, this, event );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t$( this.currentForm )\r\n\t\t\t\t.on( \"focusin.validate focusout.validate keyup.validate\",\r\n\t\t\t\t\t\":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], \" +\r\n\t\t\t\t\t\"[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], \" +\r\n\t\t\t\t\t\"[type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], \" +\r\n\t\t\t\t\t\"[type='radio'], [type='checkbox'], [contenteditable], [type='button']\", delegate )\r\n\r\n\t\t\t\t// Support: Chrome, oldIE\r\n\t\t\t\t// \"select\" is provided as event.target when clicking a option\r\n\t\t\t\t.on( \"click.validate\", \"select, option, [type='radio'], [type='checkbox']\", delegate );\r\n\r\n\t\t\tif ( this.settings.invalidHandler ) {\r\n\t\t\t\t$( this.currentForm ).on( \"invalid-form.validate\", this.settings.invalidHandler );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// https://jqueryvalidation.org/Validator.form/\r\n\t\tform: function() {\r\n\t\t\tthis.checkForm();\r\n\t\t\t$.extend( this.submitted, this.errorMap );\r\n\t\t\tthis.invalid = $.extend( {}, this.errorMap );\r\n\t\t\tif ( !this.valid() ) {\r\n\t\t\t\t$( this.currentForm ).triggerHandler( \"invalid-form\", [ this ] );\r\n\t\t\t}\r\n\t\t\tthis.showErrors();\r\n\t\t\treturn this.valid();\r\n\t\t},\r\n\r\n\t\tcheckForm: function() {\r\n\t\t\tthis.prepareForm();\r\n\t\t\tfor ( var i = 0, elements = ( this.currentElements = this.elements() ); elements[ i ]; i++ ) {\r\n\t\t\t\tthis.check( elements[ i ] );\r\n\t\t\t}\r\n\t\t\treturn this.valid();\r\n\t\t},\r\n\r\n\t\t// https://jqueryvalidation.org/Validator.element/\r\n\t\telement: function( element ) {\r\n\t\t\tvar cleanElement = this.clean( element ),\r\n\t\t\t\tcheckElement = this.validationTargetFor( cleanElement ),\r\n\t\t\t\tv = this,\r\n\t\t\t\tresult = true,\r\n\t\t\t\trs, group;\r\n\r\n\t\t\tif ( checkElement === undefined ) {\r\n\t\t\t\tdelete this.invalid[ cleanElement.name ];\r\n\t\t\t} else {\r\n\t\t\t\tthis.prepareElement( checkElement );\r\n\t\t\t\tthis.currentElements = $( checkElement );\r\n\r\n\t\t\t\t// If this element is grouped, then validate all group elements already\r\n\t\t\t\t// containing a value\r\n\t\t\t\tgroup = this.groups[ checkElement.name ];\r\n\t\t\t\tif ( group ) {\r\n\t\t\t\t\t$.each( this.groups, function( name, testgroup ) {\r\n\t\t\t\t\t\tif ( testgroup === group && name !== checkElement.name ) {\r\n\t\t\t\t\t\t\tcleanElement = v.validationTargetFor( v.clean( v.findByName( name ) ) );\r\n\t\t\t\t\t\t\tif ( cleanElement && cleanElement.name in v.invalid ) {\r\n\t\t\t\t\t\t\t\tv.currentElements.push( cleanElement );\r\n\t\t\t\t\t\t\t\tresult = v.check( cleanElement ) && result;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} );\r\n\t\t\t\t}\r\n\r\n\t\t\t\trs = this.check( checkElement ) !== false;\r\n\t\t\t\tresult = result && rs;\r\n\t\t\t\tif ( rs ) {\r\n\t\t\t\t\tthis.invalid[ checkElement.name ] = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.invalid[ checkElement.name ] = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( !this.numberOfInvalids() ) {\r\n\r\n\t\t\t\t\t// Hide error containers on last error\r\n\t\t\t\t\tthis.toHide = this.toHide.add( this.containers );\r\n\t\t\t\t}\r\n\t\t\t\tthis.showErrors();\r\n\r\n\t\t\t\t// Add aria-invalid status for screen readers\r\n\t\t\t\t$( element ).attr( \"aria-invalid\", !rs );\r\n\t\t\t}\r\n\r\n\t\t\treturn result;\r\n\t\t},\r\n\r\n\t\t// https://jqueryvalidation.org/Validator.showErrors/\r\n\t\tshowErrors: function( errors ) {\r\n\t\t\tif ( errors ) {\r\n\t\t\t\tvar validator = this;\r\n\r\n\t\t\t\t// Add items to error list and map\r\n\t\t\t\t$.extend( this.errorMap, errors );\r\n\t\t\t\tthis.errorList = $.map( this.errorMap, function( message, name ) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tmessage: message,\r\n\t\t\t\t\t\telement: validator.findByName( name )[ 0 ]\r\n\t\t\t\t\t};\r\n\t\t\t\t} );\r\n\r\n\t\t\t\t// Remove items from success list\r\n\t\t\t\tthis.successList = $.grep( this.successList, function( element ) {\r\n\t\t\t\t\treturn !( element.name in errors );\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t\tif ( this.settings.showErrors ) {\r\n\t\t\t\tthis.settings.showErrors.call( this, this.errorMap, this.errorList );\r\n\t\t\t} else {\r\n\t\t\t\tthis.defaultShowErrors();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// https://jqueryvalidation.org/Validator.resetForm/\r\n\t\tresetForm: function() {\r\n\t\t\tif ( $.fn.resetForm ) {\r\n\t\t\t\t$( this.currentForm ).resetForm();\r\n\t\t\t}\r\n\t\t\tthis.invalid = {};\r\n\t\t\tthis.submitted = {};\r\n\t\t\tthis.prepareForm();\r\n\t\t\tthis.hideErrors();\r\n\t\t\tvar elements = this.elements()\r\n\t\t\t\t.removeData( \"previousValue\" )\r\n\t\t\t\t.removeAttr( \"aria-invalid\" );\r\n\r\n\t\t\tthis.resetElements( elements );\r\n\t\t},\r\n\r\n\t\tresetElements: function( elements ) {\r\n\t\t\tvar i;\r\n\r\n\t\t\tif ( this.settings.unhighlight ) {\r\n\t\t\t\tfor ( i = 0; elements[ i ]; i++ ) {\r\n\t\t\t\t\tthis.settings.unhighlight.call( this, elements[ i ],\r\n\t\t\t\t\t\tthis.settings.errorClass, \"\" );\r\n\t\t\t\t\tthis.findByName( elements[ i ].name ).removeClass( this.settings.validClass );\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\telements\r\n\t\t\t\t\t.removeClass( this.settings.errorClass )\r\n\t\t\t\t\t.removeClass( this.settings.validClass );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tnumberOfInvalids: function() {\r\n\t\t\treturn this.objectLength( this.invalid );\r\n\t\t},\r\n\r\n\t\tobjectLength: function( obj ) {\r\n\t\t\t/* jshint unused: false */\r\n\t\t\tvar count = 0,\r\n\t\t\t\ti;\r\n\t\t\tfor ( i in obj ) {\r\n\r\n\t\t\t\t// This check allows counting elements with empty error\r\n\t\t\t\t// message as invalid elements\r\n\t\t\t\tif ( obj[ i ] !== undefined && obj[ i ] !== null && obj[ i ] !== false ) {\r\n\t\t\t\t\tcount++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn count;\r\n\t\t},\r\n\r\n\t\thideErrors: function() {\r\n\t\t\tthis.hideThese( this.toHide );\r\n\t\t},\r\n\r\n\t\thideThese: function( errors ) {\r\n\t\t\terrors.not( this.containers ).text( \"\" );\r\n\t\t\tthis.addWrapper( errors ).hide();\r\n\t\t},\r\n\r\n\t\tvalid: function() {\r\n\t\t\treturn this.size() === 0;\r\n\t\t},\r\n\r\n\t\tsize: function() {\r\n\t\t\treturn this.errorList.length;\r\n\t\t},\r\n\r\n\t\tfocusInvalid: function() {\r\n\t\t\tif ( this.settings.focusInvalid ) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t$( this.findLastActive() || this.errorList.length && this.errorList[ 0 ].element || [] )\r\n\t\t\t\t\t.filter( \":visible\" )\r\n\t\t\t\t\t.focus()\r\n\r\n\t\t\t\t\t// Manually trigger focusin event; without it, focusin handler isn't called, findLastActive won't have anything to find\r\n\t\t\t\t\t.trigger( \"focusin\" );\r\n\t\t\t\t} catch ( e ) {\r\n\r\n\t\t\t\t\t// Ignore IE throwing errors when focusing hidden elements\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tfindLastActive: function() {\r\n\t\t\tvar lastActive = this.lastActive;\r\n\t\t\treturn lastActive && $.grep( this.errorList, function( n ) {\r\n\t\t\t\treturn n.element.name === lastActive.name;\r\n\t\t\t} ).length === 1 && lastActive;\r\n\t\t},\r\n\r\n\t\telements: function() {\r\n\t\t\tvar validator = this,\r\n\t\t\t\trulesCache = {};\r\n\r\n\t\t\t// Select all valid inputs inside the form (no submit or reset buttons)\r\n\t\t\treturn $( this.currentForm )\r\n\t\t\t.find( \"input, select, textarea, [contenteditable]\" )\r\n\t\t\t.not( \":submit, :reset, :image, :disabled\" )\r\n\t\t\t.not( this.settings.ignore )\r\n\t\t\t.filter( function() {\r\n\t\t\t\tvar name = this.name || $( this ).attr( \"name\" ); // For contenteditable\r\n\t\t\t\tif ( !name && validator.settings.debug && window.console ) {\r\n\t\t\t\t\tconsole.error( \"%o has no name assigned\", this );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Set form expando on contenteditable\r\n\t\t\t\tif ( this.hasAttribute( \"contenteditable\" ) ) {\r\n\t\t\t\t\tthis.form = $( this ).closest( \"form\" )[ 0 ];\r\n\t\t\t\t\tthis.name = name;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Select only the first element for each name, and only those with rules specified\r\n\t\t\t\tif ( name in rulesCache || !validator.objectLength( $( this ).rules() ) ) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\trulesCache[ name ] = true;\r\n\t\t\t\treturn true;\r\n\t\t\t} );\r\n\t\t},\r\n\r\n\t\tclean: function( selector ) {\r\n\t\t\treturn $( selector )[ 0 ];\r\n\t\t},\r\n\r\n\t\terrors: function() {\r\n\t\t\tvar errorClass = this.settings.errorClass.split( \" \" ).join( \".\" );\r\n\t\t\treturn $( this.settings.errorElement + \".\" + errorClass, this.errorContext );\r\n\t\t},\r\n\r\n\t\tresetInternals: function() {\r\n\t\t\tthis.successList = [];\r\n\t\t\tthis.errorList = [];\r\n\t\t\tthis.errorMap = {};\r\n\t\t\tthis.toShow = $( [] );\r\n\t\t\tthis.toHide = $( [] );\r\n\t\t},\r\n\r\n\t\treset: function() {\r\n\t\t\tthis.resetInternals();\r\n\t\t\tthis.currentElements = $( [] );\r\n\t\t},\r\n\r\n\t\tprepareForm: function() {\r\n\t\t\tthis.reset();\r\n\t\t\tthis.toHide = this.errors().add( this.containers );\r\n\t\t},\r\n\r\n\t\tprepareElement: function( element ) {\r\n\t\t\tthis.reset();\r\n\t\t\tthis.toHide = this.errorsFor( element );\r\n\t\t},\r\n\r\n\t\telementValue: function( element ) {\r\n\t\t\tvar $element = $( element ),\r\n\t\t\t\ttype = element.type,\r\n\t\t\t\tval, idx;\r\n\r\n\t\t\tif ( type === \"radio\" || type === \"checkbox\" ) {\r\n\t\t\t\treturn this.findByName( element.name ).filter( \":checked\" ).val();\r\n\t\t\t} else if ( type === \"number\" && typeof element.validity !== \"undefined\" ) {\r\n\t\t\t\treturn element.validity.badInput ? \"NaN\" : $element.val();\r\n\t\t\t}\r\n\r\n\t\t\tif ( element.hasAttribute( \"contenteditable\" ) ) {\r\n\t\t\t\tval = $element.text();\r\n\t\t\t} else {\r\n\t\t\t\tval = $element.val();\r\n\t\t\t}\r\n\r\n\t\t\tif ( type === \"file\" ) {\r\n\r\n\t\t\t\t// Modern browser (chrome & safari)\r\n\t\t\t\tif ( val.substr( 0, 12 ) === \"C:\\\\fakepath\\\\\" ) {\r\n\t\t\t\t\treturn val.substr( 12 );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Legacy browsers\r\n\t\t\t\t// Unix-based path\r\n\t\t\t\tidx = val.lastIndexOf( \"/\" );\r\n\t\t\t\tif ( idx >= 0 ) {\r\n\t\t\t\t\treturn val.substr( idx + 1 );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Windows-based path\r\n\t\t\t\tidx = val.lastIndexOf( \"\\\\\" );\r\n\t\t\t\tif ( idx >= 0 ) {\r\n\t\t\t\t\treturn val.substr( idx + 1 );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Just the file name\r\n\t\t\t\treturn val;\r\n\t\t\t}\r\n\r\n\t\t\tif ( typeof val === \"string\" ) {\r\n\t\t\t\treturn val.replace( /\\r/g, \"\" );\r\n\t\t\t}\r\n\t\t\treturn val;\r\n\t\t},\r\n\r\n\t\tcheck: function( element ) {\r\n\t\t\telement = this.validationTargetFor( this.clean( element ) );\r\n\r\n\t\t\tvar rules = $( element ).rules(),\r\n\t\t\t\trulesCount = $.map( rules, function( n, i ) {\r\n\t\t\t\t\treturn i;\r\n\t\t\t\t} ).length,\r\n\t\t\t\tdependencyMismatch = false,\r\n\t\t\t\tval = this.elementValue( element ),\r\n\t\t\t\tresult, method, rule, normalizer;\r\n\r\n\t\t\t// Prioritize the local normalizer defined for this element over the global one\r\n\t\t\t// if the former exists, otherwise user the global one in case it exists.\r\n\t\t\tif ( typeof rules.normalizer === \"function\" ) {\r\n\t\t\t\tnormalizer = rules.normalizer;\r\n\t\t\t} else if (\ttypeof this.settings.normalizer === \"function\" ) {\r\n\t\t\t\tnormalizer = this.settings.normalizer;\r\n\t\t\t}\r\n\r\n\t\t\t// If normalizer is defined, then call it to retreive the changed value instead\r\n\t\t\t// of using the real one.\r\n\t\t\t// Note that `this` in the normalizer is `element`.\r\n\t\t\tif ( normalizer ) {\r\n\t\t\t\tval = normalizer.call( element, val );\r\n\r\n\t\t\t\tif ( typeof val !== \"string\" ) {\r\n\t\t\t\t\tthrow new TypeError( \"The normalizer should return a string value.\" );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Delete the normalizer from rules to avoid treating it as a pre-defined method.\r\n\t\t\t\tdelete rules.normalizer;\r\n\t\t\t}\r\n\r\n\t\t\tfor ( method in rules ) {\r\n\t\t\t\trule = { method: method, parameters: rules[ method ] };\r\n\t\t\t\ttry {\r\n\t\t\t\t\tresult = $.validator.methods[ method ].call( this, val, element, rule.parameters );\r\n\r\n\t\t\t\t\t// If a method indicates that the field is optional and therefore valid,\r\n\t\t\t\t\t// don't mark it as valid when there are no other rules\r\n\t\t\t\t\tif ( result === \"dependency-mismatch\" && rulesCount === 1 ) {\r\n\t\t\t\t\t\tdependencyMismatch = true;\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdependencyMismatch = false;\r\n\r\n\t\t\t\t\tif ( result === \"pending\" ) {\r\n\t\t\t\t\t\tthis.toHide = this.toHide.not( this.errorsFor( element ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( !result ) {\r\n\t\t\t\t\t\tthis.formatAndAdd( element, rule );\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch ( e ) {\r\n\t\t\t\t\tif ( this.settings.debug && window.console ) {\r\n\t\t\t\t\t\tconsole.log( \"Exception occurred when checking element \" + element.id + \", check the '\" + rule.method + \"' method.\", e );\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( e instanceof TypeError ) {\r\n\t\t\t\t\t\te.message += \".  Exception occurred when checking element \" + element.id + \", check the '\" + rule.method + \"' method.\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthrow e;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif ( dependencyMismatch ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif ( this.objectLength( rules ) ) {\r\n\t\t\t\tthis.successList.push( element );\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\r\n\t\t// Return the custom message for the given element and validation method\r\n\t\t// specified in the element's HTML5 data attribute\r\n\t\t// return the generic message if present and no method specific message is present\r\n\t\tcustomDataMessage: function( element, method ) {\r\n\t\t\treturn $( element ).data( \"msg\" + method.charAt( 0 ).toUpperCase() +\r\n\t\t\t\tmethod.substring( 1 ).toLowerCase() ) || $( element ).data( \"msg\" );\r\n\t\t},\r\n\r\n\t\t// Return the custom message for the given element name and validation method\r\n\t\tcustomMessage: function( name, method ) {\r\n\t\t\tvar m = this.settings.messages[ name ];\r\n\t\t\treturn m && ( m.constructor === String ? m : m[ method ] );\r\n\t\t},\r\n\r\n\t\t// Return the first defined argument, allowing empty strings\r\n\t\tfindDefined: function() {\r\n\t\t\tfor ( var i = 0; i < arguments.length; i++ ) {\r\n\t\t\t\tif ( arguments[ i ] !== undefined ) {\r\n\t\t\t\t\treturn arguments[ i ];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn undefined;\r\n\t\t},\r\n\r\n\t\t// The second parameter 'rule' used to be a string, and extended to an object literal\r\n\t\t// of the following form:\r\n\t\t// rule = {\r\n\t\t//     method: \"method name\",\r\n\t\t//     parameters: \"the given method parameters\"\r\n\t\t// }\r\n\t\t//\r\n\t\t// The old behavior still supported, kept to maintain backward compatibility with\r\n\t\t// old code, and will be removed in the next major release.\r\n\t\tdefaultMessage: function( element, rule ) {\r\n\t\t\tif ( typeof rule === \"string\" ) {\r\n\t\t\t\trule = { method: rule };\r\n\t\t\t}\r\n\r\n\t\t\tvar message = this.findDefined(\r\n\t\t\t\t\tthis.customMessage( element.name, rule.method ),\r\n\t\t\t\t\tthis.customDataMessage( element, rule.method ),\r\n\r\n\t\t\t\t\t// 'title' is never undefined, so handle empty string as undefined\r\n\t\t\t\t\t!this.settings.ignoreTitle && element.title || undefined,\r\n\t\t\t\t\t$.validator.messages[ rule.method ],\r\n\t\t\t\t\t\"<strong>Warning: No message defined for \" + element.name + \"</strong>\"\r\n\t\t\t\t),\r\n\t\t\t\ttheregex = /\\$?\\{(\\d+)\\}/g;\r\n\t\t\tif ( typeof message === \"function\" ) {\r\n\t\t\t\tmessage = message.call( this, rule.parameters, element );\r\n\t\t\t} else if ( theregex.test( message ) ) {\r\n\t\t\t\tmessage = $.validator.format( message.replace( theregex, \"{$1}\" ), rule.parameters );\r\n\t\t\t}\r\n\r\n\t\t\treturn message;\r\n\t\t},\r\n\r\n\t\tformatAndAdd: function( element, rule ) {\r\n\t\t\tvar message = this.defaultMessage( element, rule );\r\n\r\n\t\t\tthis.errorList.push( {\r\n\t\t\t\tmessage: message,\r\n\t\t\t\telement: element,\r\n\t\t\t\tmethod: rule.method\r\n\t\t\t} );\r\n\r\n\t\t\tthis.errorMap[ element.name ] = message;\r\n\t\t\tthis.submitted[ element.name ] = message;\r\n\t\t},\r\n\r\n\t\taddWrapper: function( toToggle ) {\r\n\t\t\tif ( this.settings.wrapper ) {\r\n\t\t\t\ttoToggle = toToggle.add( toToggle.parent( this.settings.wrapper ) );\r\n\t\t\t}\r\n\t\t\treturn toToggle;\r\n\t\t},\r\n\r\n\t\tdefaultShowErrors: function() {\r\n\t\t\tvar i, elements, error;\r\n\t\t\tfor ( i = 0; this.errorList[ i ]; i++ ) {\r\n\t\t\t\terror = this.errorList[ i ];\r\n\t\t\t\tif ( this.settings.highlight ) {\r\n\t\t\t\t\tthis.settings.highlight.call( this, error.element, this.settings.errorClass, this.settings.validClass );\r\n\t\t\t\t}\r\n\t\t\t\tthis.showLabel( error.element, error.message );\r\n\t\t\t}\r\n\t\t\tif ( this.errorList.length ) {\r\n\t\t\t\tthis.toShow = this.toShow.add( this.containers );\r\n\t\t\t}\r\n\t\t\tif ( this.settings.success ) {\r\n\t\t\t\tfor ( i = 0; this.successList[ i ]; i++ ) {\r\n\t\t\t\t\tthis.showLabel( this.successList[ i ] );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif ( this.settings.unhighlight ) {\r\n\t\t\t\tfor ( i = 0, elements = this.validElements(); elements[ i ]; i++ ) {\r\n\t\t\t\t\tthis.settings.unhighlight.call( this, elements[ i ], this.settings.errorClass, this.settings.validClass );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.toHide = this.toHide.not( this.toShow );\r\n\t\t\tthis.hideErrors();\r\n\t\t\tthis.addWrapper( this.toShow ).show();\r\n\t\t},\r\n\r\n\t\tvalidElements: function() {\r\n\t\t\treturn this.currentElements.not( this.invalidElements() );\r\n\t\t},\r\n\r\n\t\tinvalidElements: function() {\r\n\t\t\treturn $( this.errorList ).map( function() {\r\n\t\t\t\treturn this.element;\r\n\t\t\t} );\r\n\t\t},\r\n\r\n\t\tshowLabel: function( element, message ) {\r\n\t\t\tvar place, group, errorID, v,\r\n\t\t\t\terror = this.errorsFor( element ),\r\n\t\t\t\telementID = this.idOrName( element ),\r\n\t\t\t\tdescribedBy = $( element ).attr( \"aria-describedby\" );\r\n\r\n\t\t\tif ( error.length ) {\r\n\r\n\t\t\t\t// Refresh error/success class\r\n\t\t\t\terror.removeClass( this.settings.validClass ).addClass( this.settings.errorClass );\r\n\r\n\t\t\t\t// Replace message on existing label\r\n\t\t\t\terror.html( message );\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// Create error element\r\n\t\t\t\terror = $( \"<\" + this.settings.errorElement + \">\" )\r\n\t\t\t\t\t.attr( \"id\", elementID + \"-error\" )\r\n\t\t\t\t\t.addClass( this.settings.errorClass )\r\n\t\t\t\t\t.html( message || \"\" );\r\n\r\n\t\t\t\t// Maintain reference to the element to be placed into the DOM\r\n\t\t\t\tplace = error;\r\n\t\t\t\tif ( this.settings.wrapper ) {\r\n\r\n\t\t\t\t\t// Make sure the element is visible, even in IE\r\n\t\t\t\t\t// actually showing the wrapped element is handled elsewhere\r\n\t\t\t\t\tplace = error.hide().show().wrap( \"<\" + this.settings.wrapper + \"/>\" ).parent();\r\n\t\t\t\t}\r\n\t\t\t\tif ( this.labelContainer.length ) {\r\n\t\t\t\t\tthis.labelContainer.append( place );\r\n\t\t\t\t} else if ( this.settings.errorPlacement ) {\r\n\t\t\t\t\tthis.settings.errorPlacement.call( this, place, $( element ) );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplace.insertAfter( element );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Link error back to the element\r\n\t\t\t\tif ( error.is( \"label\" ) ) {\r\n\r\n\t\t\t\t\t// If the error is a label, then associate using 'for'\r\n\t\t\t\t\terror.attr( \"for\", elementID );\r\n\r\n\t\t\t\t\t// If the element is not a child of an associated label, then it's necessary\r\n\t\t\t\t\t// to explicitly apply aria-describedby\r\n\t\t\t\t} else if ( error.parents( \"label[for='\" + this.escapeCssMeta( elementID ) + \"']\" ).length === 0 ) {\r\n\t\t\t\t\terrorID = error.attr( \"id\" );\r\n\r\n\t\t\t\t\t// Respect existing non-error aria-describedby\r\n\t\t\t\t\tif ( !describedBy ) {\r\n\t\t\t\t\t\tdescribedBy = errorID;\r\n\t\t\t\t\t} else if ( !describedBy.match( new RegExp( \"\\\\b\" + this.escapeCssMeta( errorID ) + \"\\\\b\" ) ) ) {\r\n\r\n\t\t\t\t\t\t// Add to end of list if not already present\r\n\t\t\t\t\t\tdescribedBy += \" \" + errorID;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$( element ).attr( \"aria-describedby\", describedBy );\r\n\r\n\t\t\t\t\t// If this element is grouped, then assign to all elements in the same group\r\n\t\t\t\t\tgroup = this.groups[ element.name ];\r\n\t\t\t\t\tif ( group ) {\r\n\t\t\t\t\t\tv = this;\r\n\t\t\t\t\t\t$.each( v.groups, function( name, testgroup ) {\r\n\t\t\t\t\t\t\tif ( testgroup === group ) {\r\n\t\t\t\t\t\t\t\t$( \"[name='\" + v.escapeCssMeta( name ) + \"']\", v.currentForm )\r\n\t\t\t\t\t\t\t\t\t.attr( \"aria-describedby\", error.attr( \"id\" ) );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif ( !message && this.settings.success ) {\r\n\t\t\t\terror.text( \"\" );\r\n\t\t\t\tif ( typeof this.settings.success === \"string\" ) {\r\n\t\t\t\t\terror.addClass( this.settings.success );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.settings.success( error, element );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.toShow = this.toShow.add( error );\r\n\t\t},\r\n\r\n\t\terrorsFor: function( element ) {\r\n\t\t\tvar name = this.escapeCssMeta( this.idOrName( element ) ),\r\n\t\t\t\tdescriber = $( element ).attr( \"aria-describedby\" ),\r\n\t\t\t\tselector = \"label[for='\" + name + \"'], label[for='\" + name + \"'] *\";\r\n\r\n\t\t\t// 'aria-describedby' should directly reference the error element\r\n\t\t\tif ( describer ) {\r\n\t\t\t\tselector = selector + \", #\" + this.escapeCssMeta( describer )\r\n\t\t\t\t\t.replace( /\\s+/g, \", #\" );\r\n\t\t\t}\r\n\r\n\t\t\treturn this\r\n\t\t\t\t.errors()\r\n\t\t\t\t.filter( selector );\r\n\t\t},\r\n\r\n\t\t// See https://api.jquery.com/category/selectors/, for CSS\r\n\t\t// meta-characters that should be escaped in order to be used with JQuery\r\n\t\t// as a literal part of a name/id or any selector.\r\n\t\tescapeCssMeta: function( string ) {\r\n\t\t\treturn string.replace( /([\\\\!\"#$%&'()*+,./:;<=>?@\\[\\]^`{|}~])/g, \"\\\\$1\" );\r\n\t\t},\r\n\r\n\t\tidOrName: function( element ) {\r\n\t\t\treturn this.groups[ element.name ] || ( this.checkable( element ) ? element.name : element.id || element.name );\r\n\t\t},\r\n\r\n\t\tvalidationTargetFor: function( element ) {\r\n\r\n\t\t\t// If radio/checkbox, validate first element in group instead\r\n\t\t\tif ( this.checkable( element ) ) {\r\n\t\t\t\telement = this.findByName( element.name );\r\n\t\t\t}\r\n\r\n\t\t\t// Always apply ignore filter\r\n\t\t\treturn $( element ).not( this.settings.ignore )[ 0 ];\r\n\t\t},\r\n\r\n\t\tcheckable: function( element ) {\r\n\t\t\treturn ( /radio|checkbox/i ).test( element.type );\r\n\t\t},\r\n\r\n\t\tfindByName: function( name ) {\r\n\t\t\treturn $( this.currentForm ).find( \"[name='\" + this.escapeCssMeta( name ) + \"']\" );\r\n\t\t},\r\n\r\n\t\tgetLength: function( value, element ) {\r\n\t\t\tswitch ( element.nodeName.toLowerCase() ) {\r\n\t\t\tcase \"select\":\r\n\t\t\t\treturn $( \"option:selected\", element ).length;\r\n\t\t\tcase \"input\":\r\n\t\t\t\tif ( this.checkable( element ) ) {\r\n\t\t\t\t\treturn this.findByName( element.name ).filter( \":checked\" ).length;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn value.length;\r\n\t\t},\r\n\r\n\t\tdepend: function( param, element ) {\r\n\t\t\treturn this.dependTypes[ typeof param ] ? this.dependTypes[ typeof param ]( param, element ) : true;\r\n\t\t},\r\n\r\n\t\tdependTypes: {\r\n\t\t\t\"boolean\": function( param ) {\r\n\t\t\t\treturn param;\r\n\t\t\t},\r\n\t\t\t\"string\": function( param, element ) {\r\n\t\t\t\treturn !!$( param, element.form ).length;\r\n\t\t\t},\r\n\t\t\t\"function\": function( param, element ) {\r\n\t\t\t\treturn param( element );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\toptional: function( element ) {\r\n\t\t\tvar val = this.elementValue( element );\r\n\t\t\treturn !$.validator.methods.required.call( this, val, element ) && \"dependency-mismatch\";\r\n\t\t},\r\n\r\n\t\tstartRequest: function( element ) {\r\n\t\t\tif ( !this.pending[ element.name ] ) {\r\n\t\t\t\tthis.pendingRequest++;\r\n\t\t\t\t$( element ).addClass( this.settings.pendingClass );\r\n\t\t\t\tthis.pending[ element.name ] = true;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tstopRequest: function( element, valid ) {\r\n\t\t\tthis.pendingRequest--;\r\n\r\n\t\t\t// Sometimes synchronization fails, make sure pendingRequest is never < 0\r\n\t\t\tif ( this.pendingRequest < 0 ) {\r\n\t\t\t\tthis.pendingRequest = 0;\r\n\t\t\t}\r\n\t\t\tdelete this.pending[ element.name ];\r\n\t\t\t$( element ).removeClass( this.settings.pendingClass );\r\n\t\t\tif ( valid && this.pendingRequest === 0 && this.formSubmitted && this.form() ) {\r\n\t\t\t\t$( this.currentForm ).submit();\r\n\r\n\t\t\t\t// Remove the hidden input that was used as a replacement for the\r\n\t\t\t\t// missing submit button. The hidden input is added by `handle()`\r\n\t\t\t\t// to ensure that the value of the used submit button is passed on\r\n\t\t\t\t// for scripted submits triggered by this method\r\n\t\t\t\tif ( this.submitButton ) {\r\n\t\t\t\t\t$( \"input:hidden[name='\" + this.submitButton.name + \"']\", this.currentForm ).remove();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.formSubmitted = false;\r\n\t\t\t} else if ( !valid && this.pendingRequest === 0 && this.formSubmitted ) {\r\n\t\t\t\t$( this.currentForm ).triggerHandler( \"invalid-form\", [ this ] );\r\n\t\t\t\tthis.formSubmitted = false;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tpreviousValue: function( element, method ) {\r\n\t\t\tmethod = typeof method === \"string\" && method || \"remote\";\r\n\r\n\t\t\treturn $.data( element, \"previousValue\" ) || $.data( element, \"previousValue\", {\r\n\t\t\t\told: null,\r\n\t\t\t\tvalid: true,\r\n\t\t\t\tmessage: this.defaultMessage( element, { method: method } )\r\n\t\t\t} );\r\n\t\t},\r\n\r\n\t\t// Cleans up all forms and elements, removes validator-specific events\r\n\t\tdestroy: function() {\r\n\t\t\tthis.resetForm();\r\n\r\n\t\t\t$( this.currentForm )\r\n\t\t\t\t.off( \".validate\" )\r\n\t\t\t\t.removeData( \"validator\" )\r\n\t\t\t\t.find( \".validate-equalTo-blur\" )\r\n\t\t\t\t\t.off( \".validate-equalTo\" )\r\n\t\t\t\t\t.removeClass( \"validate-equalTo-blur\" );\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclassRuleSettings: {\r\n\t\trequired: { required: true },\r\n\t\temail: { email: true },\r\n\t\turl: { url: true },\r\n\t\tdate: { date: true },\r\n\t\tdateISO: { dateISO: true },\r\n\t\tnumber: { number: true },\r\n\t\tdigits: { digits: true },\r\n\t\tcreditcard: { creditcard: true }\r\n\t},\r\n\r\n\taddClassRules: function( className, rules ) {\r\n\t\tif ( className.constructor === String ) {\r\n\t\t\tthis.classRuleSettings[ className ] = rules;\r\n\t\t} else {\r\n\t\t\t$.extend( this.classRuleSettings, className );\r\n\t\t}\r\n\t},\r\n\r\n\tclassRules: function( element ) {\r\n\t\tvar rules = {},\r\n\t\t\tclasses = $( element ).attr( \"class\" );\r\n\r\n\t\tif ( classes ) {\r\n\t\t\t$.each( classes.split( \" \" ), function() {\r\n\t\t\t\tif ( this in $.validator.classRuleSettings ) {\r\n\t\t\t\t\t$.extend( rules, $.validator.classRuleSettings[ this ] );\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t}\r\n\t\treturn rules;\r\n\t},\r\n\r\n\tnormalizeAttributeRule: function( rules, type, method, value ) {\r\n\r\n\t\t// Convert the value to a number for number inputs, and for text for backwards compability\r\n\t\t// allows type=\"date\" and others to be compared as strings\r\n\t\tif ( /min|max|step/.test( method ) && ( type === null || /number|range|text/.test( type ) ) ) {\r\n\t\t\tvalue = Number( value );\r\n\r\n\t\t\t// Support Opera Mini, which returns NaN for undefined minlength\r\n\t\t\tif ( isNaN( value ) ) {\r\n\t\t\t\tvalue = undefined;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( value || value === 0 ) {\r\n\t\t\trules[ method ] = value;\r\n\t\t} else if ( type === method && type !== \"range\" ) {\r\n\r\n\t\t\t// Exception: the jquery validate 'range' method\r\n\t\t\t// does not test for the html5 'range' type\r\n\t\t\trules[ method ] = true;\r\n\t\t}\r\n\t},\r\n\r\n\tattributeRules: function( element ) {\r\n\t\tvar rules = {},\r\n\t\t\t$element = $( element ),\r\n\t\t\ttype = element.getAttribute( \"type\" ),\r\n\t\t\tmethod, value;\r\n\r\n\t\tfor ( method in $.validator.methods ) {\r\n\r\n\t\t\t// Support for <input required> in both html5 and older browsers\r\n\t\t\tif ( method === \"required\" ) {\r\n\t\t\t\tvalue = element.getAttribute( method );\r\n\r\n\t\t\t\t// Some browsers return an empty string for the required attribute\r\n\t\t\t\t// and non-HTML5 browsers might have required=\"\" markup\r\n\t\t\t\tif ( value === \"\" ) {\r\n\t\t\t\t\tvalue = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Force non-HTML5 browsers to return bool\r\n\t\t\t\tvalue = !!value;\r\n\t\t\t} else {\r\n\t\t\t\tvalue = $element.attr( method );\r\n\t\t\t}\r\n\r\n\t\t\tthis.normalizeAttributeRule( rules, type, method, value );\r\n\t\t}\r\n\r\n\t\t// 'maxlength' may be returned as -1, 2147483647 ( IE ) and 524288 ( safari ) for text inputs\r\n\t\tif ( rules.maxlength && /-1|2147483647|524288/.test( rules.maxlength ) ) {\r\n\t\t\tdelete rules.maxlength;\r\n\t\t}\r\n\r\n\t\treturn rules;\r\n\t},\r\n\r\n\tdataRules: function( element ) {\r\n\t\tvar rules = {},\r\n\t\t\t$element = $( element ),\r\n\t\t\ttype = element.getAttribute( \"type\" ),\r\n\t\t\tmethod, value;\r\n\r\n\t\tfor ( method in $.validator.methods ) {\r\n\t\t\tvalue = $element.data( \"rule\" + method.charAt( 0 ).toUpperCase() + method.substring( 1 ).toLowerCase() );\r\n\t\t\tthis.normalizeAttributeRule( rules, type, method, value );\r\n\t\t}\r\n\t\treturn rules;\r\n\t},\r\n\r\n\tstaticRules: function( element ) {\r\n\t\tvar rules = {},\r\n\t\t\tvalidator = $.data( element.form, \"validator\" );\r\n\r\n\t\tif ( validator.settings.rules ) {\r\n\t\t\trules = $.validator.normalizeRule( validator.settings.rules[ element.name ] ) || {};\r\n\t\t}\r\n\t\treturn rules;\r\n\t},\r\n\r\n\tnormalizeRules: function( rules, element ) {\r\n\r\n\t\t// Handle dependency check\r\n\t\t$.each( rules, function( prop, val ) {\r\n\r\n\t\t\t// Ignore rule when param is explicitly false, eg. required:false\r\n\t\t\tif ( val === false ) {\r\n\t\t\t\tdelete rules[ prop ];\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif ( val.param || val.depends ) {\r\n\t\t\t\tvar keepRule = true;\r\n\t\t\t\tswitch ( typeof val.depends ) {\r\n\t\t\t\tcase \"string\":\r\n\t\t\t\t\tkeepRule = !!$( val.depends, element.form ).length;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"function\":\r\n\t\t\t\t\tkeepRule = val.depends.call( element, element );\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif ( keepRule ) {\r\n\t\t\t\t\trules[ prop ] = val.param !== undefined ? val.param : true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$.data( element.form, \"validator\" ).resetElements( $( element ) );\r\n\t\t\t\t\tdelete rules[ prop ];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\t// Evaluate parameters\r\n\t\t$.each( rules, function( rule, parameter ) {\r\n\t\t\trules[ rule ] = $.isFunction( parameter ) && rule !== \"normalizer\" ? parameter( element ) : parameter;\r\n\t\t} );\r\n\r\n\t\t// Clean number parameters\r\n\t\t$.each( [ \"minlength\", \"maxlength\" ], function() {\r\n\t\t\tif ( rules[ this ] ) {\r\n\t\t\t\trules[ this ] = Number( rules[ this ] );\r\n\t\t\t}\r\n\t\t} );\r\n\t\t$.each( [ \"rangelength\", \"range\" ], function() {\r\n\t\t\tvar parts;\r\n\t\t\tif ( rules[ this ] ) {\r\n\t\t\t\tif ( $.isArray( rules[ this ] ) ) {\r\n\t\t\t\t\trules[ this ] = [ Number( rules[ this ][ 0 ] ), Number( rules[ this ][ 1 ] ) ];\r\n\t\t\t\t} else if ( typeof rules[ this ] === \"string\" ) {\r\n\t\t\t\t\tparts = rules[ this ].replace( /[\\[\\]]/g, \"\" ).split( /[\\s,]+/ );\r\n\t\t\t\t\trules[ this ] = [ Number( parts[ 0 ] ), Number( parts[ 1 ] ) ];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\tif ( $.validator.autoCreateRanges ) {\r\n\r\n\t\t\t// Auto-create ranges\r\n\t\t\tif ( rules.min != null && rules.max != null ) {\r\n\t\t\t\trules.range = [ rules.min, rules.max ];\r\n\t\t\t\tdelete rules.min;\r\n\t\t\t\tdelete rules.max;\r\n\t\t\t}\r\n\t\t\tif ( rules.minlength != null && rules.maxlength != null ) {\r\n\t\t\t\trules.rangelength = [ rules.minlength, rules.maxlength ];\r\n\t\t\t\tdelete rules.minlength;\r\n\t\t\t\tdelete rules.maxlength;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn rules;\r\n\t},\r\n\r\n\t// Converts a simple string to a {string: true} rule, e.g., \"required\" to {required:true}\r\n\tnormalizeRule: function( data ) {\r\n\t\tif ( typeof data === \"string\" ) {\r\n\t\t\tvar transformed = {};\r\n\t\t\t$.each( data.split( /\\s/ ), function() {\r\n\t\t\t\ttransformed[ this ] = true;\r\n\t\t\t} );\r\n\t\t\tdata = transformed;\r\n\t\t}\r\n\t\treturn data;\r\n\t},\r\n\r\n\t// https://jqueryvalidation.org/jQuery.validator.addMethod/\r\n\taddMethod: function( name, method, message ) {\r\n\t\t$.validator.methods[ name ] = method;\r\n\t\t$.validator.messages[ name ] = message !== undefined ? message : $.validator.messages[ name ];\r\n\t\tif ( method.length < 3 ) {\r\n\t\t\t$.validator.addClassRules( name, $.validator.normalizeRule( name ) );\r\n\t\t}\r\n\t},\r\n\r\n\t// https://jqueryvalidation.org/jQuery.validator.methods/\r\n\tmethods: {\r\n\r\n\t\t// https://jqueryvalidation.org/required-method/\r\n\t\trequired: function( value, element, param ) {\r\n\r\n\t\t\t// Check if dependency is met\r\n\t\t\tif ( !this.depend( param, element ) ) {\r\n\t\t\t\treturn \"dependency-mismatch\";\r\n\t\t\t}\r\n\t\t\tif ( element.nodeName.toLowerCase() === \"select\" ) {\r\n\r\n\t\t\t\t// Could be an array for select-multiple or a string, both are fine this way\r\n\t\t\t\tvar val = $( element ).val();\r\n\t\t\t\treturn val && val.length > 0;\r\n\t\t\t}\r\n\t\t\tif ( this.checkable( element ) ) {\r\n\t\t\t\treturn this.getLength( value, element ) > 0;\r\n\t\t\t}\r\n\t\t\treturn value.length > 0;\r\n\t\t},\r\n\r\n\t\t// https://jqueryvalidation.org/email-method/\r\n\t\temail: function( value, element ) {\r\n\r\n\t\t\t// From https://html.spec.whatwg.org/multipage/forms.html#valid-e-mail-address\r\n\t\t\t// Retrieved 2014-01-14\r\n\t\t\t// If you have a problem with this implementation, report a bug against the above spec\r\n\t\t\t// Or use custom methods to implement your own email validation\r\n\t\t\treturn this.optional( element ) || /^[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test( value );\r\n\t\t},\r\n\r\n\t\t// https://jqueryvalidation.org/url-method/\r\n\t\turl: function( value, element ) {\r\n\r\n\t\t\t// Copyright (c) 2010-2013 Diego Perini, MIT licensed\r\n\t\t\t// https://gist.github.com/dperini/729294\r\n\t\t\t// see also https://mathiasbynens.be/demo/url-regex\r\n\t\t\t// modified to allow protocol-relative URLs\r\n\t\t\treturn this.optional( element ) || /^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})).?)(?::\\d{2,5})?(?:[/?#]\\S*)?$/i.test( value );\r\n\t\t},\r\n\r\n\t\t// https://jqueryvalidation.org/date-method/\r\n\t\tdate: function( value, element ) {\r\n\t\t\treturn this.optional( element ) || !/Invalid|NaN/.test( new Date( value ).toString() );\r\n\t\t},\r\n\r\n\t\t// https://jqueryvalidation.org/dateISO-method/\r\n\t\tdateISO: function( value, element ) {\r\n\t\t\treturn this.optional( element ) || /^\\d{4}[\\/\\-](0?[1-9]|1[012])[\\/\\-](0?[1-9]|[12][0-9]|3[01])$/.test( value );\r\n\t\t},\r\n\r\n\t\t// https://jqueryvalidation.org/number-method/\r\n\t\tnumber: function( value, element ) {\r\n\t\t\treturn this.optional( element ) || /^(?:-?\\d+|-?\\d{1,3}(?:,\\d{3})+)?(?:\\.\\d+)?$/.test( value );\r\n\t\t},\r\n\r\n\t\t// https://jqueryvalidation.org/digits-method/\r\n\t\tdigits: function( value, element ) {\r\n\t\t\treturn this.optional( element ) || /^\\d+$/.test( value );\r\n\t\t},\r\n\r\n\t\t// https://jqueryvalidation.org/minlength-method/\r\n\t\tminlength: function( value, element, param ) {\r\n\t\t\tvar length = $.isArray( value ) ? value.length : this.getLength( value, element );\r\n\t\t\treturn this.optional( element ) || length >= param;\r\n\t\t},\r\n\r\n\t\t// https://jqueryvalidation.org/maxlength-method/\r\n\t\tmaxlength: function( value, element, param ) {\r\n\t\t\tvar length = $.isArray( value ) ? value.length : this.getLength( value, element );\r\n\t\t\treturn this.optional( element ) || length <= param;\r\n\t\t},\r\n\r\n\t\t// https://jqueryvalidation.org/rangelength-method/\r\n\t\trangelength: function( value, element, param ) {\r\n\t\t\tvar length = $.isArray( value ) ? value.length : this.getLength( value, element );\r\n\t\t\treturn this.optional( element ) || ( length >= param[ 0 ] && length <= param[ 1 ] );\r\n\t\t},\r\n\r\n\t\t// https://jqueryvalidation.org/min-method/\r\n\t\tmin: function( value, element, param ) {\r\n\t\t\treturn this.optional( element ) || value >= param;\r\n\t\t},\r\n\r\n\t\t// https://jqueryvalidation.org/max-method/\r\n\t\tmax: function( value, element, param ) {\r\n\t\t\treturn this.optional( element ) || value <= param;\r\n\t\t},\r\n\r\n\t\t// https://jqueryvalidation.org/range-method/\r\n\t\trange: function( value, element, param ) {\r\n\t\t\treturn this.optional( element ) || ( value >= param[ 0 ] && value <= param[ 1 ] );\r\n\t\t},\r\n\r\n\t\t// https://jqueryvalidation.org/step-method/\r\n\t\tstep: function( value, element, param ) {\r\n\t\t\tvar type = $( element ).attr( \"type\" ),\r\n\t\t\t\terrorMessage = \"Step attribute on input type \" + type + \" is not supported.\",\r\n\t\t\t\tsupportedTypes = [ \"text\", \"number\", \"range\" ],\r\n\t\t\t\tre = new RegExp( \"\\\\b\" + type + \"\\\\b\" ),\r\n\t\t\t\tnotSupported = type && !re.test( supportedTypes.join() ),\r\n\t\t\t\tdecimalPlaces = function( num ) {\r\n\t\t\t\t\tvar match = ( \"\" + num ).match( /(?:\\.(\\d+))?$/ );\r\n\t\t\t\t\tif ( !match ) {\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Number of digits right of decimal point.\r\n\t\t\t\t\treturn match[ 1 ] ? match[ 1 ].length : 0;\r\n\t\t\t\t},\r\n\t\t\t\ttoInt = function( num ) {\r\n\t\t\t\t\treturn Math.round( num * Math.pow( 10, decimals ) );\r\n\t\t\t\t},\r\n\t\t\t\tvalid = true,\r\n\t\t\t\tdecimals;\r\n\r\n\t\t\t// Works only for text, number and range input types\r\n\t\t\t// TODO find a way to support input types date, datetime, datetime-local, month, time and week\r\n\t\t\tif ( notSupported ) {\r\n\t\t\t\tthrow new Error( errorMessage );\r\n\t\t\t}\r\n\r\n\t\t\tdecimals = decimalPlaces( param );\r\n\r\n\t\t\t// Value can't have too many decimals\r\n\t\t\tif ( decimalPlaces( value ) > decimals || toInt( value ) % toInt( param ) !== 0 ) {\r\n\t\t\t\tvalid = false;\r\n\t\t\t}\r\n\r\n\t\t\treturn this.optional( element ) || valid;\r\n\t\t},\r\n\r\n\t\t// https://jqueryvalidation.org/equalTo-method/\r\n\t\tequalTo: function( value, element, param ) {\r\n\r\n\t\t\t// Bind to the blur event of the target in order to revalidate whenever the target field is updated\r\n\t\t\tvar target = $( param );\r\n\t\t\tif ( this.settings.onfocusout && target.not( \".validate-equalTo-blur\" ).length ) {\r\n\t\t\t\ttarget.addClass( \"validate-equalTo-blur\" ).on( \"blur.validate-equalTo\", function() {\r\n\t\t\t\t\t$( element ).valid();\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t\treturn value === target.val();\r\n\t\t},\r\n\r\n\t\t// https://jqueryvalidation.org/remote-method/\r\n\t\tremote: function( value, element, param, method ) {\r\n\t\t\tif ( this.optional( element ) ) {\r\n\t\t\t\treturn \"dependency-mismatch\";\r\n\t\t\t}\r\n\r\n\t\t\tmethod = typeof method === \"string\" && method || \"remote\";\r\n\r\n\t\t\tvar previous = this.previousValue( element, method ),\r\n\t\t\t\tvalidator, data, optionDataString;\r\n\r\n\t\t\tif ( !this.settings.messages[ element.name ] ) {\r\n\t\t\t\tthis.settings.messages[ element.name ] = {};\r\n\t\t\t}\r\n\t\t\tprevious.originalMessage = previous.originalMessage || this.settings.messages[ element.name ][ method ];\r\n\t\t\tthis.settings.messages[ element.name ][ method ] = previous.message;\r\n\r\n\t\t\tparam = typeof param === \"string\" && { url: param } || param;\r\n\t\t\toptionDataString = $.param( $.extend( { data: value }, param.data ) );\r\n\t\t\tif ( previous.old === optionDataString ) {\r\n\t\t\t\treturn previous.valid;\r\n\t\t\t}\r\n\r\n\t\t\tprevious.old = optionDataString;\r\n\t\t\tvalidator = this;\r\n\t\t\tthis.startRequest( element );\r\n\t\t\tdata = {};\r\n\t\t\tdata[ element.name ] = value;\r\n\t\t\t$.ajax( $.extend( true, {\r\n\t\t\t\tmode: \"abort\",\r\n\t\t\t\tport: \"validate\" + element.name,\r\n\t\t\t\tdataType: \"json\",\r\n\t\t\t\tdata: data,\r\n\t\t\t\tcontext: validator.currentForm,\r\n\t\t\t\tsuccess: function( response ) {\r\n\t\t\t\t\tvar valid = response === true || response === \"true\",\r\n\t\t\t\t\t\terrors, message, submitted;\r\n\r\n\t\t\t\t\tvalidator.settings.messages[ element.name ][ method ] = previous.originalMessage;\r\n\t\t\t\t\tif ( valid ) {\r\n\t\t\t\t\t\tsubmitted = validator.formSubmitted;\r\n\t\t\t\t\t\tvalidator.resetInternals();\r\n\t\t\t\t\t\tvalidator.toHide = validator.errorsFor( element );\r\n\t\t\t\t\t\tvalidator.formSubmitted = submitted;\r\n\t\t\t\t\t\tvalidator.successList.push( element );\r\n\t\t\t\t\t\tvalidator.invalid[ element.name ] = false;\r\n\t\t\t\t\t\tvalidator.showErrors();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\terrors = {};\r\n\t\t\t\t\t\tmessage = response || validator.defaultMessage( element, { method: method, parameters: value } );\r\n\t\t\t\t\t\terrors[ element.name ] = previous.message = message;\r\n\t\t\t\t\t\tvalidator.invalid[ element.name ] = true;\r\n\t\t\t\t\t\tvalidator.showErrors( errors );\r\n\t\t\t\t\t}\r\n\t\t\t\t\tprevious.valid = valid;\r\n\t\t\t\t\tvalidator.stopRequest( element, valid );\r\n\t\t\t\t}\r\n\t\t\t}, param ) );\r\n\t\t\treturn \"pending\";\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\n// Ajax mode: abort\r\n// usage: $.ajax({ mode: \"abort\"[, port: \"uniqueport\"]});\r\n// if mode:\"abort\" is used, the previous request on that port (port can be undefined) is aborted via XMLHttpRequest.abort()\r\n\r\nvar pendingRequests = {},\r\n\tajax;\r\n\r\n// Use a prefilter if available (1.5+)\r\nif ( $.ajaxPrefilter ) {\r\n\t$.ajaxPrefilter( function( settings, _, xhr ) {\r\n\t\tvar port = settings.port;\r\n\t\tif ( settings.mode === \"abort\" ) {\r\n\t\t\tif ( pendingRequests[ port ] ) {\r\n\t\t\t\tpendingRequests[ port ].abort();\r\n\t\t\t}\r\n\t\t\tpendingRequests[ port ] = xhr;\r\n\t\t}\r\n\t} );\r\n} else {\r\n\r\n\t// Proxy ajax\r\n\tajax = $.ajax;\r\n\t$.ajax = function( settings ) {\r\n\t\tvar mode = ( \"mode\" in settings ? settings : $.ajaxSettings ).mode,\r\n\t\t\tport = ( \"port\" in settings ? settings : $.ajaxSettings ).port;\r\n\t\tif ( mode === \"abort\" ) {\r\n\t\t\tif ( pendingRequests[ port ] ) {\r\n\t\t\t\tpendingRequests[ port ].abort();\r\n\t\t\t}\r\n\t\t\tpendingRequests[ port ] = ajax.apply( this, arguments );\r\n\t\t\treturn pendingRequests[ port ];\r\n\t\t}\r\n\t\treturn ajax.apply( this, arguments );\r\n\t};\r\n}\r\nreturn $;\r\n}));"]}