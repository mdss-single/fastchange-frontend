{"version":3,"sources":["jquery.fancybox.js"],"names":["window","document","$","undefined","_run","e","target","currentTarget","opts","data","options","items","selector","value","attr","index","active","fancybox","getInstance","preventDefault","current","$orig","is","length","filter","open","fn","error","defaults","loop","margin","gutter","keyboard","arrows","infobar","toolbar","buttons","idleTime","smallBtn","protect","modal","image","preload","ajax","settings","iframe","tpl","css","scrolling","animationEffect","animationDuration","zoomOpacity","transitionEffect","transitionDuration","slideClass","baseClass","baseTpl","spinnerTpl","errorTpl","btnTpl","slideShow","fullScreen","thumbs","close","parentEl","autoFocus","backFocus","trapFocus","autoStart","touch","vertical","momentum","hash","media","speed","hideOnClose","onInit","noop","beforeLoad","afterLoad","beforeShow","afterShow","beforeClose","afterClose","onActivate","onDeactivate","clickContent","event","type","clickSlide","clickOutside","dblclickContent","dblclickSlide","dblclickOutside","mobile","lang","i18n","en","CLOSE","NEXT","PREV","ERROR","PLAY_START","PLAY_STOP","FULL_SCREEN","THUMBS","de","$W","$D","called","isQuery","obj","hasOwnProperty","requestAFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","callback","setTimeout","transitionEnd","t","el","createElement","transitions","transition","OTransition","MozTransition","WebkitTransition","style","forceRedraw","$el","offsetHeight","FancyBox","content","self","this","extend","isArray","id","group","currIndex","parseInt","prevIndex","prevPos","currPos","firstRun","createGroup","$lastFocus","activeElement","blur","slides","init","prototype","testWidth","$container","buttonStr","firstItemOpts","scrollTop","scrollLeft","isMobile","width","addClass","append","each","translate","replace","prependTo","$refs","container","forEach","item","find","remove","trigger","activate","jumpTo","str","arr","match","n","makeArray","i","$item","src","srcParts","isPlainObject","srcset","charAt","$thumb","caption","apply","split","shift","inArray","push","addEvents","removeEvents","on","stopPropagation","previous","next","originalEvent","update","stage","hide","show","instance","isClosing","hasClass","has","focus","keycode","keyCode","which","idleSecondsCounter","isIdle","showControls","idleInterval","setInterval","hideControls","off","clearInterval","duration","pos","slide","canvasWidth","currentPos","transitionProps","groupLen","isSliding","isAnimating","createSlide","updateControls","getTranslate","$slide","isMoved","left","top","forcedDuration","isNumeric","removeClass","loadSlide","stop","Math","round","animate","removeAttr","complete","children","isLoaded","revealContent","isComplete","appendTo","updateSlide","scaleToActual","x","y","imgPos","posX","posY","scaleX","scaleY","$what","$content","canvasHeight","height","newImgWidth","newImgHeight","hasError","updateCursor","SlideShow","isActive","scaleToFit","end","getFitPos","minRatio","imgWidth","imgHeight","min","floor","key","setTranslate","nextWidth","nextHeight","isZoomable","isScaledDown","fitPos","isFunction","rez","canPan","abs","ajaxLoad","isLoading","setImage","setIframe","setContent","setError","showLoading","url","success","textStatus","jqXHR","one","abort","found","temp","pxRatio","windowWidth","devicePixelRatio","innerWidth","map","ret","trim","substring","postfix","sort","a","b","j","thumb","$ghost","setBigImage","$img","$image","clearTimeout","timouts","naturalWidth","naturalHeight","hideLoading","max","readyState","$iframe","Date","getTime","isReady","scrollWidth","$body","$wrap","frameWidth","frameHeight","contents","ignore","contentWindow","documentElement","ceil","outerWidth","outerHeight","innerHeight","prepend","empty","parent","$placeholder","insertAfter","nodeType","html","after","$smallBtn","first","$spinner","button","effect","effectClassName","opacity","start","getThumbPos","slidePos","thumbPos","offset","ownerDocument","element","elementRect","getBoundingClientRect","parentRects","parentElement","every","parentRect","visiblePixelX","right","visiblePixelY","bottom","isElementVisible","parseFloat","siblings","prev","uid","body","d","done","cleanUp","name","args","Array","slice","call","arguments","unshift","force","$caption","isHiddenControls","prop","toggleClass","toggleControls","version","command","all","destroy","createTouch","test","navigator","userAgent","use3d","div","getComputedStyle","getPropertyValue","documentMode","matrix","eq","indexOf","transRez","exec","props","position","transform","to","leaveAnimationName","propertyName","jQuery","format","params","param","youtube","matcher","autoplay","autohide","fs","rel","hd","wmode","enablejsapi","html5","paramPlace","vimeo","show_title","show_byline","show_portrait","fullscreen","api","metacafe","dailymotion","additionalInfos","vine","instagram","gmap_place","gmap_search","urlParams","o","provider","m","p","decodeURIComponent","contentProvider","cancelAFrame","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","pointers","result","touches","changedTouches","pageX","pageY","clientX","clientY","distance","point2","point1","what","sqrt","pow","isClickable","get","onclick","atts","attributes","nodeName","substr","hasScrollbars","overflowY","overflowX","scrollHeight","clientHeight","horizontal","clientWidth","isScrollable","Guestures","$bg","bg","$stage","proxy","ontouchstart","$target","isTouchDevice","startPoints","canTap","startTime","distanceX","distanceY","isPanning","isSwiping","isZooming","sliderStartPos","sliderLastPos","contentStartPos","contentLastPos","centerPointStartX","centerPointStartY","percentageOfImageAtPinchPointX","percentageOfImageAtPinchPointY","startDistanceBetweenFingers","ontouchmove","newPoints","onSwipe","onPan","onZoom","angle","swiping","atan2","PI","inTransition","requestId","newOffsetX","newOffsetY","newPos","limitMovement","newWidth","newHeight","minTranslateX","minTranslateY","maxTranslateX","maxTranslateY","currentOffsetX","currentOffsetY","limitPosition","currentWidth","currentHeight","pinchRatio","translateFromZoomingX","translateFromZoomingY","centerPointEndX","centerPointEndY","translateFromTranslatingX","ontouchend","dMs","panning","zooming","endPoints","onTap","velocityX","velocityY","speedX","endPanning","endZooming","endSwiping","reset","where","tapX","tapY","process","prefix","action","startEvent","tapped","timer","$button","toggle","set","clear","onInit.fb","beforeShow.fb","afterShow.fb","afterKeydown.fb","keypress","beforeClose.fb onDeactivate.fb","hidden","val","fnMap","FullScreen","request","elem","requestFullscreen","ALLOW_KEYBOARD_INPUT","exit","exitFullscreen","isFullscreen","Boolean","fullscreenElement","enabled","fullscreenEnabled","beforeClose.fb","fullscreenchange","FancyThumbs","$grid","$list","isVisible","second","create","list","widthRatio","heightRatio","$parent","thumbWidth","thumbHeight","margin-top","margin-left","Thumbs","parseUrl","location","pop","gallery","join","triggerFromUrl","escapeSelector","shouldCreateHistory","getGalleryID","sel","rcssescape","ch","asCodePoint","charCodeAt","toString","currentHash","timerID","origHash","history","title","pathname","search","replaceState"],"mappings":"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","file":"plugins.js","sourcesContent":["// ==================================================\r\n// fancyBox v3.1.28\r\n//\r\n// Licensed GPLv3 for open source use\r\n// or fancyBox Commercial License for commercial use\r\n//\r\n// http://fancyapps.com/fancybox/\r\n// Copyright 2017 fancyApps\r\n//\r\n// ==================================================\r\n;(function (window, document, $, undefined) {\r\n    'use strict';\r\n\r\n    // If there's no jQuery, fancyBox can't work\r\n    // =========================================\r\n\r\n    if ( !$ ) {\r\n        return;\r\n    }\r\n\r\n    // Check if fancyBox is already initialized\r\n    // ========================================\r\n\r\n    if ( $.fn.fancybox ) {\r\n\r\n        $.error('fancyBox already initialized');\r\n\r\n        return;\r\n    }\r\n\r\n    // Private default settings\r\n    // ========================\r\n\r\n    var defaults = {\r\n\r\n        // Enable infinite gallery navigation\r\n        loop : false,\r\n\r\n        // Space around image, ignored if zoomed-in or viewport width is smaller than 800px\r\n        margin : [44, 0],\r\n\r\n        // Horizontal space between slides\r\n        gutter : 50,\r\n\r\n        // Enable keyboard navigation\r\n        keyboard : true,\r\n\r\n        // Should display navigation arrows at the screen edges\r\n        arrows : true,\r\n\r\n        // Should display infobar (counter and arrows at the top)\r\n        infobar : false,\r\n\r\n        // Should display toolbar (buttons at the top)\r\n        toolbar : true,\r\n\r\n        // What buttons should appear in the top right corner.\r\n        // Buttons will be created using templates from `btnTpl` option\r\n        // and they will be placed into toolbar (class=\"fancybox-toolbar\"` element)\r\n        buttons : [\r\n            'slideShow',\r\n            'fullScreen',\r\n            'thumbs',\r\n            'close'\r\n        ],\r\n\r\n        // Detect \"idle\" time in seconds\r\n        idleTime : 4,\r\n\r\n        // Should display buttons at top right corner of the content\r\n        // If 'auto' - they will be created for content having type 'html', 'inline' or 'ajax'\r\n        // Use template from `btnTpl.smallBtn` for customization\r\n        smallBtn : 'auto',\r\n\r\n        // Disable right-click and use simple image protection for images\r\n        protect : false,\r\n\r\n        // Shortcut to make content \"modal\" - disable keyboard navigtion, hide buttons, etc\r\n        modal : false,\r\n\r\n        image : {\r\n\r\n            // Wait for images to load before displaying\r\n            // Requires predefined image dimensions\r\n            // If 'auto' - will zoom in thumbnail if 'width' and 'height' attributes are found\r\n            preload : \"auto\",\r\n\r\n        },\r\n\r\n        ajax : {\r\n\r\n            // Object containing settings for ajax request\r\n            settings : {\r\n\r\n                // This helps to indicate that request comes from the modal\r\n                // Feel free to change naming\r\n                data : {\r\n                    fancybox : true\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        iframe : {\r\n\r\n            // Iframe template\r\n            tpl : '<iframe id=\"fancybox-frame{rnd}\" name=\"fancybox-frame{rnd}\" class=\"fancybox-iframe\" frameborder=\"0\" vspace=\"0\" hspace=\"0\" webkitAllowFullScreen mozallowfullscreen allowFullScreen allowtransparency=\"true\" src=\"\"></iframe>',\r\n\r\n            // Preload iframe before displaying it\r\n            // This allows to calculate iframe content width and height\r\n            // (note: Due to \"Same Origin Policy\", you can't get cross domain data).\r\n            preload : true,\r\n\r\n            // Custom CSS styling for iframe wrapping element\r\n            // You can use this to set custom iframe dimensions\r\n            css : {},\r\n\r\n            // Iframe tag attributes\r\n            attr : {\r\n                scrolling : 'auto'\r\n            }\r\n\r\n        },\r\n\r\n        // Open/close animation type\r\n        // Possible values:\r\n        //   false            - disable\r\n        //   \"zoom\"           - zoom images from/to thumbnail\r\n        //   \"fade\"\r\n        //   \"zoom-in-out\"\r\n        //\r\n        animationEffect : \"zoom\",\r\n\r\n        // Duration in ms for open/close animation\r\n        animationDuration : 366,\r\n\r\n        // Should image change opacity while zooming\r\n        // If opacity is 'auto', then opacity will be changed if image and thumbnail have different aspect ratios\r\n        zoomOpacity : 'auto',\r\n\r\n        // Transition effect between slides\r\n        //\r\n        // Possible values:\r\n        //   false            - disable\r\n        //   \"fade'\r\n        //   \"slide'\r\n        //   \"circular'\r\n        //   \"tube'\r\n        //   \"zoom-in-out'\r\n        //   \"rotate'\r\n        //\r\n        transitionEffect : \"fade\",\r\n\r\n        // Duration in ms for transition animation\r\n        transitionDuration : 366,\r\n\r\n        // Custom CSS class for slide element\r\n        slideClass : '',\r\n\r\n        // Custom CSS class for layout\r\n        baseClass : '',\r\n\r\n        // Base template for layout\r\n        baseTpl\t:\r\n            '<div class=\"fancybox-container\" role=\"dialog\" tabindex=\"-1\">' +\r\n                '<div class=\"fancybox-bg\"></div>' +\r\n                '<div class=\"fancybox-inner\">' +\r\n                    '<div class=\"fancybox-infobar\">' +\r\n                        '<button data-fancybox-prev title=\"{{PREV}}\" class=\"fancybox-button fancybox-button--left\"></button>' +\r\n                        '<div class=\"fancybox-infobar__body\">' +\r\n                            '<span data-fancybox-index></span>&nbsp;/&nbsp;<span data-fancybox-count></span>' +\r\n                        '</div>' +\r\n                        '<button data-fancybox-next title=\"{{NEXT}}\" class=\"fancybox-button fancybox-button--right\"></button>' +\r\n                    '</div>' +\r\n                    '<div class=\"fancybox-toolbar\">' +\r\n                        '{{BUTTONS}}' +\r\n                    '</div>' +\r\n                    '<div class=\"fancybox-navigation\">' +\r\n                        '<button data-fancybox-prev title=\"{{PREV}}\" class=\"fancybox-arrow fancybox-arrow--left\" />' +\r\n                        '<button data-fancybox-next title=\"{{NEXT}}\" class=\"fancybox-arrow fancybox-arrow--right\" />' +\r\n                    '</div>' +\r\n                    '<div class=\"fancybox-stage\"></div>' +\r\n                    '<div class=\"fancybox-caption-wrap\">' +\r\n                        '<div class=\"fancybox-caption\"></div>' +\r\n                    '</div>' +\r\n                '</div>' +\r\n            '</div>',\r\n\r\n        // Loading indicator template\r\n        spinnerTpl : '<div class=\"fancybox-loading\"></div>',\r\n\r\n        // Error message template\r\n        errorTpl : '<div class=\"fancybox-error\"><p>{{ERROR}}<p></div>',\r\n\r\n        btnTpl : {\r\n            slideShow  : '<button data-fancybox-play class=\"fancybox-button fancybox-button--play\" title=\"{{PLAY_START}}\"></button>',\r\n            fullScreen : '<button data-fancybox-fullscreen class=\"fancybox-button fancybox-button--fullscreen\" title=\"{{FULL_SCREEN}}\"></button>',\r\n            thumbs     : '<button data-fancybox-thumbs class=\"fancybox-button fancybox-button--thumbs\" title=\"{{THUMBS}}\"></button>',\r\n            close      : '<button data-fancybox-close class=\"fancybox-button fancybox-button--close\" title=\"{{CLOSE}}\"></button>',\r\n\r\n            // This small close button will be appended to your html/inline/ajax content by default,\r\n            // if \"smallBtn\" option is not set to false\r\n            smallBtn   : '<button data-fancybox-close class=\"fancybox-close-small\" title=\"{{CLOSE}}\"></button>'\r\n        },\r\n\r\n        // Container is injected into this element\r\n        parentEl : 'body',\r\n\r\n\r\n        // Focus handling\r\n        // ==============\r\n\r\n        // Try to focus on the first focusable element after opening\r\n        autoFocus : true,\r\n\r\n        // Put focus back to active element after closing\r\n        backFocus : true,\r\n\r\n        // Do not let user to focus on element outside modal content\r\n        trapFocus : true,\r\n\r\n\r\n        // Module specific options\r\n        // =======================\r\n\r\n        fullScreen : {\r\n            autoStart : false,\r\n        },\r\n\r\n        // Set `touch: false` to disable dragging/swiping\r\n        touch : {\r\n            vertical : true,  // Allow to drag content vertically\r\n            momentum : true   // Continue movement after releasing mouse/touch when panning\r\n        },\r\n\r\n        // Hash value when initializing manually,\r\n        // set `false` to disable hash change\r\n        hash : null,\r\n\r\n        // Customize or add new media types\r\n        // Example:\r\n        /*\r\n        media : {\r\n            youtube : {\r\n                params : {\r\n                    autoplay : 0\r\n                }\r\n            }\r\n        }\r\n        */\r\n        media : {},\r\n\r\n        slideShow : {\r\n            autoStart : false,\r\n            speed     : 4000\r\n        },\r\n\r\n        thumbs : {\r\n            autoStart   : false,   // Display thumbnails on opening\r\n            hideOnClose : true     // Hide thumbnail grid when closing animation starts\r\n        },\r\n\r\n        // Callbacks\r\n        //==========\r\n\r\n        // See Documentation/API/Events for more information\r\n        // Example:\r\n        /*\r\n            afterShow: function( instance, current ) {\r\n                 console.info( 'Clicked element:' );\r\n                 console.info( current.opts.$orig );\r\n            }\r\n        */\r\n\r\n        onInit       : $.noop,  // When instance has been initialized\r\n\r\n        beforeLoad   : $.noop,  // Before the content of a slide is being loaded\r\n        afterLoad    : $.noop,  // When the content of a slide is done loading\r\n\r\n        beforeShow   : $.noop,  // Before open animation starts\r\n        afterShow    : $.noop,  // When content is done loading and animating\r\n\r\n        beforeClose  : $.noop,  // Before the instance attempts to close. Return false to cancel the close.\r\n        afterClose   : $.noop,  // After instance has been closed\r\n\r\n        onActivate   : $.noop,  // When instance is brought to front\r\n        onDeactivate : $.noop,  // When other instance has been activated\r\n\r\n\r\n        // Interaction\r\n        // ===========\r\n\r\n        // Use options below to customize taken action when user clicks or double clicks on the fancyBox area,\r\n        // each option can be string or method that returns value.\r\n        //\r\n        // Possible values:\r\n        //   \"close\"           - close instance\r\n        //   \"next\"            - move to next gallery item\r\n        //   \"nextOrClose\"     - move to next gallery item or close if gallery has only one item\r\n        //   \"toggleControls\"  - show/hide controls\r\n        //   \"zoom\"            - zoom image (if loaded)\r\n        //   false             - do nothing\r\n\r\n        // Clicked on the content\r\n        clickContent : function( current, event ) {\r\n            return current.type === 'image' ? 'zoom' : false;\r\n        },\r\n\r\n        // Clicked on the slide\r\n        clickSlide : 'close',\r\n\r\n        // Clicked on the background (backdrop) element\r\n        clickOutside : 'close',\r\n\r\n        // Same as previous two, but for double click\r\n        dblclickContent : false,\r\n        dblclickSlide   : false,\r\n        dblclickOutside : false,\r\n\r\n\r\n        // Custom options when mobile device is detected\r\n        // =============================================\r\n\r\n        mobile : {\r\n            clickContent : function( current, event ) {\r\n                return current.type === 'image' ? 'toggleControls' : false;\r\n            },\r\n            clickSlide : function( current, event ) {\r\n                return current.type === 'image' ? 'toggleControls' : 'close';\r\n            },\r\n            dblclickContent : function( current, event ) {\r\n                return current.type === 'image' ? 'zoom' : false;\r\n            },\r\n            dblclickSlide : function( current, event ) {\r\n                return current.type === 'image' ? 'zoom' : false;\r\n            }\r\n        },\r\n\r\n\r\n        // Internationalization\r\n        // ============\r\n\r\n        lang : 'en',\r\n        i18n : {\r\n            'en' : {\r\n                CLOSE       : 'Close',\r\n                NEXT        : 'Next',\r\n                PREV        : 'Previous',\r\n                ERROR       : 'The requested content cannot be loaded. <br/> Please try again later.',\r\n                PLAY_START  : 'Start slideshow',\r\n                PLAY_STOP   : 'Pause slideshow',\r\n                FULL_SCREEN : 'Full screen',\r\n                THUMBS      : 'Thumbnails'\r\n            },\r\n            'de' : {\r\n                CLOSE       : 'Schliessen',\r\n                NEXT        : 'Weiter',\r\n                PREV        : 'Zurck',\r\n                ERROR       : 'Die angeforderten Daten konnten nicht geladen werden. <br/> Bitte versuchen Sie es spter nochmal.',\r\n                PLAY_START  : 'Diaschau starten',\r\n                PLAY_STOP   : 'Diaschau beenden',\r\n                FULL_SCREEN : 'Vollbild',\r\n                THUMBS      : 'Vorschaubilder'\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    // Few useful variables and methods\r\n    // ================================\r\n\r\n    var $W = $(window);\r\n    var $D = $(document);\r\n\r\n    var called = 0;\r\n\r\n\r\n    // Check if an object is a jQuery object and not a native JavaScript object\r\n    // ========================================================================\r\n\r\n    var isQuery = function ( obj ) {\r\n        return obj && obj.hasOwnProperty && obj instanceof $;\r\n    };\r\n\r\n\r\n    // Handle multiple browsers for \"requestAnimationFrame\" and \"cancelAnimationFrame\"\r\n    // ===============================================================================\r\n\r\n    var requestAFrame = (function () {\r\n        return window.requestAnimationFrame ||\r\n                window.webkitRequestAnimationFrame ||\r\n                window.mozRequestAnimationFrame ||\r\n                window.oRequestAnimationFrame ||\r\n                // if all else fails, use setTimeout\r\n                function (callback) {\r\n                    return window.setTimeout(callback, 1000 / 60);\r\n                };\r\n    })();\r\n\r\n\r\n    // Detect the supported transition-end event property name\r\n    // =======================================================\r\n\r\n    var transitionEnd = (function () {\r\n        var t, el = document.createElement(\"fakeelement\");\r\n\r\n        var transitions = {\r\n            \"transition\"      : \"transitionend\",\r\n            \"OTransition\"     : \"oTransitionEnd\",\r\n            \"MozTransition\"   : \"transitionend\",\r\n            \"WebkitTransition\": \"webkitTransitionEnd\"\r\n        };\r\n\r\n        for (t in transitions) {\r\n            if (el.style[t] !== undefined){\r\n                return transitions[t];\r\n            }\r\n        }\r\n    })();\r\n\r\n\r\n    // Force redraw on an element.\r\n    // This helps in cases where the browser doesn't redraw an updated element properly.\r\n    // =================================================================================\r\n\r\n    var forceRedraw = function( $el ) {\r\n        return ( $el && $el.length && $el[0].offsetHeight );\r\n    };\r\n\r\n\r\n    // Class definition\r\n    // ================\r\n\r\n    var FancyBox = function( content, opts, index ) {\r\n        var self = this;\r\n\r\n        self.opts  = $.extend( true, { index : index }, defaults, opts || {} );\r\n\r\n        // Exclude buttons option from deep merging\r\n        if ( opts && $.isArray( opts.buttons ) ) {\r\n            self.opts.buttons = opts.buttons;\r\n        }\r\n\r\n        self.id    = self.opts.id || ++called;\r\n        self.group = [];\r\n\r\n        self.currIndex = parseInt( self.opts.index, 10 ) || 0;\r\n        self.prevIndex = null;\r\n\r\n        self.prevPos = null;\r\n        self.currPos = 0;\r\n\r\n        self.firstRun = null;\r\n\r\n        // Create group elements from original item collection\r\n        self.createGroup( content );\r\n\r\n        if ( !self.group.length ) {\r\n            return;\r\n        }\r\n\r\n        // Save last active element and current scroll position\r\n        self.$lastFocus = $(document.activeElement).blur();\r\n\r\n        // Collection of gallery objects\r\n        self.slides = {};\r\n\r\n        self.init( content );\r\n\r\n    };\r\n\r\n    $.extend(FancyBox.prototype, {\r\n\r\n        // Create DOM structure\r\n        // ====================\r\n\r\n        init : function() {\r\n            var self = this;\r\n\r\n            var testWidth, $container, buttonStr;\r\n\r\n            var firstItemOpts = self.group[ self.currIndex ].opts;\r\n\r\n            self.scrollTop  = $D.scrollTop();\r\n            self.scrollLeft = $D.scrollLeft();\r\n\r\n\r\n            // Hide scrollbars\r\n            // ===============\r\n\r\n            if ( !$.fancybox.getInstance() && !$.fancybox.isMobile && $( 'body' ).css('overflow') !== 'hidden' ) {\r\n                testWidth = $( 'body' ).width();\r\n\r\n                $( 'html' ).addClass( 'fancybox-enabled' );\r\n\r\n                // Compare body width after applying \"overflow: hidden\"\r\n                testWidth = $( 'body' ).width() - testWidth;\r\n\r\n                // If width has changed - compensate missing scrollbars by adding right margin\r\n                if ( testWidth > 1 ) {\r\n                    $( 'head' ).append( '<style id=\"fancybox-style-noscroll\" type=\"text/css\">.compensate-for-scrollbar, .fancybox-enabled body { margin-right: ' + testWidth + 'px; }</style>' );\r\n                }\r\n            }\r\n\r\n\r\n            // Build html markup and set references\r\n            // ====================================\r\n\r\n            // Build html code for buttons and insert into main template\r\n            buttonStr = '';\r\n\r\n            $.each( firstItemOpts.buttons, function( index, value ) {\r\n                buttonStr += ( firstItemOpts.btnTpl[ value ] || '' );\r\n            });\r\n\r\n            // Create markup from base template, it will be initially hidden to\r\n            // avoid unnecessary work like painting while initializing is not complete\r\n            $container = $( self.translate( self, firstItemOpts.baseTpl.replace( '\\{\\{BUTTONS\\}\\}', buttonStr ) ) )\r\n                .addClass( 'fancybox-is-hidden' )\r\n                .attr('id', 'fancybox-container-' + self.id)\r\n                .addClass( firstItemOpts.baseClass )\r\n                .data( 'FancyBox', self )\r\n                .prependTo( firstItemOpts.parentEl );\r\n\r\n            // Create object holding references to jQuery wrapped nodes\r\n            self.$refs = {\r\n                container : $container\r\n            };\r\n\r\n            [ 'bg', 'inner', 'infobar', 'toolbar', 'stage', 'caption' ].forEach(function(item) {\r\n                self.$refs[ item ] = $container.find( '.fancybox-' + item );\r\n            });\r\n\r\n            // Check for redundant elements\r\n            if ( !firstItemOpts.arrows || self.group.length < 2 ) {\r\n                $container.find('.fancybox-navigation').remove();\r\n            }\r\n\r\n            if ( !firstItemOpts.infobar ) {\r\n                self.$refs.infobar.remove();\r\n            }\r\n\r\n            if ( !firstItemOpts.toolbar ) {\r\n                self.$refs.toolbar.remove();\r\n            }\r\n\r\n            self.trigger( 'onInit' );\r\n\r\n            // Bring to front and enable events\r\n            self.activate();\r\n\r\n            // Build slides, load and reveal content\r\n            self.jumpTo( self.currIndex );\r\n        },\r\n\r\n\r\n        // Simple i18n support - replaces object keys found in template\r\n        // with corresponding values\r\n        // ============================================================\r\n\r\n        translate : function( obj, str ) {\r\n            var arr = obj.opts.i18n[ obj.opts.lang ];\r\n\r\n            return str.replace(/\\{\\{(\\w+)\\}\\}/g, function(match, n) {\r\n                var value = arr[n];\r\n\r\n                if ( value === undefined ) {\r\n                    return match;\r\n                }\r\n\r\n                return value;\r\n            });\r\n        },\r\n\r\n        // Create array of gally item objects\r\n        // Check if each object has valid type and content\r\n        // ===============================================\r\n\r\n        createGroup : function ( content ) {\r\n            var self  = this;\r\n            var items = $.makeArray( content );\r\n\r\n            $.each(items, function( i, item ) {\r\n                var obj  = {},\r\n                    opts = {},\r\n                    data = [],\r\n                    $item,\r\n                    type,\r\n                    src,\r\n                    srcParts;\r\n\r\n                // Step 1 - Make sure we have an object\r\n                // ====================================\r\n\r\n                if ( $.isPlainObject( item ) ) {\r\n\r\n                    // We probably have manual usage here, something like\r\n                    // $.fancybox.open( [ { src : \"image.jpg\", type : \"image\" } ] )\r\n\r\n                    obj  = item;\r\n                    opts = item.opts || item;\r\n\r\n                } else if ( $.type( item ) === 'object' && $( item ).length ) {\r\n\r\n                    // Here we propbably have jQuery collection returned by some selector\r\n\r\n                    $item = $( item );\r\n                    data  = $item.data();\r\n\r\n                    opts = 'options' in data ? data.options : {};\r\n                    opts = $.type( opts ) === 'object' ? opts : {};\r\n\r\n                    obj.src  = 'src' in data ? data.src : ( opts.src || $item.attr( 'href' ) );\r\n\r\n                    [ 'width', 'height', 'thumb', 'type', 'filter' ].forEach(function(item) {\r\n                        if ( item in data ) {\r\n                            opts[ item ] = data[ item ];\r\n                        }\r\n                    });\r\n\r\n                    if ( 'srcset' in data ) {\r\n                        opts.image = { srcset : data.srcset };\r\n                    }\r\n\r\n                    opts.$orig = $item;\r\n\r\n                    if ( !obj.type && !obj.src ) {\r\n                        obj.type = 'inline';\r\n                        obj.src  = item;\r\n                    }\r\n\r\n                } else {\r\n\r\n                    // Assume we have a simple html code, for example:\r\n                    // $.fancybox.open( '<div><h1>Hi!</h1></div>' );\r\n\r\n                    obj = {\r\n                        type : 'html',\r\n                        src  : item + ''\r\n                    };\r\n\r\n                }\r\n\r\n                // Each gallery object has full collection of options\r\n                obj.opts = $.extend( true, {}, self.opts, opts );\r\n\r\n                if ( $.fancybox.isMobile ) {\r\n                    obj.opts = $.extend( true, {}, obj.opts, obj.opts.mobile );\r\n                }\r\n\r\n\r\n                // Step 2 - Make sure we have content type, if not - try to guess\r\n                // ==============================================================\r\n\r\n                type = obj.type || obj.opts.type;\r\n                src  = obj.src || '';\r\n\r\n                if ( !type && src ) {\r\n                    if ( src.match(/(^data:image\\/[a-z0-9+\\/=]*,)|(\\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\\?|#).*)?$)/i) ) {\r\n                        type = 'image';\r\n\r\n                    } else if ( src.match(/\\.(pdf)((\\?|#).*)?$/i) ) {\r\n                        type = 'pdf';\r\n\r\n                    } else if ( src.charAt(0) === '#' ) {\r\n                        type = 'inline';\r\n                    }\r\n                }\r\n\r\n                obj.type = type;\r\n\r\n\r\n                // Step 3 - Some adjustments\r\n                // =========================\r\n\r\n                obj.index = self.group.length;\r\n\r\n                // Check if $orig and $thumb objects exist\r\n                if ( obj.opts.$orig && !obj.opts.$orig.length ) {\r\n                    delete obj.opts.$orig;\r\n                }\r\n\r\n                if ( !obj.opts.$thumb && obj.opts.$orig ) {\r\n                    obj.opts.$thumb = obj.opts.$orig.find( 'img:first' );\r\n                }\r\n\r\n                if ( obj.opts.$thumb && !obj.opts.$thumb.length ) {\r\n                    delete obj.opts.$thumb;\r\n                }\r\n\r\n                // Caption is a \"special\" option, it can be passed as a method\r\n                if ( $.type( obj.opts.caption ) === 'function' ) {\r\n                    obj.opts.caption = obj.opts.caption.apply( item, [ self, obj ] );\r\n\r\n                } else if ( 'caption' in data ) {\r\n                    obj.opts.caption = data.caption;\r\n                }\r\n\r\n                // Make sure we have caption as a string\r\n                obj.opts.caption = obj.opts.caption === undefined ? '' : obj.opts.caption + '';\r\n\r\n                // Check if url contains \"filter\" used to filter the content\r\n                // Example: \"ajax.html #something\"\r\n                if ( type === 'ajax' ) {\r\n                    srcParts = src.split(/\\s+/, 2);\r\n\r\n                    if ( srcParts.length > 1 ) {\r\n                        obj.src = srcParts.shift();\r\n\r\n                        obj.opts.filter = srcParts.shift();\r\n                    }\r\n                }\r\n\r\n                if ( obj.opts.smallBtn == 'auto' ) {\r\n\r\n                    if ( $.inArray( type, ['html', 'inline', 'ajax'] ) > -1 ) {\r\n                        obj.opts.toolbar  = false;\r\n                        obj.opts.smallBtn = true;\r\n\r\n                    } else {\r\n                        obj.opts.smallBtn = false;\r\n                    }\r\n\r\n                }\r\n\r\n                // If the type is \"pdf\", then simply load file into iframe\r\n                if ( type === 'pdf' ) {\r\n                    obj.type = 'iframe';\r\n\r\n                    obj.opts.iframe.preload = false;\r\n                }\r\n\r\n                // Hide all buttons and disable interactivity for modal items\r\n                if ( obj.opts.modal ) {\r\n\r\n                    obj.opts = $.extend(true, obj.opts, {\r\n                        // Remove buttons\r\n                        infobar : 0,\r\n                        toolbar : 0,\r\n\r\n                        smallBtn : 0,\r\n\r\n                        // Disable keyboard navigation\r\n                        keyboard : 0,\r\n\r\n                        // Disable some modules\r\n                        slideShow  : 0,\r\n                        fullScreen : 0,\r\n                        thumbs     : 0,\r\n                        touch      : 0,\r\n\r\n                        // Disable click event handlers\r\n                        clickContent    : false,\r\n                        clickSlide      : false,\r\n                        clickOutside    : false,\r\n                        dblclickContent : false,\r\n                        dblclickSlide   : false,\r\n                        dblclickOutside : false\r\n                    });\r\n\r\n                }\r\n\r\n                // Step 4 - Add processed object to group\r\n                // ======================================\r\n\r\n                self.group.push( obj );\r\n\r\n            });\r\n\r\n        },\r\n\r\n\r\n        // Attach an event handler functions for:\r\n        //   - navigation buttons\r\n        //   - browser scrolling, resizing;\r\n        //   - focusing\r\n        //   - keyboard\r\n        //   - detect idle\r\n        // ======================================\r\n\r\n        addEvents : function() {\r\n            var self = this;\r\n\r\n            self.removeEvents();\r\n\r\n            // Make navigation elements clickable\r\n            self.$refs.container.on('click.fb-close', '[data-fancybox-close]', function(e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n\r\n                self.close( e );\r\n\r\n            }).on( 'click.fb-prev touchend.fb-prev', '[data-fancybox-prev]', function(e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n\r\n                self.previous();\r\n\r\n            }).on( 'click.fb-next touchend.fb-next', '[data-fancybox-next]', function(e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n\r\n                self.next();\r\n\r\n            });\r\n\r\n\r\n            // Handle page scrolling and browser resizing\r\n            $W.on('orientationchange.fb resize.fb', function(e) {\r\n\r\n                if ( e && e.originalEvent && e.originalEvent.type === \"resize\" ) {\r\n\r\n                    requestAFrame(function() {\r\n                        self.update();\r\n                    });\r\n\r\n                } else {\r\n\r\n                    self.$refs.stage.hide();\r\n\r\n                    setTimeout(function() {\r\n                        self.$refs.stage.show();\r\n\r\n                        self.update();\r\n                    }, 500);\r\n\r\n                }\r\n\r\n            });\r\n\r\n            // Trap keyboard focus inside of the modal, so the user does not accidentally tab outside of the modal\r\n            // (a.k.a. \"escaping the modal\")\r\n            $D.on('focusin.fb', function(e) {\r\n                var instance = $.fancybox ? $.fancybox.getInstance() : null;\r\n\r\n                if ( instance.isClosing || !instance.current || !instance.current.opts.trapFocus || $( e.target ).hasClass( 'fancybox-container' ) || $( e.target ).is( document ) ) {\r\n                    return;\r\n                }\r\n\r\n                if ( instance && $( e.target ).css( 'position' ) !== 'fixed' && !instance.$refs.container.has( e.target ).length ) {\r\n                    e.stopPropagation();\r\n\r\n                    instance.focus();\r\n\r\n                    // Sometimes page gets scrolled, set it back\r\n                    $W.scrollTop( self.scrollTop ).scrollLeft( self.scrollLeft );\r\n                }\r\n            });\r\n\r\n\r\n            // Enable keyboard navigation\r\n            $D.on('keydown.fb', function (e) {\r\n                var current = self.current,\r\n                    keycode = e.keyCode || e.which;\r\n\r\n                if ( !current || !current.opts.keyboard ) {\r\n                    return;\r\n                }\r\n\r\n                if ( $(e.target).is('input') || $(e.target).is('textarea') ) {\r\n                    return;\r\n                }\r\n\r\n                // Backspace and Esc keys\r\n                if ( keycode === 8 || keycode === 27 ) {\r\n                    e.preventDefault();\r\n\r\n                    self.close( e );\r\n\r\n                    return;\r\n                }\r\n\r\n                // Left arrow and Up arrow\r\n                if ( keycode === 37 || keycode === 38 ) {\r\n                    e.preventDefault();\r\n\r\n                    self.previous();\r\n\r\n                    return;\r\n                }\r\n\r\n                // Righ arrow and Down arrow\r\n                if ( keycode === 39 || keycode === 40 ) {\r\n                    e.preventDefault();\r\n\r\n                    self.next();\r\n\r\n                    return;\r\n                }\r\n\r\n                self.trigger('afterKeydown', e, keycode);\r\n            });\r\n\r\n\r\n            // Hide controls after some inactivity period\r\n            if ( self.group[ self.currIndex ].opts.idleTime ) {\r\n                self.idleSecondsCounter = 0;\r\n\r\n                $D.on('mousemove.fb-idle mouseenter.fb-idle mouseleave.fb-idle mousedown.fb-idle touchstart.fb-idle touchmove.fb-idle scroll.fb-idle keydown.fb-idle', function() {\r\n                    self.idleSecondsCounter = 0;\r\n\r\n                    if ( self.isIdle ) {\r\n                        self.showControls();\r\n                    }\r\n\r\n                    self.isIdle = false;\r\n                });\r\n\r\n                self.idleInterval = window.setInterval(function() {\r\n\r\n                    self.idleSecondsCounter++;\r\n\r\n                    if ( self.idleSecondsCounter >= self.group[ self.currIndex ].opts.idleTime ) {\r\n                        self.isIdle = true;\r\n                        self.idleSecondsCounter = 0;\r\n\r\n                        self.hideControls();\r\n                    }\r\n\r\n                }, 1000);\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Remove events added by the core\r\n        // ===============================\r\n\r\n        removeEvents : function () {\r\n            var self = this;\r\n\r\n            $W.off( 'orientationchange.fb resize.fb' );\r\n            $D.off( 'focusin.fb keydown.fb .fb-idle' );\r\n\r\n            this.$refs.container.off( '.fb-close .fb-prev .fb-next' );\r\n\r\n            if ( self.idleInterval ) {\r\n                window.clearInterval( self.idleInterval );\r\n\r\n                self.idleInterval = null;\r\n            }\r\n        },\r\n\r\n\r\n        // Change to previous gallery item\r\n        // ===============================\r\n\r\n        previous : function( duration ) {\r\n            return this.jumpTo( this.currPos - 1, duration );\r\n        },\r\n\r\n\r\n        // Change to next gallery item\r\n        // ===========================\r\n\r\n        next : function( duration ) {\r\n            return this.jumpTo( this.currPos + 1, duration );\r\n        },\r\n\r\n\r\n        // Switch to selected gallery item\r\n        // ===============================\r\n\r\n        jumpTo : function ( pos, duration, slide ) {\r\n            var self = this,\r\n                firstRun,\r\n                loop,\r\n                current,\r\n                previous,\r\n                canvasWidth,\r\n                currentPos,\r\n                transitionProps;\r\n\r\n            var groupLen = self.group.length;\r\n\r\n            if ( self.isSliding || self.isClosing || ( self.isAnimating && self.firstRun ) ) {\r\n                return;\r\n            }\r\n\r\n            pos  = parseInt( pos, 10 );\r\n            loop = self.current ? self.current.opts.loop : self.opts.loop;\r\n\r\n            if ( !loop && ( pos < 0 || pos >= groupLen ) ) {\r\n                return false;\r\n            }\r\n\r\n            firstRun = self.firstRun = ( self.firstRun === null );\r\n\r\n            if ( groupLen < 2 && !firstRun && !!self.isSliding ) {\r\n                return;\r\n            }\r\n\r\n            previous = self.current;\r\n\r\n            self.prevIndex = self.currIndex;\r\n            self.prevPos   = self.currPos;\r\n\r\n            // Create slides\r\n            current = self.createSlide( pos );\r\n\r\n            if ( groupLen > 1 ) {\r\n                if ( loop || current.index > 0 ) {\r\n                    self.createSlide( pos - 1 );\r\n                }\r\n\r\n                if ( loop || current.index < groupLen - 1 ) {\r\n                    self.createSlide( pos + 1 );\r\n                }\r\n            }\r\n\r\n            self.current   = current;\r\n            self.currIndex = current.index;\r\n            self.currPos   = current.pos;\r\n\r\n            self.trigger( 'beforeShow', firstRun );\r\n\r\n            self.updateControls();\r\n\r\n            currentPos = $.fancybox.getTranslate( current.$slide );\r\n\r\n            current.isMoved        = ( currentPos.left !== 0 || currentPos.top !== 0 ) && !current.$slide.hasClass( 'fancybox-animated' );\r\n            current.forcedDuration = undefined;\r\n\r\n            if ( $.isNumeric( duration ) ) {\r\n                current.forcedDuration = duration;\r\n            } else {\r\n                duration = current.opts[ firstRun ? 'animationDuration' : 'transitionDuration' ];\r\n            }\r\n\r\n            duration = parseInt( duration, 10 );\r\n\r\n            // Fresh start - reveal container, current slide and start loading content\r\n            if ( firstRun ) {\r\n\r\n                if ( current.opts.animationEffect && duration ) {\r\n                    self.$refs.container.css( 'transition-duration', duration + 'ms' );\r\n                }\r\n\r\n                self.$refs.container.removeClass( 'fancybox-is-hidden' );\r\n\r\n                forceRedraw( self.$refs.container );\r\n\r\n                self.$refs.container.addClass( 'fancybox-is-open' );\r\n\r\n                // Make first slide visible (to display loading icon, if needed)\r\n                current.$slide.addClass( 'fancybox-slide--current' );\r\n\r\n                self.loadSlide( current );\r\n\r\n                self.preload();\r\n\r\n                return;\r\n            }\r\n\r\n            // Clean up\r\n            $.each(self.slides, function( index, slide ) {\r\n                $.fancybox.stop( slide.$slide );\r\n            });\r\n\r\n            // Make current that slide is visible even if content is still loading\r\n            current.$slide.removeClass( 'fancybox-slide--next fancybox-slide--previous' ).addClass( 'fancybox-slide--current' );\r\n\r\n            // If slides have been dragged, animate them to correct position\r\n            if ( current.isMoved ) {\r\n                canvasWidth = Math.round( current.$slide.width() );\r\n\r\n                $.each(self.slides, function( index, slide ) {\r\n                    var pos = slide.pos - current.pos;\r\n\r\n                    $.fancybox.animate( slide.$slide, {\r\n                        top  : 0,\r\n                        left : ( pos * canvasWidth ) + ( pos * slide.opts.gutter )\r\n                    }, duration, function() {\r\n\r\n                        slide.$slide.removeAttr('style').removeClass( 'fancybox-slide--next fancybox-slide--previous' );\r\n\r\n                        if ( slide.pos === self.currPos ) {\r\n                            current.isMoved = false;\r\n\r\n                            self.complete();\r\n                        }\r\n                    });\r\n                });\r\n\r\n            } else {\r\n                self.$refs.stage.children().removeAttr( 'style' );\r\n            }\r\n\r\n            // Start transition that reveals current content\r\n            // or wait when it will be loaded\r\n\r\n            if ( current.isLoaded ) {\r\n                self.revealContent( current );\r\n\r\n            } else {\r\n                self.loadSlide( current );\r\n            }\r\n\r\n            self.preload();\r\n\r\n            if ( previous.pos === current.pos ) {\r\n                return;\r\n            }\r\n\r\n            // Handle previous slide\r\n            // =====================\r\n\r\n            transitionProps = 'fancybox-slide--' + ( previous.pos > current.pos ? 'next' : 'previous' );\r\n\r\n            previous.$slide.removeClass( 'fancybox-slide--complete fancybox-slide--current fancybox-slide--next fancybox-slide--previous' );\r\n\r\n            previous.isComplete = false;\r\n\r\n            if ( !duration || ( !current.isMoved && !current.opts.transitionEffect ) ) {\r\n                return;\r\n            }\r\n\r\n            if ( current.isMoved ) {\r\n                previous.$slide.addClass( transitionProps );\r\n\r\n            } else {\r\n\r\n                transitionProps = 'fancybox-animated ' + transitionProps + ' fancybox-fx-' + current.opts.transitionEffect;\r\n\r\n                $.fancybox.animate( previous.$slide, transitionProps, duration, function() {\r\n                    previous.$slide.removeClass( transitionProps ).removeAttr( 'style' );\r\n                });\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Create new \"slide\" element\r\n        // These are gallery items  that are actually added to DOM\r\n        // =======================================================\r\n\r\n        createSlide : function( pos ) {\r\n\r\n            var self = this;\r\n            var $slide;\r\n            var index;\r\n\r\n            index = pos % self.group.length;\r\n            index = index < 0 ? self.group.length + index : index;\r\n\r\n            if ( !self.slides[ pos ] && self.group[ index ] ) {\r\n                $slide = $('<div class=\"fancybox-slide\"></div>').appendTo( self.$refs.stage );\r\n\r\n                self.slides[ pos ] = $.extend( true, {}, self.group[ index ], {\r\n                    pos      : pos,\r\n                    $slide   : $slide,\r\n                    isLoaded : false,\r\n                });\r\n\r\n                self.updateSlide( self.slides[ pos ] );\r\n            }\r\n\r\n            return self.slides[ pos ];\r\n        },\r\n\r\n\r\n        // Scale image to the actual size of the image\r\n        // ===========================================\r\n\r\n        scaleToActual : function( x, y, duration ) {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var $what   = current.$content;\r\n\r\n            var imgPos, posX, posY, scaleX, scaleY;\r\n\r\n            var canvasWidth  = parseInt( current.$slide.width(), 10 );\r\n            var canvasHeight = parseInt( current.$slide.height(), 10 );\r\n\r\n            var newImgWidth  = current.width;\r\n            var newImgHeight = current.height;\r\n\r\n            if ( !( current.type == 'image' && !current.hasError) || !$what || self.isAnimating) {\r\n                return;\r\n            }\r\n\r\n            $.fancybox.stop( $what );\r\n\r\n            self.isAnimating = true;\r\n\r\n            x = x === undefined ? canvasWidth  * 0.5  : x;\r\n            y = y === undefined ? canvasHeight * 0.5  : y;\r\n\r\n            imgPos = $.fancybox.getTranslate( $what );\r\n\r\n            scaleX  = newImgWidth  / imgPos.width;\r\n            scaleY  = newImgHeight / imgPos.height;\r\n\r\n            // Get center position for original image\r\n            posX = ( canvasWidth * 0.5  - newImgWidth * 0.5 );\r\n            posY = ( canvasHeight * 0.5 - newImgHeight * 0.5 );\r\n\r\n            // Make sure image does not move away from edges\r\n            if ( newImgWidth > canvasWidth ) {\r\n                posX = imgPos.left * scaleX - ( ( x * scaleX ) - x );\r\n\r\n                if ( posX > 0 ) {\r\n                    posX = 0;\r\n                }\r\n\r\n                if ( posX <  canvasWidth - newImgWidth ) {\r\n                    posX = canvasWidth - newImgWidth;\r\n                }\r\n            }\r\n\r\n            if ( newImgHeight > canvasHeight) {\r\n                posY = imgPos.top  * scaleY - ( ( y * scaleY ) - y );\r\n\r\n                if ( posY > 0 ) {\r\n                    posY = 0;\r\n                }\r\n\r\n                if ( posY <  canvasHeight - newImgHeight ) {\r\n                    posY = canvasHeight - newImgHeight;\r\n                }\r\n            }\r\n\r\n            self.updateCursor( newImgWidth, newImgHeight );\r\n\r\n            $.fancybox.animate( $what, {\r\n                top    : posY,\r\n                left   : posX,\r\n                scaleX : scaleX,\r\n                scaleY : scaleY\r\n            }, duration || 330, function() {\r\n                self.isAnimating = false;\r\n            });\r\n\r\n            // Stop slideshow\r\n            if ( self.SlideShow && self.SlideShow.isActive ) {\r\n                self.SlideShow.stop();\r\n            }\r\n        },\r\n\r\n\r\n        // Scale image to fit inside parent element\r\n        // ========================================\r\n\r\n        scaleToFit : function( duration ) {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var $what   = current.$content;\r\n            var end;\r\n\r\n            if ( !( current.type == 'image' && !current.hasError) || !$what || self.isAnimating ) {\r\n                return;\r\n            }\r\n\r\n            $.fancybox.stop( $what );\r\n\r\n            self.isAnimating = true;\r\n\r\n            end = self.getFitPos( current );\r\n\r\n            self.updateCursor( end.width, end.height );\r\n\r\n            $.fancybox.animate( $what, {\r\n                top    : end.top,\r\n                left   : end.left,\r\n                scaleX : end.width  / $what.width(),\r\n                scaleY : end.height / $what.height()\r\n            }, duration || 330, function() {\r\n                self.isAnimating = false;\r\n            });\r\n\r\n        },\r\n\r\n        // Calculate image size to fit inside viewport\r\n        // ===========================================\r\n\r\n        getFitPos : function( slide ) {\r\n            var self  = this;\r\n            var $what = slide.$content;\r\n\r\n            var imgWidth  = slide.width;\r\n            var imgHeight = slide.height;\r\n\r\n            var margin = slide.opts.margin;\r\n\r\n            var canvasWidth, canvasHeight, minRatio, width, height;\r\n\r\n            if ( !$what || !$what.length || ( !imgWidth && !imgHeight) ) {\r\n                return false;\r\n            }\r\n\r\n            // Convert \"margin to CSS style: [ top, right, bottom, left ]\r\n            if ( $.type( margin ) === \"number\" ) {\r\n                margin = [ margin, margin ];\r\n            }\r\n\r\n            if ( margin.length == 2 ) {\r\n                margin = [ margin[0], margin[1], margin[0], margin[1] ];\r\n            }\r\n\r\n            if ( $W.width() < 800 ) {\r\n                margin = [ 0, 0, 0, 0 ];\r\n            }\r\n\r\n            // We can not use $slide width here, because it can have different diemensions while in transiton\r\n            canvasWidth  = parseInt( self.$refs.stage.width(), 10 )  - ( margin[ 1 ] + margin[ 3 ] );\r\n            canvasHeight = parseInt( self.$refs.stage.height(), 10 ) - ( margin[ 0 ] + margin[ 2 ] );\r\n\r\n            minRatio = Math.min(1, canvasWidth / imgWidth, canvasHeight / imgHeight );\r\n\r\n            width  = Math.floor( minRatio * imgWidth );\r\n            height = Math.floor( minRatio * imgHeight );\r\n\r\n            // Use floor rounding to make sure it really fits\r\n            return {\r\n                top    : Math.floor( ( canvasHeight - height ) * 0.5 ) + margin[ 0 ],\r\n                left   : Math.floor( ( canvasWidth  - width )  * 0.5 ) + margin[ 3 ],\r\n                width  : width,\r\n                height : height\r\n            };\r\n\r\n        },\r\n\r\n\r\n        // Update position and content of all slides\r\n        // =========================================\r\n\r\n        update : function() {\r\n\r\n            var self = this;\r\n\r\n            $.each( self.slides, function( key, slide ) {\r\n                self.updateSlide( slide );\r\n            });\r\n\r\n        },\r\n\r\n\r\n        // Update slide position and scale content to fit\r\n        // ==============================================\r\n\r\n        updateSlide : function( slide ) {\r\n\r\n            var self  = this;\r\n            var $what = slide.$content;\r\n\r\n            if ( $what && ( slide.width || slide.height ) ) {\r\n                $.fancybox.stop( $what );\r\n\r\n                $.fancybox.setTranslate( $what, self.getFitPos( slide ) );\r\n\r\n                if ( slide.pos === self.currPos ) {\r\n                    self.updateCursor();\r\n                }\r\n            }\r\n\r\n            slide.$slide.trigger( 'refresh' );\r\n\r\n            self.trigger( 'onUpdate', slide );\r\n\r\n        },\r\n\r\n        // Update cursor style depending if content can be zoomed\r\n        // ======================================================\r\n\r\n        updateCursor : function( nextWidth, nextHeight ) {\r\n\r\n            var self = this;\r\n            var isScaledDown;\r\n\r\n            var $container = self.$refs.container.removeClass('fancybox-is-zoomable fancybox-can-zoomIn fancybox-can-drag fancybox-can-zoomOut');\r\n\r\n            if ( !self.current || self.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            if ( self.isZoomable() ) {\r\n\r\n                $container.addClass( 'fancybox-is-zoomable' );\r\n\r\n                if ( nextWidth !== undefined && nextHeight !== undefined ) {\r\n                    isScaledDown = nextWidth < self.current.width && nextHeight < self.current.height;\r\n\r\n                } else {\r\n                    isScaledDown = self.isScaledDown();\r\n                }\r\n\r\n                if ( isScaledDown ) {\r\n\r\n                    // If image is scaled down, then, obviously, it can be zoomed to full size\r\n                    $container.addClass('fancybox-can-zoomIn');\r\n\r\n                } else {\r\n\r\n                    if ( self.current.opts.touch ) {\r\n\r\n                        // If image size ir largen than available available and touch module is not disable,\r\n                        // then user can do panning\r\n                        $container.addClass('fancybox-can-drag');\r\n\r\n                    } else {\r\n                        $container.addClass('fancybox-can-zoomOut');\r\n                    }\r\n\r\n                }\r\n\r\n            } else if ( self.current.opts.touch ) {\r\n                $container.addClass('fancybox-can-drag');\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Check if current slide is zoomable\r\n        // ==================================\r\n\r\n        isZoomable : function() {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var fitPos;\r\n\r\n            if ( !current || self.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            // Assume that slide is zoomable if\r\n            //   - image is loaded successfuly\r\n            //   - click action is \"zoom\"\r\n            //   - actual size of the image is smaller than available area\r\n            if ( current.type === 'image' && current.isLoaded && !current.hasError &&\r\n                ( current.opts.clickContent === 'zoom' || ( $.isFunction( current.opts.clickContent ) && current.opts.clickContent( current ) ===  \"zoom\" ) )\r\n            ) {\r\n\r\n                fitPos = self.getFitPos( current );\r\n\r\n                if ( current.width > fitPos.width || current.height > fitPos.height ) {\r\n                    return true;\r\n                }\r\n\r\n            }\r\n\r\n            return false;\r\n\r\n        },\r\n\r\n\r\n        // Check if current image dimensions are smaller than actual\r\n        // =========================================================\r\n\r\n        isScaledDown : function() {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var $what   = current.$content;\r\n\r\n            var rez = false;\r\n\r\n            if ( $what ) {\r\n                rez = $.fancybox.getTranslate( $what );\r\n                rez = rez.width < current.width || rez.height < current.height;\r\n            }\r\n\r\n            return rez;\r\n\r\n        },\r\n\r\n\r\n        // Check if image dimensions exceed parent element\r\n        // ===============================================\r\n\r\n        canPan : function() {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var $what   = current.$content;\r\n\r\n            var rez = false;\r\n\r\n            if ( $what ) {\r\n                rez = self.getFitPos( current );\r\n                rez = Math.abs( $what.width() - rez.width ) > 1  || Math.abs( $what.height() - rez.height ) > 1;\r\n\r\n            }\r\n\r\n            return rez;\r\n\r\n        },\r\n\r\n\r\n        // Load content into the slide\r\n        // ===========================\r\n\r\n        loadSlide : function( slide ) {\r\n\r\n            var self = this, type, $slide;\r\n            var ajaxLoad;\r\n\r\n            if ( slide.isLoading ) {\r\n                return;\r\n            }\r\n\r\n            if ( slide.isLoaded ) {\r\n                return;\r\n            }\r\n\r\n            slide.isLoading = true;\r\n\r\n            self.trigger( 'beforeLoad', slide );\r\n\r\n            type   = slide.type;\r\n            $slide = slide.$slide;\r\n\r\n            $slide\r\n                .off( 'refresh' )\r\n                .trigger( 'onReset' )\r\n                .addClass( 'fancybox-slide--' + ( type || 'unknown' ) )\r\n                .addClass( slide.opts.slideClass );\r\n\r\n            // Create content depending on the type\r\n\r\n            switch ( type ) {\r\n\r\n                case 'image':\r\n\r\n                    self.setImage( slide );\r\n\r\n                break;\r\n\r\n                case 'iframe':\r\n\r\n                    self.setIframe( slide );\r\n\r\n                break;\r\n\r\n                case 'html':\r\n\r\n                    self.setContent( slide, slide.src || slide.content );\r\n\r\n                break;\r\n\r\n                case 'inline':\r\n\r\n                    if ( $( slide.src ).length ) {\r\n                        self.setContent( slide, $( slide.src ) );\r\n\r\n                    } else {\r\n                        self.setError( slide );\r\n                    }\r\n\r\n                break;\r\n\r\n                case 'ajax':\r\n\r\n                    self.showLoading( slide );\r\n\r\n                    ajaxLoad = $.ajax( $.extend( {}, slide.opts.ajax.settings, {\r\n                        url : slide.src,\r\n                        success : function ( data, textStatus ) {\r\n\r\n                            if ( textStatus === 'success' ) {\r\n                                self.setContent( slide, data );\r\n                            }\r\n\r\n                        },\r\n                        error : function ( jqXHR, textStatus ) {\r\n\r\n                            if ( jqXHR && textStatus !== 'abort' ) {\r\n                                self.setError( slide );\r\n                            }\r\n\r\n                        }\r\n                    }));\r\n\r\n                    $slide.one( 'onReset', function () {\r\n                        ajaxLoad.abort();\r\n                    });\r\n\r\n                break;\r\n\r\n                default:\r\n\r\n                    self.setError( slide );\r\n\r\n                break;\r\n\r\n            }\r\n\r\n            return true;\r\n\r\n        },\r\n\r\n\r\n        // Use thumbnail image, if possible\r\n        // ================================\r\n\r\n        setImage : function( slide ) {\r\n\r\n            var self   = this;\r\n            var srcset = slide.opts.image.srcset;\r\n\r\n            var found, temp, pxRatio, windowWidth;\r\n\r\n            // If we have \"srcset\", then we need to find matching \"src\" value.\r\n            // This is necessary, because when you set an src attribute, the browser will preload the image\r\n            // before any javascript or even CSS is applied.\r\n            if ( srcset ) {\r\n                pxRatio     = window.devicePixelRatio || 1;\r\n                windowWidth = window.innerWidth  * pxRatio;\r\n\r\n                temp = srcset.split(',').map(function ( el ) {\r\n            \t\tvar ret = {};\r\n\r\n            \t\tel.trim().split(/\\s+/).forEach(function ( el, i ) {\r\n                        var value = parseInt( el.substring(0, el.length - 1), 10 );\r\n\r\n            \t\t\tif ( i === 0 ) {\r\n            \t\t\t\treturn ( ret.url = el );\r\n            \t\t\t}\r\n\r\n                        if ( value ) {\r\n                            ret.value   = value;\r\n                            ret.postfix = el[ el.length - 1 ];\r\n                        }\r\n\r\n            \t\t});\r\n\r\n            \t\treturn ret;\r\n            \t});\r\n\r\n                // Sort by value\r\n                temp.sort(function (a, b) {\r\n                  return a.value - b.value;\r\n                });\r\n\r\n                // Ok, now we have an array of all srcset values\r\n                for ( var j = 0; j < temp.length; j++ ) {\r\n                    var el = temp[ j ];\r\n\r\n                    if ( ( el.postfix === 'w' && el.value >= windowWidth ) || ( el.postfix === 'x' && el.value >= pxRatio ) ) {\r\n                        found = el;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                // If not found, take the last one\r\n                if ( !found && temp.length ) {\r\n                    found = temp[ temp.length - 1 ];\r\n                }\r\n\r\n                if ( found ) {\r\n                    slide.src = found.url;\r\n\r\n                    // If we have default width/height values, we can calculate height for matching source\r\n                    if ( slide.width && slide.height && found.postfix == 'w' ) {\r\n                        slide.height = ( slide.width / slide.height ) * found.value;\r\n                        slide.width  = found.value;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // This will be wrapper containing both ghost and actual image\r\n            slide.$content = $('<div class=\"fancybox-image-wrap\"></div>')\r\n                .addClass( 'fancybox-is-hidden' )\r\n                .appendTo( slide.$slide );\r\n\r\n\r\n            // If we have a thumbnail, we can display it while actual image is loading\r\n            // Users will not stare at black screen and actual image will appear gradually\r\n            if ( slide.opts.preload !== false && slide.opts.width && slide.opts.height && ( slide.opts.thumb || slide.opts.$thumb ) ) {\r\n\r\n                slide.width  = slide.opts.width;\r\n                slide.height = slide.opts.height;\r\n\r\n                slide.$ghost = $('<img />')\r\n                    .one('error', function() {\r\n\r\n                        $(this).remove();\r\n\r\n                        slide.$ghost = null;\r\n\r\n                        self.setBigImage( slide );\r\n\r\n                    })\r\n                    .one('load', function() {\r\n\r\n                        self.afterLoad( slide );\r\n\r\n                        self.setBigImage( slide );\r\n\r\n                    })\r\n                    .addClass( 'fancybox-image' )\r\n                    .appendTo( slide.$content )\r\n                    .attr( 'src', slide.opts.thumb || slide.opts.$thumb.attr( 'src' ) );\r\n\r\n            } else {\r\n\r\n                self.setBigImage( slide );\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Create full-size image\r\n        // ======================\r\n\r\n        setBigImage : function ( slide ) {\r\n            var self = this;\r\n            var $img = $('<img />');\r\n\r\n            slide.$image = $img\r\n                .one('error', function() {\r\n\r\n                    self.setError( slide );\r\n\r\n                })\r\n                .one('load', function() {\r\n\r\n                    // Clear timeout that checks if loading icon needs to be displayed\r\n                    clearTimeout( slide.timouts );\r\n\r\n                    slide.timouts = null;\r\n\r\n                    if ( self.isClosing ) {\r\n                        return;\r\n                    }\r\n\r\n                    slide.width  = this.naturalWidth;\r\n                    slide.height = this.naturalHeight;\r\n\r\n                    if ( slide.opts.image.srcset ) {\r\n                        $img.attr( 'sizes', '100vw' ).attr( 'srcset', slide.opts.image.srcset );\r\n                    }\r\n\r\n                    self.hideLoading( slide );\r\n\r\n                    if ( slide.$ghost ) {\r\n\r\n                        slide.timouts = setTimeout(function() {\r\n                            slide.timouts = null;\r\n\r\n                            slide.$ghost.hide();\r\n\r\n                        }, Math.min( 300, Math.max( 1000, slide.height / 1600 ) ) );\r\n\r\n                    } else {\r\n                        self.afterLoad( slide );\r\n                    }\r\n\r\n                })\r\n                .addClass( 'fancybox-image' )\r\n                .attr('src', slide.src)\r\n                .appendTo( slide.$content );\r\n\r\n            if ( ( $img[0].complete || $img[0].readyState == \"complete\" ) && $img[0].naturalWidth && $img[0].naturalHeight ) {\r\n                  $img.trigger( 'load' );\r\n\r\n            } else if( $img[0].error ) {\r\n                 $img.trigger( 'error' );\r\n\r\n            } else {\r\n\r\n                slide.timouts = setTimeout(function() {\r\n                    if ( !$img[0].complete && !slide.hasError ) {\r\n                        self.showLoading( slide );\r\n                    }\r\n\r\n                }, 100);\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Create iframe wrapper, iframe and bindings\r\n        // ==========================================\r\n\r\n        setIframe : function( slide ) {\r\n            var self\t= this,\r\n                opts    = slide.opts.iframe,\r\n                $slide\t= slide.$slide,\r\n                $iframe;\r\n\r\n            slide.$content = $('<div class=\"fancybox-content' + ( opts.preload ? ' fancybox-is-hidden' : '' ) + '\"></div>')\r\n                .css( opts.css )\r\n                .appendTo( $slide );\r\n\r\n            $iframe = $( opts.tpl.replace(/\\{rnd\\}/g, new Date().getTime()) )\r\n                .attr( opts.attr )\r\n                .appendTo( slide.$content );\r\n\r\n            if ( opts.preload ) {\r\n\r\n                self.showLoading( slide );\r\n\r\n                // Unfortunately, it is not always possible to determine if iframe is successfully loaded\r\n                // (due to browser security policy)\r\n\r\n                $iframe.on('load.fb error.fb', function(e) {\r\n                    this.isReady = 1;\r\n\r\n                    slide.$slide.trigger( 'refresh' );\r\n\r\n                    self.afterLoad( slide );\r\n                });\r\n\r\n                // Recalculate iframe content size\r\n                // ===============================\r\n\r\n                $slide.on('refresh.fb', function() {\r\n                    var $wrap = slide.$content,\r\n                        frameWidth  = opts.css.width,\r\n                        frameHeight = opts.css.height,\r\n                        scrollWidth,\r\n                        $contents,\r\n                        $body;\r\n\r\n                    if ( $iframe[0].isReady !== 1 ) {\r\n                        return;\r\n                    }\r\n\r\n                    // Check if content is accessible,\r\n                    // it will fail if frame is not with the same origin\r\n\r\n                    try {\r\n                        $contents = $iframe.contents();\r\n                        $body     = $contents.find('body');\r\n\r\n                    } catch (ignore) {}\r\n\r\n                    // Calculate dimensions for the wrapper\r\n                    if ( $body && $body.length ) {\r\n\r\n                        if ( frameWidth === undefined ) {\r\n                            scrollWidth = $iframe[0].contentWindow.document.documentElement.scrollWidth;\r\n\r\n                            frameWidth = Math.ceil( $body.outerWidth(true) + ( $wrap.width() - scrollWidth ) );\r\n                            frameWidth += $wrap.outerWidth() - $wrap.innerWidth();\r\n                        }\r\n\r\n                        if ( frameHeight === undefined ) {\r\n                            frameHeight = Math.ceil( $body.outerHeight(true) );\r\n                            frameHeight += $wrap.outerHeight() - $wrap.innerHeight();\r\n                        }\r\n\r\n                        // Resize wrapper to fit iframe content\r\n                        if ( frameWidth ) {\r\n                            $wrap.width( frameWidth );\r\n                        }\r\n\r\n                        if ( frameHeight ) {\r\n                            $wrap.height( frameHeight );\r\n                        }\r\n                    }\r\n\r\n                    $wrap.removeClass( 'fancybox-is-hidden' );\r\n\r\n                });\r\n\r\n            } else {\r\n\r\n                this.afterLoad( slide );\r\n\r\n            }\r\n\r\n            $iframe.attr( 'src', slide.src );\r\n\r\n            if ( slide.opts.smallBtn === true ) {\r\n                slide.$content.prepend( self.translate( slide, slide.opts.btnTpl.smallBtn ) );\r\n            }\r\n\r\n            // Remove iframe if closing or changing gallery item\r\n            $slide.one( 'onReset', function () {\r\n\r\n                // This helps IE not to throw errors when closing\r\n                try {\r\n\r\n                    $( this ).find( 'iframe' ).hide().attr( 'src', '//about:blank' );\r\n\r\n                } catch ( ignore ) {}\r\n\r\n                $( this ).empty();\r\n\r\n                slide.isLoaded = false;\r\n\r\n            });\r\n\r\n        },\r\n\r\n\r\n        // Wrap and append content to the slide\r\n        // ======================================\r\n\r\n        setContent : function ( slide, content ) {\r\n\r\n            var self = this;\r\n\r\n            if ( self.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            self.hideLoading( slide );\r\n\r\n            slide.$slide.empty();\r\n\r\n            if ( isQuery( content ) && content.parent().length ) {\r\n\r\n                // If content is a jQuery object, then it will be moved to the slide.\r\n                // The placeholder is created so we will know where to put it back.\r\n                // If user is navigating gallery fast, then the content might be already inside fancyBox\r\n                // =====================================================================================\r\n\r\n                // Make sure content is not already moved to fancyBox\r\n                content.parent( '.fancybox-slide--inline' ).trigger( 'onReset' );\r\n\r\n                // Create temporary element marking original place of the content\r\n                slide.$placeholder = $( '<div></div>' ).hide().insertAfter( content );\r\n\r\n                // Make sure content is visible\r\n                content.css('display', 'inline-block');\r\n\r\n            } else if ( !slide.hasError ) {\r\n\r\n                // If content is just a plain text, try to convert it to html\r\n                if ( $.type( content ) === 'string' ) {\r\n                    content = $('<div>').append( $.trim( content ) ).contents();\r\n\r\n                    // If we have text node, then add wrapping element to make vertical alignment work\r\n                    if ( content[0].nodeType === 3 ) {\r\n                        content = $('<div>').html( content );\r\n                    }\r\n                }\r\n\r\n                // If \"filter\" option is provided, then filter content\r\n                if ( slide.opts.filter ) {\r\n                    content = $('<div>').html( content ).find( slide.opts.filter );\r\n                }\r\n\r\n            }\r\n\r\n            slide.$slide.one('onReset', function () {\r\n\r\n                // Put content back\r\n                if ( slide.$placeholder ) {\r\n                    slide.$placeholder.after( content.hide() ).remove();\r\n\r\n                    slide.$placeholder = null;\r\n                }\r\n\r\n                // Remove custom close button\r\n                if ( slide.$smallBtn ) {\r\n                    slide.$smallBtn.remove();\r\n\r\n                    slide.$smallBtn = null;\r\n                }\r\n\r\n                // Remove content and mark slide as not loaded\r\n                if ( !slide.hasError ) {\r\n                    $(this).empty();\r\n\r\n                    slide.isLoaded = false;\r\n                }\r\n\r\n            });\r\n\r\n            slide.$content = $( content ).appendTo( slide.$slide );\r\n\r\n            if ( slide.opts.smallBtn && !slide.$smallBtn ) {\r\n                slide.$smallBtn = $( self.translate( slide, slide.opts.btnTpl.smallBtn ) ).appendTo( slide.$content.filter('div').first() );\r\n            }\r\n\r\n            this.afterLoad( slide );\r\n        },\r\n\r\n        // Display error message\r\n        // =====================\r\n\r\n        setError : function ( slide ) {\r\n\r\n            slide.hasError = true;\r\n\r\n            slide.$slide.removeClass( 'fancybox-slide--' + slide.type );\r\n\r\n            this.setContent( slide, this.translate( slide, slide.opts.errorTpl ) );\r\n\r\n        },\r\n\r\n\r\n        // Show loading icon inside the slide\r\n        // ==================================\r\n\r\n        showLoading : function( slide ) {\r\n\r\n            var self = this;\r\n\r\n            slide = slide || self.current;\r\n\r\n            if ( slide && !slide.$spinner ) {\r\n                slide.$spinner = $( self.opts.spinnerTpl ).appendTo( slide.$slide );\r\n            }\r\n\r\n        },\r\n\r\n        // Remove loading icon from the slide\r\n        // ==================================\r\n\r\n        hideLoading : function( slide ) {\r\n\r\n            var self = this;\r\n\r\n            slide = slide || self.current;\r\n\r\n            if ( slide && slide.$spinner ) {\r\n                slide.$spinner.remove();\r\n\r\n                delete slide.$spinner;\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Adjustments after slide content has been loaded\r\n        // ===============================================\r\n\r\n        afterLoad : function( slide ) {\r\n\r\n            var self = this;\r\n\r\n            if ( self.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            slide.isLoading = false;\r\n            slide.isLoaded  = true;\r\n\r\n            self.trigger( 'afterLoad', slide );\r\n\r\n            self.hideLoading( slide );\r\n\r\n            if ( slide.opts.protect && slide.$content && !slide.hasError ) {\r\n\r\n                // Disable right click\r\n                slide.$content.on( 'contextmenu.fb', function( e ) {\r\n                     if ( e.button == 2 ) {\r\n                         e.preventDefault();\r\n                     }\r\n\r\n                    return true;\r\n                });\r\n\r\n                // Add fake element on top of the image\r\n                // This makes a bit harder for user to select image\r\n                if ( slide.type === 'image' ) {\r\n                    $( '<div class=\"fancybox-spaceball\"></div>' ).appendTo( slide.$content );\r\n                }\r\n\r\n            }\r\n\r\n            self.revealContent( slide );\r\n\r\n        },\r\n\r\n\r\n        // Make content visible\r\n        // This method is called right after content has been loaded or\r\n        // user navigates gallery and transition should start\r\n        // ============================================================\r\n\r\n        revealContent : function( slide ) {\r\n\r\n            var self   = this;\r\n            var $slide = slide.$slide;\r\n\r\n            var effect, effectClassName, duration, opacity, end, start = false;\r\n\r\n            effect   = slide.opts[ self.firstRun ? 'animationEffect'   : 'transitionEffect' ];\r\n            duration = slide.opts[ self.firstRun ? 'animationDuration' : 'transitionDuration' ];\r\n\r\n            duration = parseInt( slide.forcedDuration === undefined ? duration : slide.forcedDuration, 10 );\r\n\r\n            if ( slide.isMoved || slide.pos !== self.currPos || !duration ) {\r\n                effect = false;\r\n            }\r\n\r\n            // Check if can zoom\r\n            if ( effect === 'zoom' && !( slide.pos === self.currPos && duration && slide.type === 'image' && !slide.hasError && ( start = self.getThumbPos( slide ) ) ) ) {\r\n                effect = 'fade';\r\n            }\r\n\r\n            // Zoom animation\r\n            // ==============\r\n\r\n            if ( effect === 'zoom' ) {\r\n                end = self.getFitPos( slide );\r\n\r\n                end.scaleX = end.width  / start.width;\r\n                end.scaleY = end.height / start.height;\r\n\r\n                delete end.width;\r\n                delete end.height;\r\n\r\n                // Check if we need to animate opacity\r\n                opacity = slide.opts.zoomOpacity;\r\n\r\n                if ( opacity == 'auto' ) {\r\n                    opacity = Math.abs( slide.width / slide.height - start.width / start.height ) > 0.1;\r\n                }\r\n\r\n                if ( opacity ) {\r\n                    start.opacity = 0.1;\r\n                    end.opacity   = 1;\r\n                }\r\n\r\n                // Draw image at start position\r\n                $.fancybox.setTranslate( slide.$content.removeClass( 'fancybox-is-hidden' ), start );\r\n\r\n                forceRedraw( slide.$content );\r\n\r\n                // Start animation\r\n                $.fancybox.animate( slide.$content, end, duration, function() {\r\n                    self.complete();\r\n                });\r\n\r\n                return;\r\n            }\r\n\r\n\r\n            self.updateSlide( slide );\r\n\r\n\r\n            // Simply show content\r\n            // ===================\r\n\r\n            if ( !effect ) {\r\n                forceRedraw( $slide );\r\n\r\n                slide.$content.removeClass( 'fancybox-is-hidden' );\r\n\r\n                if ( slide.pos === self.currPos ) {\r\n                    self.complete();\r\n                }\r\n\r\n                return;\r\n            }\r\n\r\n            $.fancybox.stop( $slide );\r\n\r\n            effectClassName = 'fancybox-animated fancybox-slide--' + ( slide.pos > self.prevPos ? 'next' : 'previous' ) + ' fancybox-fx-' + effect;\r\n\r\n            $slide.removeAttr( 'style' ).removeClass( 'fancybox-slide--current fancybox-slide--next fancybox-slide--previous' ).addClass( effectClassName );\r\n\r\n            slide.$content.removeClass( 'fancybox-is-hidden' );\r\n\r\n            //Force reflow for CSS3 transitions\r\n            forceRedraw( $slide );\r\n\r\n            $.fancybox.animate( $slide, 'fancybox-slide--current', duration, function(e) {\r\n                $slide.removeClass( effectClassName ).removeAttr( 'style' );\r\n\r\n                if ( slide.pos === self.currPos ) {\r\n                    self.complete();\r\n                }\r\n\r\n            }, true);\r\n\r\n        },\r\n\r\n\r\n        // Check if we can and have to zoom from thumbnail\r\n        //================================================\r\n\r\n        getThumbPos : function( slide ) {\r\n\r\n            var self = this;\r\n            var rez  = false;\r\n\r\n            // Check if element is inside the viewport by at least 1 pixel\r\n            var isElementVisible = function( $el ) {\r\n                var element = $el[0];\r\n\r\n                var elementRect = element.getBoundingClientRect();\r\n                var parentRects = [];\r\n\r\n                var visibleInAllParents;\r\n\r\n                while ( element.parentElement !== null ) {\r\n                    if ( $(element.parentElement).css('overflow') === 'hidden'  || $(element.parentElement).css('overflow') === 'auto' ) {\r\n                        parentRects.push(element.parentElement.getBoundingClientRect());\r\n                    }\r\n\r\n                    element = element.parentElement;\r\n                }\r\n\r\n                visibleInAllParents = parentRects.every(function(parentRect){\r\n                    var visiblePixelX = Math.min(elementRect.right, parentRect.right) - Math.max(elementRect.left, parentRect.left);\r\n                    var visiblePixelY = Math.min(elementRect.bottom, parentRect.bottom) - Math.max(elementRect.top, parentRect.top);\r\n\r\n                    return visiblePixelX > 0 && visiblePixelY > 0;\r\n                });\r\n\r\n                return visibleInAllParents &&\r\n                    elementRect.bottom > 0 && elementRect.right > 0 &&\r\n                    elementRect.left < $(window).width() && elementRect.top < $(window).height();\r\n            };\r\n\r\n            var $thumb   = slide.opts.$thumb;\r\n            var thumbPos = $thumb ? $thumb.offset() : 0;\r\n            var slidePos;\r\n\r\n            if ( thumbPos && $thumb[0].ownerDocument === document && isElementVisible( $thumb ) ) {\r\n                slidePos = self.$refs.stage.offset();\r\n\r\n                rez = {\r\n                    top    : thumbPos.top  - slidePos.top  + parseFloat( $thumb.css( \"border-top-width\" ) || 0 ),\r\n                    left   : thumbPos.left - slidePos.left + parseFloat( $thumb.css( \"border-left-width\" ) || 0 ),\r\n                    width  : $thumb.width(),\r\n                    height : $thumb.height(),\r\n                    scaleX : 1,\r\n                    scaleY : 1\r\n                };\r\n            }\r\n\r\n            return rez;\r\n        },\r\n\r\n\r\n        // Final adjustments after current gallery item is moved to position\r\n        // and it`s content is loaded\r\n        // ==================================================================\r\n\r\n        complete : function() {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var slides  = {};\r\n\r\n            if ( current.isMoved || !current.isLoaded || current.isComplete ) {\r\n                return;\r\n            }\r\n\r\n            current.isComplete = true;\r\n\r\n            current.$slide.siblings().trigger( 'onReset' );\r\n\r\n            // Trigger any CSS3 transiton inside the slide\r\n            forceRedraw( current.$slide );\r\n\r\n            current.$slide.addClass( 'fancybox-slide--complete' );\r\n\r\n            // Remove unnecessary slides\r\n            $.each( self.slides, function( key, slide ) {\r\n                if ( slide.pos >= self.currPos - 1 && slide.pos <= self.currPos + 1 ) {\r\n                    slides[ slide.pos ] = slide;\r\n\r\n                } else if ( slide ) {\r\n\r\n                    $.fancybox.stop( slide.$slide );\r\n\r\n                    slide.$slide.off().remove();\r\n                }\r\n            });\r\n\r\n            self.slides = slides;\r\n\r\n            self.updateCursor();\r\n\r\n            self.trigger( 'afterShow' );\r\n\r\n            // Try to focus on the first focusable element\r\n            if ( $( document.activeElement ).is( '[disabled]' ) || ( current.opts.autoFocus && !( current.type == 'image' || current.type === 'iframe' ) ) ) {\r\n                self.focus();\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Preload next and previous slides\r\n        // ================================\r\n\r\n        preload : function() {\r\n            var self = this;\r\n            var next, prev;\r\n\r\n            if ( self.group.length < 2 ) {\r\n                return;\r\n            }\r\n\r\n            next  = self.slides[ self.currPos + 1 ];\r\n            prev  = self.slides[ self.currPos - 1 ];\r\n\r\n            if ( next && next.type === 'image' ) {\r\n                self.loadSlide( next );\r\n            }\r\n\r\n            if ( prev && prev.type === 'image' ) {\r\n                self.loadSlide( prev );\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Try to find and focus on the first focusable element\r\n        // ====================================================\r\n\r\n        focus : function() {\r\n            var current = this.current;\r\n            var $el;\r\n\r\n            if ( this.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            if ( current && current.isComplete ) {\r\n\r\n                // Look for first input with autofocus attribute\r\n                $el = current.$slide.find('input[autofocus]:enabled:visible:first');\r\n\r\n                if ( !$el.length ) {\r\n                    $el = current.$slide.find('button,:input,[tabindex],a').filter(':enabled:visible:first');\r\n                }\r\n            }\r\n\r\n            $el = $el && $el.length ? $el : this.$refs.container;\r\n\r\n            $el.focus();\r\n        },\r\n\r\n\r\n        // Activates current instance - brings container to the front and enables keyboard,\r\n        // notifies other instances about deactivating\r\n        // =================================================================================\r\n\r\n        activate : function () {\r\n            var self = this;\r\n\r\n            // Deactivate all instances\r\n            $( '.fancybox-container' ).each(function () {\r\n                var instance = $(this).data( 'FancyBox' );\r\n\r\n                // Skip self and closing instances\r\n                if (instance && instance.uid !== self.uid && !instance.isClosing) {\r\n                    instance.trigger( 'onDeactivate' );\r\n                }\r\n\r\n            });\r\n\r\n            if ( self.current ) {\r\n                if ( self.$refs.container.index() > 0 ) {\r\n                    self.$refs.container.prependTo( document.body );\r\n                }\r\n\r\n                self.updateControls();\r\n            }\r\n\r\n            self.trigger( 'onActivate' );\r\n\r\n            self.addEvents();\r\n\r\n        },\r\n\r\n\r\n        // Start closing procedure\r\n        // This will start \"zoom-out\" animation if needed and clean everything up afterwards\r\n        // =================================================================================\r\n\r\n        close : function( e, d ) {\r\n\r\n            var self    = this;\r\n            var current = self.current;\r\n\r\n            var effect, duration;\r\n            var $what, opacity, start, end;\r\n\r\n            var done = function() {\r\n                self.cleanUp( e );\r\n            };\r\n\r\n            if ( self.isClosing ) {\r\n                return false;\r\n            }\r\n\r\n            self.isClosing = true;\r\n\r\n            // If beforeClose callback prevents closing, make sure content is centered\r\n            if ( self.trigger( 'beforeClose', e ) === false ) {\r\n                self.isClosing = false;\r\n\r\n                requestAFrame(function() {\r\n                    self.update();\r\n                });\r\n\r\n                return false;\r\n            }\r\n\r\n            // Remove all events\r\n            // If there are multiple instances, they will be set again by \"activate\" method\r\n            self.removeEvents();\r\n\r\n            if ( current.timouts ) {\r\n                clearTimeout( current.timouts );\r\n            }\r\n\r\n            $what    = current.$content;\r\n            effect   = current.opts.animationEffect;\r\n            duration = $.isNumeric( d ) ? d : ( effect ? current.opts.animationDuration : 0 );\r\n\r\n            // Remove other slides\r\n            current.$slide.off( transitionEnd ).removeClass( 'fancybox-slide--complete fancybox-slide--next fancybox-slide--previous fancybox-animated' );\r\n\r\n            current.$slide.siblings().trigger( 'onReset' ).remove();\r\n\r\n            // Trigger animations\r\n            if ( duration ) {\r\n                self.$refs.container.removeClass( 'fancybox-is-open' ).addClass( 'fancybox-is-closing' );\r\n            }\r\n\r\n            // Clean up\r\n            self.hideLoading( current );\r\n\r\n            self.hideControls();\r\n\r\n            self.updateCursor();\r\n\r\n            // Check if possible to zoom-out\r\n            if ( effect === 'zoom' && !( e !== true && $what && duration && current.type === 'image' && !current.hasError && ( end = self.getThumbPos( current ) ) ) ) {\r\n                effect = 'fade';\r\n            }\r\n\r\n            if ( effect === 'zoom' ) {\r\n                $.fancybox.stop( $what );\r\n\r\n                start = $.fancybox.getTranslate( $what );\r\n\r\n                start.width  = start.width  * start.scaleX;\r\n                start.height = start.height * start.scaleY;\r\n\r\n                // Check if we need to animate opacity\r\n                opacity = current.opts.zoomOpacity;\r\n\r\n                if ( opacity == 'auto' ) {\r\n                    opacity = Math.abs( current.width / current.height - end.width / end.height ) > 0.1;\r\n                }\r\n\r\n                if ( opacity ) {\r\n                    end.opacity = 0;\r\n                }\r\n\r\n                start.scaleX = start.width  / end.width;\r\n                start.scaleY = start.height / end.height;\r\n\r\n                start.width  = end.width;\r\n                start.height = end.height;\r\n\r\n                $.fancybox.setTranslate( current.$content, start );\r\n\r\n                $.fancybox.animate( current.$content, end, duration, done );\r\n\r\n                return true;\r\n            }\r\n\r\n            if ( effect && duration ) {\r\n\r\n                // If skip animation\r\n                if ( e === true ) {\r\n                    setTimeout( done, duration );\r\n\r\n                } else {\r\n                    $.fancybox.animate( current.$slide.removeClass( 'fancybox-slide--current' ), 'fancybox-animated fancybox-slide--previous fancybox-fx-' + effect, duration, done );\r\n                }\r\n\r\n            } else {\r\n                done();\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n\r\n        // Final adjustments after removing the instance\r\n        // =============================================\r\n\r\n        cleanUp : function( e ) {\r\n            var self = this,\r\n                instance;\r\n\r\n            self.current.$slide.trigger( 'onReset' );\r\n\r\n            self.$refs.container.empty().remove();\r\n\r\n            self.trigger( 'afterClose', e );\r\n\r\n            // Place back focus\r\n            if ( self.$lastFocus && !!self.current.opts.backFocus ) {\r\n                self.$lastFocus.focus();\r\n            }\r\n\r\n            self.current = null;\r\n\r\n            // Check if there are other instances\r\n            instance = $.fancybox.getInstance();\r\n\r\n            if ( instance ) {\r\n                instance.activate();\r\n\r\n            } else {\r\n                $W.scrollTop( self.scrollTop ).scrollLeft( self.scrollLeft );\r\n\r\n                $( 'html' ).removeClass( 'fancybox-enabled' );\r\n\r\n                $( '#fancybox-style-noscroll' ).remove();\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Call callback and trigger an event\r\n        // ==================================\r\n\r\n        trigger : function( name, slide ) {\r\n            var args  = Array.prototype.slice.call(arguments, 1),\r\n                self  = this,\r\n                obj   = slide && slide.opts ? slide : self.current,\r\n                rez;\r\n\r\n            if ( obj ) {\r\n                args.unshift( obj );\r\n\r\n            } else {\r\n                obj = self;\r\n            }\r\n\r\n            args.unshift( self );\r\n\r\n            if ( $.isFunction( obj.opts[ name ] ) ) {\r\n                rez = obj.opts[ name ].apply( obj, args );\r\n            }\r\n\r\n            if ( rez === false ) {\r\n                return rez;\r\n            }\r\n\r\n            if ( name === 'afterClose' ) {\r\n                $D.trigger( name + '.fb', args );\r\n\r\n            } else {\r\n                self.$refs.container.trigger( name + '.fb', args );\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Update infobar values, navigation button states and reveal caption\r\n        // ==================================================================\r\n\r\n        updateControls : function ( force ) {\r\n\r\n            var self = this;\r\n\r\n            var current  = self.current;\r\n            var index    = current.index;\r\n            var opts     = current.opts;\r\n            var caption  = opts.caption;\r\n            var $caption = self.$refs.caption;\r\n\r\n            // Recalculate content dimensions\r\n            current.$slide.trigger( 'refresh' );\r\n\r\n            self.$caption = caption && caption.length ? $caption.html( caption ) : null;\r\n\r\n            if ( !self.isHiddenControls ) {\r\n                self.showControls();\r\n            }\r\n\r\n            // Update info and navigation elements\r\n            $('[data-fancybox-count]').html( self.group.length );\r\n            $('[data-fancybox-index]').html( index + 1 );\r\n\r\n            $('[data-fancybox-prev]').prop('disabled', ( !opts.loop && index <= 0 ) );\r\n            $('[data-fancybox-next]').prop('disabled', ( !opts.loop && index >= self.group.length - 1 ) );\r\n\r\n        },\r\n\r\n        // Hide toolbar and caption\r\n        // ========================\r\n\r\n        hideControls : function () {\r\n\r\n            this.isHiddenControls = true;\r\n\r\n            this.$refs.container.removeClass('fancybox-show-infobar fancybox-show-toolbar fancybox-show-caption fancybox-show-nav');\r\n\r\n        },\r\n\r\n        showControls : function() {\r\n\r\n            var self = this;\r\n            var opts = self.current ? self.current.opts : self.opts;\r\n            var $container = self.$refs.container;\r\n\r\n            self.isHiddenControls   = false;\r\n            self.idleSecondsCounter = 0;\r\n\r\n            $container\r\n                .toggleClass('fancybox-show-toolbar', !!( opts.toolbar && opts.buttons ) )\r\n                .toggleClass('fancybox-show-infobar', !!( opts.infobar && self.group.length > 1 ) )\r\n                .toggleClass('fancybox-show-nav',     !!( opts.arrows && self.group.length > 1 ) )\r\n                .toggleClass('fancybox-is-modal',     !!opts.modal );\r\n\r\n            if ( self.$caption ) {\r\n                $container.addClass( 'fancybox-show-caption ');\r\n\r\n            } else {\r\n               $container.removeClass( 'fancybox-show-caption' );\r\n           }\r\n\r\n       },\r\n\r\n\r\n       // Toggle toolbar and caption\r\n       // ==========================\r\n\r\n       toggleControls : function() {\r\n\r\n           if ( this.isHiddenControls ) {\r\n               this.showControls();\r\n\r\n           } else {\r\n               this.hideControls();\r\n           }\r\n\r\n       },\r\n\r\n\r\n    });\r\n\r\n\r\n    $.fancybox = {\r\n\r\n        version  : \"3.1.28\",\r\n        defaults : defaults,\r\n\r\n\r\n        // Get current instance and execute a command.\r\n        //\r\n        // Examples of usage:\r\n        //\r\n        //   $instance = $.fancybox.getInstance();\r\n        //   $.fancybox.getInstance().jumpTo( 1 );\r\n        //   $.fancybox.getInstance( 'jumpTo', 1 );\r\n        //   $.fancybox.getInstance( function() {\r\n        //       console.info( this.currIndex );\r\n        //   });\r\n        // ======================================================\r\n\r\n        getInstance : function ( command ) {\r\n            var instance = $('.fancybox-container:not(\".fancybox-is-closing\"):first').data( 'FancyBox' );\r\n            var args     = Array.prototype.slice.call(arguments, 1);\r\n\r\n            if ( instance instanceof FancyBox ) {\r\n\r\n                if ( $.type( command ) === 'string' ) {\r\n                    instance[ command ].apply( instance, args );\r\n\r\n                } else if ( $.type( command ) === 'function' ) {\r\n                    command.apply( instance, args );\r\n\r\n                }\r\n\r\n                return instance;\r\n            }\r\n\r\n            return false;\r\n\r\n        },\r\n\r\n\r\n        // Create new instance\r\n        // ===================\r\n\r\n        open : function ( items, opts, index ) {\r\n            return new FancyBox( items, opts, index );\r\n        },\r\n\r\n\r\n        // Close current or all instances\r\n        // ==============================\r\n\r\n        close : function ( all ) {\r\n            var instance = this.getInstance();\r\n\r\n            if ( instance ) {\r\n                instance.close();\r\n\r\n                // Try to find and close next instance\r\n\r\n                if ( all === true ) {\r\n                    this.close();\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        // Close instances and unbind all events\r\n        // ==============================\r\n\r\n        destroy : function() {\r\n\r\n            this.close( true );\r\n\r\n            $D.off( 'click.fb-start' );\r\n\r\n        },\r\n\r\n\r\n        // Try to detect mobile devices\r\n        // ============================\r\n\r\n        isMobile : document.createTouch !== undefined && /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent),\r\n\r\n\r\n        // Detect if 'translate3d' support is available\r\n        // ============================================\r\n\r\n        use3d : (function() {\r\n            var div = document.createElement('div');\r\n\r\n            return window.getComputedStyle && window.getComputedStyle( div ).getPropertyValue('transform') && !(document.documentMode && document.documentMode < 11);\r\n        }()),\r\n\r\n\r\n        // Helper function to get current visual state of an element\r\n        // returns array[ top, left, horizontal-scale, vertical-scale, opacity ]\r\n        // =====================================================================\r\n\r\n        getTranslate : function( $el ) {\r\n            var matrix;\r\n\r\n            if ( !$el || !$el.length ) {\r\n                return false;\r\n            }\r\n\r\n            matrix  = $el.eq( 0 ).css('transform');\r\n\r\n            if ( matrix && matrix.indexOf( 'matrix' ) !== -1 ) {\r\n                matrix = matrix.split('(')[1];\r\n                matrix = matrix.split(')')[0];\r\n                matrix = matrix.split(',');\r\n            } else {\r\n                matrix = [];\r\n            }\r\n\r\n            if ( matrix.length ) {\r\n\r\n                // If IE\r\n                if ( matrix.length > 10 ) {\r\n                    matrix = [ matrix[13], matrix[12], matrix[0], matrix[5] ];\r\n\r\n                } else {\r\n                    matrix = [ matrix[5], matrix[4], matrix[0], matrix[3]];\r\n                }\r\n\r\n                matrix = matrix.map(parseFloat);\r\n\r\n            } else {\r\n                matrix = [ 0, 0, 1, 1 ];\r\n\r\n                var transRegex = /\\.*translate\\((.*)px,(.*)px\\)/i;\r\n                var transRez = transRegex.exec( $el.eq( 0 ).attr('style') );\r\n\r\n                if ( transRez ) {\r\n                    matrix[ 0 ] = parseFloat( transRez[2] );\r\n                    matrix[ 1 ] = parseFloat( transRez[1] );\r\n                }\r\n            }\r\n\r\n            return {\r\n                top     : matrix[ 0 ],\r\n                left    : matrix[ 1 ],\r\n                scaleX  : matrix[ 2 ],\r\n                scaleY  : matrix[ 3 ],\r\n                opacity : parseFloat( $el.css('opacity') ),\r\n                width   : $el.width(),\r\n                height  : $el.height()\r\n            };\r\n\r\n        },\r\n\r\n\r\n        // Shortcut for setting \"translate3d\" properties for element\r\n        // Can set be used to set opacity, too\r\n        // ========================================================\r\n\r\n        setTranslate : function( $el, props ) {\r\n            var str  = '';\r\n            var css  = {};\r\n\r\n            if ( !$el || !props ) {\r\n                return;\r\n            }\r\n\r\n            if ( props.left !== undefined || props.top !== undefined ) {\r\n                str = ( props.left === undefined ? $el.position().left : props.left )  + 'px, ' + ( props.top === undefined ? $el.position().top : props.top ) + 'px';\r\n\r\n                if ( this.use3d ) {\r\n                    str = 'translate3d(' + str + ', 0px)';\r\n\r\n                } else {\r\n                    str = 'translate(' + str + ')';\r\n                }\r\n            }\r\n\r\n            if ( props.scaleX !== undefined && props.scaleY !== undefined ) {\r\n                str = (str.length ? str + ' ' : '') + 'scale(' + props.scaleX + ', ' + props.scaleY + ')';\r\n            }\r\n\r\n            if ( str.length ) {\r\n                css.transform = str;\r\n            }\r\n\r\n            if ( props.opacity !== undefined ) {\r\n                css.opacity = props.opacity;\r\n            }\r\n\r\n            if ( props.width !== undefined ) {\r\n                css.width = props.width;\r\n            }\r\n\r\n            if ( props.height !== undefined ) {\r\n                css.height = props.height;\r\n            }\r\n\r\n            return $el.css( css );\r\n        },\r\n\r\n\r\n        // Simple CSS transition handler\r\n        // =============================\r\n\r\n        animate : function ( $el, to, duration, callback, leaveAnimationName ) {\r\n            var event = transitionEnd || 'transitionend';\r\n\r\n            if ( $.isFunction( duration ) ) {\r\n                callback = duration;\r\n                duration = null;\r\n            }\r\n\r\n            if ( !$.isPlainObject( to ) ) {\r\n                $el.removeAttr('style');\r\n            }\r\n\r\n            $el.on( event, function(e) {\r\n\r\n                // Skip events from child elements and z-index change\r\n                if ( e && e.originalEvent && ( !$el.is( e.originalEvent.target ) || e.originalEvent.propertyName == 'z-index' ) ) {\r\n                    return;\r\n                }\r\n\r\n                $el.off( event );\r\n\r\n                if ( $.isPlainObject( to ) ) {\r\n\r\n                    if ( to.scaleX !== undefined && to.scaleY !== undefined ) {\r\n                        $el.css( 'transition-duration', '0ms' );\r\n\r\n                        to.width  = Math.round( $el.width()  * to.scaleX );\r\n                        to.height = Math.round( $el.height() * to.scaleY );\r\n\r\n                        to.scaleX = 1;\r\n                        to.scaleY = 1;\r\n\r\n                        $.fancybox.setTranslate( $el, to );\r\n                    }\r\n\r\n                } else if ( leaveAnimationName !== true ) {\r\n                    $el.removeClass( to );\r\n                }\r\n\r\n                if ( $.isFunction( callback ) ) {\r\n                    callback( e );\r\n                }\r\n\r\n            });\r\n\r\n            if ( $.isNumeric( duration ) ) {\r\n                $el.css( 'transition-duration', duration + 'ms' );\r\n            }\r\n\r\n            if ( $.isPlainObject( to ) ) {\r\n                $.fancybox.setTranslate( $el, to );\r\n\r\n            } else {\r\n                $el.addClass( to );\r\n            }\r\n\r\n            $el.data(\"timer\", setTimeout(function() {\r\n                $el.trigger( 'transitionend' );\r\n            }, duration + 16));\r\n\r\n        },\r\n\r\n        stop : function( $el ) {\r\n            clearTimeout( $el.data(\"timer\") );\r\n\r\n            $el.off( transitionEnd );\r\n        }\r\n\r\n    };\r\n\r\n\r\n    // Default click handler for \"fancyboxed\" links\r\n    // ============================================\r\n\r\n    function _run( e ) {\r\n        var target\t= e.currentTarget,\r\n            opts\t= e.data ? e.data.options : {},\r\n            items\t= opts.selector ? $( opts.selector ) : ( e.data ? e.data.items : [] ),\r\n            value\t= $( target ).attr( 'data-fancybox' ) || '',\r\n            index\t= 0,\r\n            active  = $.fancybox.getInstance();\r\n\r\n        e.preventDefault();\r\n\r\n        // Avoid opening multiple times\r\n        if ( active && active.current.opts.$orig.is( target ) ) {\r\n            return;\r\n        }\r\n\r\n        // Get all related items and find index for clicked one\r\n        if ( value ) {\r\n            items = items.length ? items.filter( '[data-fancybox=\"' + value + '\"]' ) : $( '[data-fancybox=\"' + value + '\"]' );\r\n            index = items.index( target );\r\n\r\n            // Sometimes current item can not be found\r\n            // (for example, when slider clones items)\r\n            if ( index < 0 ) {\r\n                index = 0;\r\n            }\r\n\r\n        } else {\r\n            items = [ target ];\r\n        }\r\n\r\n        $.fancybox.open( items, opts, index );\r\n    }\r\n\r\n\r\n    // Create a jQuery plugin\r\n    // ======================\r\n\r\n    $.fn.fancybox = function (options) {\r\n        var selector;\r\n\r\n        options  = options || {};\r\n        selector = options.selector || false;\r\n\r\n        if ( selector ) {\r\n\r\n            $( 'body' ).off( 'click.fb-start', selector ).on( 'click.fb-start', selector, {\r\n                options : options\r\n            }, _run );\r\n\r\n        } else {\r\n\r\n            this.off( 'click.fb-start' ).on( 'click.fb-start', {\r\n                items   : this,\r\n                options : options\r\n            }, _run);\r\n\r\n        }\r\n\r\n        return this;\r\n    };\r\n\r\n\r\n    // Self initializing plugin\r\n    // ========================\r\n\r\n    $D.on( 'click.fb-start', '[data-fancybox]', _run );\r\n\r\n}( window, document, window.jQuery || jQuery ));\r\n\r\n// ==========================================================================\r\n//\r\n// Media\r\n// Adds additional media type support\r\n//\r\n// ==========================================================================\r\n;(function ($) {\r\n\r\n\t'use strict';\r\n\r\n\t// Formats matching url to final form\r\n\r\n\tvar format = function (url, rez, params) {\r\n\t\tif ( !url ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tparams = params || '';\r\n\r\n\t\tif ( $.type(params) === \"object\" ) {\r\n\t\t\tparams = $.param(params, true);\r\n\t\t}\r\n\r\n\t\t$.each(rez, function (key, value) {\r\n\t\t\turl = url.replace('$' + key, value || '');\r\n\t\t});\r\n\r\n\t\tif (params.length) {\r\n\t\t\turl += (url.indexOf('?') > 0 ? '&' : '?') + params;\r\n\t\t}\r\n\r\n\t\treturn url;\r\n\t};\r\n\r\n\t// Object containing properties for each media type\r\n\r\n\tvar defaults = {\r\n\t\tyoutube : {\r\n\t\t\tmatcher : /(youtube\\.com|youtu\\.be|youtube\\-nocookie\\.com)\\/(watch\\?(.*&)?v=|v\\/|u\\/|embed\\/?)?(videoseries\\?list=(.*)|[\\w-]{11}|\\?listType=(.*)&list=(.*))(.*)/i,\r\n\t\t\tparams  : {\r\n\t\t\t\tautoplay : 1,\r\n\t\t\t\tautohide : 1,\r\n\t\t\t\tfs  : 1,\r\n\t\t\t\trel : 0,\r\n\t\t\t\thd  : 1,\r\n\t\t\t\twmode : 'transparent',\r\n\t\t\t\tenablejsapi : 1,\r\n\t\t\t\thtml5 : 1\r\n\t\t\t},\r\n\t\t\tparamPlace : 8,\r\n\t\t\ttype  : 'iframe',\r\n\t\t\turl   : '//www.youtube.com/embed/$4',\r\n\t\t\tthumb : '//img.youtube.com/vi/$4/hqdefault.jpg'\r\n\t\t},\r\n\r\n\t\tvimeo : {\r\n\t\t\tmatcher : /^.+vimeo.com\\/(.*\\/)?([\\d]+)(.*)?/,\r\n\t\t\tparams  : {\r\n\t\t\t\tautoplay : 1,\r\n\t\t\t\thd : 1,\r\n\t\t\t\tshow_title    : 1,\r\n\t\t\t\tshow_byline   : 1,\r\n\t\t\t\tshow_portrait : 0,\r\n\t\t\t\tfullscreen    : 1,\r\n\t\t\t\tapi : 1\r\n\t\t\t},\r\n\t\t\tparamPlace : 3,\r\n\t\t\ttype : 'iframe',\r\n\t\t\turl : '//player.vimeo.com/video/$2'\r\n\t\t},\r\n\r\n\t\tmetacafe : {\r\n\t\t\tmatcher : /metacafe.com\\/watch\\/(\\d+)\\/(.*)?/,\r\n\t\t\ttype    : 'iframe',\r\n\t\t\turl     : '//www.metacafe.com/embed/$1/?ap=1'\r\n\t\t},\r\n\r\n\t\tdailymotion : {\r\n\t\t\tmatcher : /dailymotion.com\\/video\\/(.*)\\/?(.*)/,\r\n\t\t\tparams : {\r\n\t\t\t\tadditionalInfos : 0,\r\n\t\t\t\tautoStart : 1\r\n\t\t\t},\r\n\t\t\ttype : 'iframe',\r\n\t\t\turl  : '//www.dailymotion.com/embed/video/$1'\r\n\t\t},\r\n\r\n\t\tvine : {\r\n\t\t\tmatcher : /vine.co\\/v\\/([a-zA-Z0-9\\?\\=\\-]+)/,\r\n\t\t\ttype    : 'iframe',\r\n\t\t\turl     : '//vine.co/v/$1/embed/simple'\r\n\t\t},\r\n\r\n\t\tinstagram : {\r\n\t\t\tmatcher : /(instagr\\.am|instagram\\.com)\\/p\\/([a-zA-Z0-9_\\-]+)\\/?/i,\r\n\t\t\ttype    : 'image',\r\n\t\t\turl     : '//$1/p/$2/media/?size=l'\r\n\t\t},\r\n\r\n\t\t// Examples:\r\n\t\t// http://maps.google.com/?ll=48.857995,2.294297&spn=0.007666,0.021136&t=m&z=16\r\n\t\t// https://www.google.com/maps/@37.7852006,-122.4146355,14.65z\r\n\t\t// https://www.google.com/maps/place/Googleplex/@37.4220041,-122.0833494,17z/data=!4m5!3m4!1s0x0:0x6c296c66619367e0!8m2!3d37.4219998!4d-122.0840572\r\n\t\tgmap_place : {\r\n\t\t\tmatcher : /(maps\\.)?google\\.([a-z]{2,3}(\\.[a-z]{2})?)\\/(((maps\\/(place\\/(.*)\\/)?\\@(.*),(\\d+.?\\d+?)z))|(\\?ll=))(.*)?/i,\r\n\t\t\ttype    : 'iframe',\r\n\t\t\turl     : function (rez) {\r\n\t\t\t\treturn '//maps.google.' + rez[2] + '/?ll=' + ( rez[9] ? rez[9] + '&z=' + Math.floor(  rez[10]  ) + ( rez[12] ? rez[12].replace(/^\\//, \"&\") : '' )  : rez[12] ) + '&output=' + ( rez[12] && rez[12].indexOf('layer=c') > 0 ? 'svembed' : 'embed' );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// Examples:\r\n\t\t// https://www.google.com/maps/search/Empire+State+Building/\r\n\t\t// https://www.google.com/maps/search/?api=1&query=centurylink+field\r\n\t\t// https://www.google.com/maps/search/?api=1&query=47.5951518,-122.3316393\r\n\t\tgmap_search : {\r\n\t\t\tmatcher : /(maps\\.)?google\\.([a-z]{2,3}(\\.[a-z]{2})?)\\/(maps\\/search\\/)(.*)/i,\r\n\t\t\ttype    : 'iframe',\r\n\t\t\turl     : function (rez) {\r\n\t\t\t\treturn '//maps.google.' + rez[2] + '/maps?q=' + rez[5].replace('query=', 'q=').replace('api=1', '') + '&output=embed';\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t$(document).on('onInit.fb', function (e, instance) {\r\n\r\n\t\t$.each(instance.group, function( i, item ) {\r\n\r\n\t\t\tvar url\t = item.src || '',\r\n\t\t\t\ttype = false,\r\n\t\t\t\tmedia,\r\n\t\t\t\tthumb,\r\n\t\t\t\trez,\r\n\t\t\t\tparams,\r\n\t\t\t\turlParams,\r\n\t\t\t\to,\r\n\t\t\t\tprovider;\r\n\r\n\t\t\t// Skip items that already have content type\r\n\t\t\tif ( item.type ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tmedia = $.extend( true, {}, defaults, item.opts.media );\r\n\r\n\t\t\t// Look for any matching media type\r\n\t\t\t$.each(media, function ( n, el ) {\r\n\t\t\t\trez = url.match(el.matcher);\r\n\t\t\t\to   = {};\r\n\t\t\t\tprovider = n;\r\n\r\n\t\t\t\tif (!rez) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttype = el.type;\r\n\r\n\t\t\t\tif ( el.paramPlace && rez[ el.paramPlace ] ) {\r\n\t\t\t\t\turlParams = rez[ el.paramPlace ];\r\n\r\n\t\t\t\t\tif ( urlParams[ 0 ] == '?' ) {\r\n\t\t\t\t\t\turlParams = urlParams.substring(1);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\turlParams = urlParams.split('&');\r\n\r\n\t\t\t\t\tfor ( var m = 0; m < urlParams.length; ++m ) {\r\n\t\t\t\t\t\tvar p = urlParams[ m ].split('=', 2);\r\n\r\n\t\t\t\t\t\tif ( p.length == 2 ) {\r\n\t\t\t\t\t\t\to[ p[0] ] = decodeURIComponent( p[1].replace(/\\+/g, \" \") );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tparams = $.extend( true, {}, el.params, item.opts[ n ], o );\r\n\r\n\t\t\t\turl   = $.type(el.url) === \"function\" ? el.url.call(this, rez, params, item) : format(el.url, rez, params);\r\n\t\t\t\tthumb = $.type(el.thumb) === \"function\" ? el.thumb.call(this, rez, params, item) : format(el.thumb, rez);\r\n\r\n\t\t\t\tif ( provider === 'vimeo' ) {\r\n\t\t\t\t\turl = url.replace('&%23', '#');\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\r\n\t\t\t// If it is found, then change content type and update the url\r\n\r\n\t\t\tif ( type ) {\r\n\t\t\t\titem.src  = url;\r\n\t\t\t\titem.type = type;\r\n\r\n\t\t\t\tif ( !item.opts.thumb && !( item.opts.$thumb && item.opts.$thumb.length ) ) {\r\n\t\t\t\t\titem.opts.thumb = thumb;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( type === 'iframe' ) {\r\n\t\t\t\t\t$.extend(true, item.opts, {\r\n\t\t\t\t\t\tiframe : {\r\n\t\t\t\t\t\t\tpreload : false,\r\n\t\t\t\t\t\t\tattr : {\r\n\t\t\t\t\t\t\t\tscrolling : \"no\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\titem.contentProvider = provider;\r\n\r\n\t\t\t\t\titem.opts.slideClass += ' fancybox-slide--' + ( provider == 'gmap_place' || provider == 'gmap_search' ? 'map' : 'video' );\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// If no content type is found, then set it to `image` as fallback\r\n\t\t\t\titem.type = 'image';\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t});\r\n\r\n}(window.jQuery));\r\n\r\n// ==========================================================================\r\n//\r\n// Guestures\r\n// Adds touch guestures, handles click and tap events\r\n//\r\n// ==========================================================================\r\n;(function (window, document, $) {\r\n\t'use strict';\r\n\r\n\tvar requestAFrame = (function () {\r\n        return window.requestAnimationFrame ||\r\n                window.webkitRequestAnimationFrame ||\r\n                window.mozRequestAnimationFrame ||\r\n                window.oRequestAnimationFrame ||\r\n                // if all else fails, use setTimeout\r\n                function (callback) {\r\n                    return window.setTimeout(callback, 1000 / 60);\r\n                };\r\n    })();\r\n\r\n\r\n    var cancelAFrame = (function () {\r\n        return window.cancelAnimationFrame ||\r\n                window.webkitCancelAnimationFrame ||\r\n                window.mozCancelAnimationFrame ||\r\n                window.oCancelAnimationFrame ||\r\n                function (id) {\r\n                    window.clearTimeout(id);\r\n                };\r\n    })();\r\n\r\n\r\n\tvar pointers = function( e ) {\r\n\t\tvar result = [];\r\n\r\n\t\te = e.originalEvent || e || window.e;\r\n\t\te = e.touches && e.touches.length ? e.touches : ( e.changedTouches && e.changedTouches.length ? e.changedTouches : [ e ] );\r\n\r\n\t\tfor ( var key in e ) {\r\n\r\n\t\t\tif ( e[ key ].pageX ) {\r\n\t\t\t\tresult.push( { x : e[ key ].pageX, y : e[ key ].pageY } );\r\n\r\n\t\t\t} else if ( e[ key ].clientX ) {\r\n\t\t\t\tresult.push( { x : e[ key ].clientX, y : e[ key ].clientY } );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t};\r\n\r\n\tvar distance = function( point2, point1, what ) {\r\n\t\tif ( !point1 || !point2 ) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tif ( what === 'x' ) {\r\n\t\t\treturn point2.x - point1.x;\r\n\r\n\t\t} else if ( what === 'y' ) {\r\n\t\t\treturn point2.y - point1.y;\r\n\t\t}\r\n\r\n\t\treturn Math.sqrt( Math.pow( point2.x - point1.x, 2 ) + Math.pow( point2.y - point1.y, 2 ) );\r\n\t};\r\n\r\n\tvar isClickable = function( $el ) {\r\n\r\n\t\tif ( $el.is('a,button,input,select,textarea,label') || $.isFunction( $el.get(0).onclick ) || $el.data('selectable') ) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t// Check for attributes like data-fancybox-next or data-fancybox-close\r\n\t\tfor ( var i = 0, atts = $el[0].attributes, n = atts.length; i < n; i++ ) {\r\n            if ( atts[i].nodeName.substr(0, 14) === 'data-fancybox-' ) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n\t \treturn false;\r\n\t};\r\n\r\n\tvar hasScrollbars = function( el ) {\r\n\t\tvar overflowY = window.getComputedStyle( el )['overflow-y'];\r\n\t\tvar overflowX = window.getComputedStyle( el )['overflow-x'];\r\n\r\n\t\tvar vertical   = (overflowY === 'scroll' || overflowY === 'auto') && el.scrollHeight > el.clientHeight;\r\n\t\tvar horizontal = (overflowX === 'scroll' || overflowX === 'auto') && el.scrollWidth > el.clientWidth;\r\n\r\n\t\treturn vertical || horizontal;\r\n\t};\r\n\r\n\tvar isScrollable = function ( $el ) {\r\n\t\tvar rez = false;\r\n\r\n\t\twhile ( true ) {\r\n\t\t\trez\t= hasScrollbars( $el.get(0) );\r\n\r\n\t\t\tif ( rez ) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\t$el = $el.parent();\r\n\r\n\t\t\tif ( !$el.length || $el.hasClass( 'fancybox-stage' ) || $el.is( 'body' ) ) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn rez;\r\n\t};\r\n\r\n\r\n\tvar Guestures = function ( instance ) {\r\n\t\tvar self = this;\r\n\r\n\t\tself.instance = instance;\r\n\r\n\t\tself.$bg        = instance.$refs.bg;\r\n\t\tself.$stage     = instance.$refs.stage;\r\n\t\tself.$container = instance.$refs.container;\r\n\r\n\t\tself.destroy();\r\n\r\n\t\tself.$container.on( 'touchstart.fb.touch mousedown.fb.touch', $.proxy(self, 'ontouchstart') );\r\n\t};\r\n\r\n\tGuestures.prototype.destroy = function() {\r\n\t\tthis.$container.off( '.fb.touch' );\r\n\t};\r\n\r\n\tGuestures.prototype.ontouchstart = function( e ) {\r\n\t\tvar self = this;\r\n\r\n\t\tvar $target  = $( e.target );\r\n\t\tvar instance = self.instance;\r\n\t\tvar current  = instance.current;\r\n\t\tvar $content = current.$content;\r\n\r\n\t\tvar isTouchDevice = ( e.type == 'touchstart' );\r\n\r\n\t\t// Do not respond to both events\r\n\t\tif ( isTouchDevice ) {\r\n\t        self.$container.off( 'mousedown.fb.touch' );\r\n\t    }\r\n\r\n\t\t// Ignore clicks while zooming or closing\r\n\t\tif ( !current || self.instance.isAnimating || self.instance.isClosing ) {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Ignore right click\r\n\t\tif ( e.originalEvent && e.originalEvent.button == 2 ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Ignore taping on links, buttons, input elements\r\n\t\tif ( !$target.length || isClickable( $target ) || isClickable( $target.parent() ) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Ignore clicks on the scrollbar\r\n\t\tif ( e.originalEvent.clientX > $target[0].clientWidth + $target.offset().left ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tself.startPoints = pointers( e );\r\n\r\n\t\t// Prevent zooming if already swiping\r\n\t\tif ( !self.startPoints || ( self.startPoints.length > 1 && instance.isSliding ) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tself.$target  = $target;\r\n\t\tself.$content = $content;\r\n\t\tself.canTap   = true;\r\n\r\n\t\t$(document).off( '.fb.touch' );\r\n\r\n\t\t$(document).on( isTouchDevice ? 'touchend.fb.touch touchcancel.fb.touch' : 'mouseup.fb.touch mouseleave.fb.touch',  $.proxy(self, \"ontouchend\"));\r\n\t\t$(document).on( isTouchDevice ? 'touchmove.fb.touch' : 'mousemove.fb.touch',  $.proxy(self, \"ontouchmove\"));\r\n\r\n\t\tif ( !(instance.current.opts.touch || instance.canPan() ) || !( $target.is( self.$stage ) || self.$stage.find( $target ).length ) ) {\r\n\r\n\t\t\t// Prevent ghosting\r\n\t\t\tif ( $target.is('img') ) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\te.stopPropagation();\r\n\r\n\t\tif ( !( $.fancybox.isMobile && ( isScrollable( self.$target ) || isScrollable( self.$target.parent() ) ) ) ) {\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\r\n\t\tself.canvasWidth  = Math.round( current.$slide[0].clientWidth );\r\n\t\tself.canvasHeight = Math.round( current.$slide[0].clientHeight );\r\n\r\n\t\tself.startTime = new Date().getTime();\r\n\t\tself.distanceX = self.distanceY = self.distance = 0;\r\n\r\n\t\tself.isPanning = false;\r\n\t\tself.isSwiping = false;\r\n\t\tself.isZooming = false;\r\n\r\n\t\tself.sliderStartPos  = self.sliderLastPos || { top: 0, left: 0 };\r\n\t\tself.contentStartPos = $.fancybox.getTranslate( self.$content );\r\n\t\tself.contentLastPos  = null;\r\n\r\n\t\tif ( self.startPoints.length === 1 && !self.isZooming ) {\r\n\t\t\tself.canTap = !instance.isSliding;\r\n\r\n\t\t\tif ( current.type === 'image' && ( self.contentStartPos.width > self.canvasWidth + 1 || self.contentStartPos.height > self.canvasHeight + 1 ) ) {\r\n\r\n\t\t\t\t$.fancybox.stop( self.$content );\r\n\r\n\t\t\t\tself.$content.css( 'transition-duration', '0ms' );\r\n\r\n\t\t\t\tself.isPanning = true;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tself.isSwiping = true;\r\n\t\t\t}\r\n\r\n\t\t\tself.$container.addClass('fancybox-controls--isGrabbing');\r\n\t\t}\r\n\r\n\t\tif ( self.startPoints.length === 2 && !instance.isAnimating && !current.hasError && current.type === 'image' && ( current.isLoaded || current.$ghost ) ) {\r\n\t\t\tself.isZooming = true;\r\n\r\n\t\t\tself.isSwiping = false;\r\n\t\t\tself.isPanning = false;\r\n\r\n\t\t\t$.fancybox.stop( self.$content );\r\n\r\n\t\t\tself.$content.css( 'transition-duration', '0ms' );\r\n\r\n\t\t\tself.centerPointStartX = ( ( self.startPoints[0].x + self.startPoints[1].x ) * 0.5 ) - $(window).scrollLeft();\r\n\t\t\tself.centerPointStartY = ( ( self.startPoints[0].y + self.startPoints[1].y ) * 0.5 ) - $(window).scrollTop();\r\n\r\n\t\t\tself.percentageOfImageAtPinchPointX = ( self.centerPointStartX - self.contentStartPos.left ) / self.contentStartPos.width;\r\n\t\t\tself.percentageOfImageAtPinchPointY = ( self.centerPointStartY - self.contentStartPos.top  ) / self.contentStartPos.height;\r\n\r\n\t\t\tself.startDistanceBetweenFingers = distance( self.startPoints[0], self.startPoints[1] );\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.ontouchmove = function( e ) {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tself.newPoints = pointers( e );\r\n\r\n\t\tif ( $.fancybox.isMobile && ( isScrollable( self.$target ) || isScrollable( self.$target.parent() ) ) ) {\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\tself.canTap = false;\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( !( self.instance.current.opts.touch || self.instance.canPan() ) || !self.newPoints || !self.newPoints.length ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tself.distanceX = distance( self.newPoints[0], self.startPoints[0], 'x' );\r\n\t\tself.distanceY = distance( self.newPoints[0], self.startPoints[0], 'y' );\r\n\r\n\t\tself.distance = distance( self.newPoints[0], self.startPoints[0] );\r\n\r\n\t\t// Skip false ontouchmove events (Chrome)\r\n\t\tif ( self.distance > 0 ) {\r\n\r\n\t\t\tif ( !( self.$target.is( self.$stage ) || self.$stage.find( self.$target ).length ) ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tif ( self.isSwiping ) {\r\n\t\t\t\tself.onSwipe();\r\n\r\n\t\t\t} else if ( self.isPanning ) {\r\n\t\t\t\tself.onPan();\r\n\r\n\t\t\t} else if ( self.isZooming ) {\r\n\t\t\t\tself.onZoom();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.onSwipe = function() {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar swiping = self.isSwiping;\r\n\t\tvar left    = self.sliderStartPos.left || 0;\r\n\t\tvar angle;\r\n\r\n\t\tif ( swiping === true ) {\r\n\r\n\t\t\tif ( Math.abs( self.distance ) > 10 )  {\r\n\r\n\t\t\t\tself.canTap = false;\r\n\r\n\t\t\t\tif ( self.instance.group.length < 2 && self.instance.opts.touch.vertical ) {\r\n\t\t\t\t\tself.isSwiping  = 'y';\r\n\r\n\t\t\t\t} else if ( self.instance.isSliding || self.instance.opts.touch.vertical === false || ( self.instance.opts.touch.vertical === 'auto' && $( window ).width() > 800 ) ) {\r\n\t\t\t\t\tself.isSwiping  = 'x';\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tangle = Math.abs( Math.atan2( self.distanceY, self.distanceX ) * 180 / Math.PI );\r\n\r\n\t\t\t\t\tself.isSwiping = ( angle > 45 && angle < 135 ) ? 'y' : 'x';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tself.instance.isSliding = self.isSwiping;\r\n\r\n\t\t\t\t// Reset points to avoid jumping, because we dropped first swipes to calculate the angle\r\n\t\t\t\tself.startPoints = self.newPoints;\r\n\r\n\t\t\t\t$.each(self.instance.slides, function( index, slide ) {\r\n\t\t\t\t\t$.fancybox.stop( slide.$slide );\r\n\r\n\t\t\t\t\tslide.$slide.css( 'transition-duration', '0ms' );\r\n\r\n\t\t\t\t\tslide.inTransition = false;\r\n\r\n\t\t\t\t\tif ( slide.pos === self.instance.current.pos ) {\r\n\t\t\t\t\t\tself.sliderStartPos.left = $.fancybox.getTranslate( slide.$slide ).left;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t//self.instance.current.isMoved = true;\r\n\r\n\t\t\t\t// Stop slideshow\r\n\t\t\t\tif ( self.instance.SlideShow && self.instance.SlideShow.isActive ) {\r\n\t\t\t\t\tself.instance.SlideShow.stop();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( swiping == 'x' ) {\r\n\r\n\t\t\t\t// Sticky edges\r\n\t\t\t\tif ( self.distanceX > 0 && ( self.instance.group.length < 2 || ( self.instance.current.index === 0 && !self.instance.current.opts.loop ) ) ) {\r\n\t\t\t\t\tleft = left + Math.pow( self.distanceX, 0.8 );\r\n\r\n\t\t\t\t} else if ( self.distanceX < 0 && ( self.instance.group.length < 2 || ( self.instance.current.index === self.instance.group.length - 1 && !self.instance.current.opts.loop ) ) ) {\r\n\t\t\t\t\tleft = left - Math.pow( -self.distanceX, 0.8 );\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tleft = left + self.distanceX;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tself.sliderLastPos = {\r\n\t\t\t\ttop  : swiping == 'x' ? 0 : self.sliderStartPos.top + self.distanceY,\r\n\t\t\t\tleft : left\r\n\t\t\t};\r\n\r\n\t\t\tif ( self.requestId ) {\r\n\t\t\t\tcancelAFrame( self.requestId );\r\n\r\n\t\t\t\tself.requestId = null;\r\n\t\t\t}\r\n\r\n\t\t\tself.requestId = requestAFrame(function() {\r\n\r\n\t\t\t\tif ( self.sliderLastPos ) {\r\n\t\t\t\t\t$.each(self.instance.slides, function( index, slide ) {\r\n\t\t\t\t\t\tvar pos = slide.pos - self.instance.currPos;\r\n\r\n\t\t\t\t\t\t$.fancybox.setTranslate( slide.$slide, {\r\n\t\t\t\t\t\t\ttop  : self.sliderLastPos.top,\r\n\t\t\t\t\t\t\tleft : self.sliderLastPos.left + ( pos * self.canvasWidth ) + ( pos * slide.opts.gutter )\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tself.$container.addClass( 'fancybox-is-sliding' );\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.onPan = function() {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar newOffsetX, newOffsetY, newPos;\r\n\r\n\t\tself.canTap = false;\r\n\r\n\t\tif ( self.contentStartPos.width > self.canvasWidth ) {\r\n\t\t\tnewOffsetX = self.contentStartPos.left + self.distanceX;\r\n\r\n\t\t} else {\r\n\t\t\tnewOffsetX = self.contentStartPos.left;\r\n\t\t}\r\n\r\n\t\tnewOffsetY = self.contentStartPos.top + self.distanceY;\r\n\r\n\t\tnewPos = self.limitMovement( newOffsetX, newOffsetY, self.contentStartPos.width, self.contentStartPos.height );\r\n\r\n\t\tnewPos.scaleX = self.contentStartPos.scaleX;\r\n\t\tnewPos.scaleY = self.contentStartPos.scaleY;\r\n\r\n\t\tself.contentLastPos = newPos;\r\n\r\n\t\tif ( self.requestId ) {\r\n\t\t\tcancelAFrame( self.requestId );\r\n\r\n\t\t\tself.requestId = null;\r\n\t\t}\r\n\r\n\t\tself.requestId = requestAFrame(function() {\r\n\t\t\t$.fancybox.setTranslate( self.$content, self.contentLastPos );\r\n\t\t});\r\n\t};\r\n\r\n\t// Make panning sticky to the edges\r\n\tGuestures.prototype.limitMovement = function( newOffsetX, newOffsetY, newWidth, newHeight ) {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar minTranslateX, minTranslateY, maxTranslateX, maxTranslateY;\r\n\r\n\t\tvar canvasWidth  = self.canvasWidth;\r\n\t\tvar canvasHeight = self.canvasHeight;\r\n\r\n\t\tvar currentOffsetX = self.contentStartPos.left;\r\n\t\tvar currentOffsetY = self.contentStartPos.top;\r\n\r\n\t\tvar distanceX = self.distanceX;\r\n\t\tvar distanceY = self.distanceY;\r\n\r\n\t\t// Slow down proportionally to traveled distance\r\n\r\n\t\tminTranslateX = Math.max(0, canvasWidth  * 0.5 - newWidth  * 0.5 );\r\n\t\tminTranslateY = Math.max(0, canvasHeight * 0.5 - newHeight * 0.5 );\r\n\r\n\t\tmaxTranslateX = Math.min( canvasWidth  - newWidth,  canvasWidth  * 0.5 - newWidth  * 0.5 );\r\n\t\tmaxTranslateY = Math.min( canvasHeight - newHeight, canvasHeight * 0.5 - newHeight * 0.5 );\r\n\r\n\t\tif ( newWidth > canvasWidth ) {\r\n\r\n\t\t\t//   ->\r\n\t\t\tif ( distanceX > 0 && newOffsetX > minTranslateX ) {\r\n\t\t\t\tnewOffsetX = minTranslateX - 1 + Math.pow( -minTranslateX + currentOffsetX + distanceX, 0.8 ) || 0;\r\n\t\t\t}\r\n\r\n\t\t\t//    <-\r\n\t\t\tif ( distanceX  < 0 && newOffsetX < maxTranslateX ) {\r\n\t\t\t\tnewOffsetX = maxTranslateX + 1 - Math.pow( maxTranslateX - currentOffsetX - distanceX, 0.8 ) || 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( newHeight > canvasHeight ) {\r\n\r\n\t\t\t//   \\/\r\n\t\t\tif ( distanceY > 0 && newOffsetY > minTranslateY ) {\r\n\t\t\t\tnewOffsetY = minTranslateY - 1 + Math.pow(-minTranslateY + currentOffsetY + distanceY, 0.8 ) || 0;\r\n\t\t\t}\r\n\r\n\t\t\t//   /\\\r\n\t\t\tif ( distanceY < 0 && newOffsetY < maxTranslateY ) {\r\n\t\t\t\tnewOffsetY = maxTranslateY + 1 - Math.pow ( maxTranslateY - currentOffsetY - distanceY, 0.8 ) || 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttop  : newOffsetY,\r\n\t\t\tleft : newOffsetX\r\n\t\t};\r\n\r\n\t};\r\n\r\n\r\n\tGuestures.prototype.limitPosition = function( newOffsetX, newOffsetY, newWidth, newHeight ) {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar canvasWidth  = self.canvasWidth;\r\n\t\tvar canvasHeight = self.canvasHeight;\r\n\r\n\t\tif ( newWidth > canvasWidth ) {\r\n\t\t\tnewOffsetX = newOffsetX > 0 ? 0 : newOffsetX;\r\n\t\t\tnewOffsetX = newOffsetX < canvasWidth - newWidth ? canvasWidth - newWidth : newOffsetX;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Center horizontally\r\n\t\t\tnewOffsetX = Math.max( 0, canvasWidth / 2 - newWidth / 2 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( newHeight > canvasHeight ) {\r\n\t\t\tnewOffsetY = newOffsetY > 0 ? 0 : newOffsetY;\r\n\t\t\tnewOffsetY = newOffsetY < canvasHeight - newHeight ? canvasHeight - newHeight : newOffsetY;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Center vertically\r\n\t\t\tnewOffsetY = Math.max( 0, canvasHeight / 2 - newHeight / 2 );\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttop  : newOffsetY,\r\n\t\t\tleft : newOffsetX\r\n\t\t};\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.onZoom = function() {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\t// Calculate current distance between points to get pinch ratio and new width and height\r\n\r\n\t\tvar currentWidth  = self.contentStartPos.width;\r\n\t\tvar currentHeight = self.contentStartPos.height;\r\n\r\n\t\tvar currentOffsetX = self.contentStartPos.left;\r\n\t\tvar currentOffsetY = self.contentStartPos.top;\r\n\r\n\t\tvar endDistanceBetweenFingers = distance( self.newPoints[0], self.newPoints[1] );\r\n\r\n\t\tvar pinchRatio = endDistanceBetweenFingers / self.startDistanceBetweenFingers;\r\n\r\n\t\tvar newWidth  = Math.floor( currentWidth  * pinchRatio );\r\n\t\tvar newHeight = Math.floor( currentHeight * pinchRatio );\r\n\r\n\t\t// This is the translation due to pinch-zooming\r\n\t\tvar translateFromZoomingX = (currentWidth  - newWidth)  * self.percentageOfImageAtPinchPointX;\r\n\t\tvar translateFromZoomingY = (currentHeight - newHeight) * self.percentageOfImageAtPinchPointY;\r\n\r\n\t\t//Point between the two touches\r\n\r\n\t\tvar centerPointEndX = ((self.newPoints[0].x + self.newPoints[1].x) / 2) - $(window).scrollLeft();\r\n\t\tvar centerPointEndY = ((self.newPoints[0].y + self.newPoints[1].y) / 2) - $(window).scrollTop();\r\n\r\n\t\t// And this is the translation due to translation of the centerpoint\r\n\t\t// between the two fingers\r\n\r\n\t\tvar translateFromTranslatingX = centerPointEndX - self.centerPointStartX;\r\n\t\tvar translateFromTranslatingY = centerPointEndY - self.centerPointStartY;\r\n\r\n\t\t// The new offset is the old/current one plus the total translation\r\n\r\n\t\tvar newOffsetX = currentOffsetX + ( translateFromZoomingX + translateFromTranslatingX );\r\n\t\tvar newOffsetY = currentOffsetY + ( translateFromZoomingY + translateFromTranslatingY );\r\n\r\n\t\tvar newPos = {\r\n\t\t\ttop    : newOffsetY,\r\n\t\t\tleft   : newOffsetX,\r\n\t\t\tscaleX : self.contentStartPos.scaleX * pinchRatio,\r\n\t\t\tscaleY : self.contentStartPos.scaleY * pinchRatio\r\n\t\t};\r\n\r\n\t\tself.canTap = false;\r\n\r\n\t\tself.newWidth  = newWidth;\r\n\t\tself.newHeight = newHeight;\r\n\r\n\t\tself.contentLastPos = newPos;\r\n\r\n\t\tif ( self.requestId ) {\r\n\t\t\tcancelAFrame( self.requestId );\r\n\r\n\t\t\tself.requestId = null;\r\n\t\t}\r\n\r\n\t\tself.requestId = requestAFrame(function() {\r\n\t\t\t$.fancybox.setTranslate( self.$content, self.contentLastPos );\r\n\t\t});\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.ontouchend = function( e ) {\r\n\r\n\t\tvar self = this;\r\n\t\tvar dMs  = Math.max( (new Date().getTime() ) - self.startTime, 1);\r\n\r\n\t\tvar swiping = self.isSwiping;\r\n\t\tvar panning = self.isPanning;\r\n\t\tvar zooming = self.isZooming;\r\n\r\n\t\tself.endPoints = pointers( e );\r\n\r\n\t\tself.$container.removeClass( 'fancybox-controls--isGrabbing' );\r\n\r\n\t\t$(document).off( '.fb.touch' );\r\n\r\n\t\tif ( self.requestId ) {\r\n\t\t\tcancelAFrame( self.requestId );\r\n\r\n\t\t\tself.requestId = null;\r\n\t\t}\r\n\r\n\t\tself.isSwiping = false;\r\n\t\tself.isPanning = false;\r\n\t\tself.isZooming = false;\r\n\r\n\t\tif ( self.canTap )  {\r\n\t\t\treturn self.onTap( e );\r\n\t\t}\r\n\r\n\t\tself.speed = 366;\r\n\r\n\t\t// Speed in px/ms\r\n\t\tself.velocityX = self.distanceX / dMs * 0.5;\r\n\t\tself.velocityY = self.distanceY / dMs * 0.5;\r\n\r\n\t\tself.speedX = Math.max( self.speed * 0.5, Math.min( self.speed * 1.5, ( 1 / Math.abs( self.velocityX ) ) * self.speed ) );\r\n\r\n\t\tif ( panning ) {\r\n\t\t\tself.endPanning();\r\n\r\n\t\t} else if ( zooming ) {\r\n\t\t\tself.endZooming();\r\n\r\n\t\t} else {\r\n\t\t\tself.endSwiping( swiping );\r\n\t\t}\r\n\r\n\t\treturn;\r\n\t};\r\n\r\n\tGuestures.prototype.endSwiping = function( swiping ) {\r\n\r\n\t\tvar self = this;\r\n\t\tvar ret = false;\r\n\r\n\t\tself.instance.isSliding = false;\r\n\t\tself.sliderLastPos      = null;\r\n\r\n\t\t// Close if swiped vertically / navigate if horizontally\r\n\t\tif ( swiping == 'y' && Math.abs( self.distanceY ) > 50 ) {\r\n\r\n\t\t\t// Continue vertical movement\r\n\t\t\t$.fancybox.animate( self.instance.current.$slide, {\r\n\t\t\t\ttop     : self.sliderStartPos.top + self.distanceY + ( self.velocityY * 150 ),\r\n\t\t\t\topacity : 0\r\n\t\t\t}, 150 );\r\n\r\n\t\t\tret = self.instance.close( true, 300 );\r\n\r\n\t\t} else if ( swiping == 'x' && self.distanceX > 50 && self.instance.group.length > 1 ) {\r\n\t\t\tret = self.instance.previous( self.speedX );\r\n\r\n\t\t} else if ( swiping == 'x' && self.distanceX < -50  && self.instance.group.length > 1 ) {\r\n\t\t\tret = self.instance.next( self.speedX );\r\n\t\t}\r\n\r\n\t\tif ( ret === false && ( swiping == 'x' || swiping == 'y' ) ) {\r\n\t\t\tself.instance.jumpTo( self.instance.current.index, 150 );\r\n\t\t}\r\n\r\n\t\tself.$container.removeClass( 'fancybox-is-sliding' );\r\n\r\n\t};\r\n\r\n\t// Limit panning from edges\r\n\t// ========================\r\n\r\n\tGuestures.prototype.endPanning = function() {\r\n\r\n\t\tvar self = this;\r\n\t\tvar newOffsetX, newOffsetY, newPos;\r\n\r\n\t\tif ( !self.contentLastPos ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( self.instance.current.opts.touch.momentum === false ) {\r\n\t\t\tnewOffsetX = self.contentLastPos.left;\r\n\t\t\tnewOffsetY = self.contentLastPos.top;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Continue movement\r\n\t\t\tnewOffsetX = self.contentLastPos.left + ( self.velocityX * self.speed );\r\n\t\t\tnewOffsetY = self.contentLastPos.top  + ( self.velocityY * self.speed );\r\n\t\t}\r\n\r\n\t\tnewPos = self.limitPosition( newOffsetX, newOffsetY, self.contentStartPos.width, self.contentStartPos.height );\r\n\r\n\t\t newPos.width  = self.contentStartPos.width;\r\n\t\t newPos.height = self.contentStartPos.height;\r\n\r\n\t\t$.fancybox.animate( self.$content, newPos, 330 );\r\n\t};\r\n\r\n\r\n\tGuestures.prototype.endZooming = function() {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar current = self.instance.current;\r\n\r\n\t\tvar newOffsetX, newOffsetY, newPos, reset;\r\n\r\n\t\tvar newWidth  = self.newWidth;\r\n\t\tvar newHeight = self.newHeight;\r\n\r\n\t\tif ( !self.contentLastPos ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tnewOffsetX = self.contentLastPos.left;\r\n\t\tnewOffsetY = self.contentLastPos.top;\r\n\r\n\t\treset = {\r\n\t\t   \ttop    : newOffsetY,\r\n\t\t   \tleft   : newOffsetX,\r\n\t\t   \twidth  : newWidth,\r\n\t\t   \theight : newHeight,\r\n\t\t\tscaleX : 1,\r\n\t\t\tscaleY : 1\r\n\t   };\r\n\r\n\t   // Reset scalex/scaleY values; this helps for perfomance and does not break animation\r\n\t   $.fancybox.setTranslate( self.$content, reset );\r\n\r\n\t\tif ( newWidth < self.canvasWidth && newHeight < self.canvasHeight ) {\r\n\t\t\tself.instance.scaleToFit( 150 );\r\n\r\n\t\t} else if ( newWidth > current.width || newHeight > current.height ) {\r\n\t\t\tself.instance.scaleToActual( self.centerPointStartX, self.centerPointStartY, 150 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tnewPos = self.limitPosition( newOffsetX, newOffsetY, newWidth, newHeight );\r\n\r\n\t\t\t// Switch from scale() to width/height or animation will not work correctly\r\n\t\t\t$.fancybox.setTranslate( self.content, $.fancybox.getTranslate( self.$content ) );\r\n\r\n\t\t\t$.fancybox.animate( self.$content, newPos, 150 );\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.onTap = function(e) {\r\n\t\tvar self    = this;\r\n\t\tvar $target = $( e.target );\r\n\r\n\t\tvar instance = self.instance;\r\n\t\tvar current  = instance.current;\r\n\r\n\t\tvar endPoints = ( e && pointers( e ) ) || self.startPoints;\r\n\r\n\t\tvar tapX = endPoints[0] ? endPoints[0].x - self.$stage.offset().left : 0;\r\n\t\tvar tapY = endPoints[0] ? endPoints[0].y - self.$stage.offset().top  : 0;\r\n\r\n\t\tvar where;\r\n\r\n\t\tvar process = function ( prefix ) {\r\n\r\n\t\t\tvar action = current.opts[ prefix ];\r\n\r\n\t\t\tif ( $.isFunction( action ) ) {\r\n\t\t\t\taction = action.apply( instance, [ current, e ] );\r\n\t\t\t}\r\n\r\n\t\t\tif ( !action) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tswitch ( action ) {\r\n\r\n\t\t\t\tcase \"close\" :\r\n\r\n\t\t\t\t\tinstance.close( self.startEvent );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"toggleControls\" :\r\n\r\n\t\t\t\t\tinstance.toggleControls( true );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"next\" :\r\n\r\n\t\t\t\t\tinstance.next();\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"nextOrClose\" :\r\n\r\n\t\t\t\t\tif ( instance.group.length > 1 ) {\r\n\t\t\t\t\t\tinstance.next();\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tinstance.close( self.startEvent );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"zoom\" :\r\n\r\n\t\t\t\t\tif ( current.type == 'image' && ( current.isLoaded || current.$ghost ) ) {\r\n\r\n\t\t\t\t\t\tif ( instance.canPan() ) {\r\n\t\t\t\t\t\t\tinstance.scaleToFit();\r\n\r\n\t\t\t\t\t\t} else if ( instance.isScaledDown() ) {\r\n\t\t\t\t\t\t\tinstance.scaleToActual( tapX, tapY );\r\n\r\n\t\t\t\t\t\t} else if ( instance.group.length < 2 ) {\r\n\t\t\t\t\t\t\tinstance.close( self.startEvent );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\t// Ignore right click\r\n\t\tif ( e.originalEvent && e.originalEvent.button == 2 ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Skip if current slide is not in the center\r\n\t\tif ( instance.isSliding ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Skip if clicked on the scrollbar\r\n\t\tif ( tapX > $target[0].clientWidth + $target.offset().left ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Check where is clicked\r\n\t\tif ( $target.is( '.fancybox-bg,.fancybox-inner,.fancybox-outer,.fancybox-container' ) ) {\r\n\t\t\twhere = 'Outside';\r\n\r\n\t\t} else if ( $target.is( '.fancybox-slide' ) ) {\r\n\t\t\twhere = 'Slide';\r\n\r\n\t\t} else if  ( instance.current.$content && instance.current.$content.has( e.target ).length ) {\r\n\t\t \twhere = 'Content';\r\n\r\n\t\t} else {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Check if this is a double tap\r\n\t\tif ( self.tapped ) {\r\n\r\n\t\t\t// Stop previously created single tap\r\n\t\t\tclearTimeout( self.tapped );\r\n\t\t\tself.tapped = null;\r\n\r\n\t\t\t// Skip if distance between taps is too big\r\n\t\t\tif ( Math.abs( tapX - self.tapX ) > 50 || Math.abs( tapY - self.tapY ) > 50 || instance.isSliding ) {\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\r\n\t\t\t// OK, now we assume that this is a double-tap\r\n\t\t\tprocess( 'dblclick' + where );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Single tap will be processed if user has not clicked second time within 300ms\r\n\t\t\t// or there is no need to wait for double-tap\r\n\t\t\tself.tapX = tapX;\r\n\t\t\tself.tapY = tapY;\r\n\r\n\t\t\tif ( current.opts[ 'dblclick' + where ] && current.opts[ 'dblclick' + where ] !== current.opts[ 'click' + where ] ) {\r\n\t\t\t\tself.tapped = setTimeout(function() {\r\n\t\t\t\t\tself.tapped = null;\r\n\r\n\t\t\t\t\tprocess( 'click' + where );\r\n\r\n\t\t\t\t}, 300);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tprocess( 'click' + where );\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t};\r\n\r\n\t$(document).on('onActivate.fb', function (e, instance) {\r\n\t\tif ( instance && !instance.Guestures ) {\r\n\t\t\tinstance.Guestures = new Guestures( instance );\r\n\t\t}\r\n\t});\r\n\r\n\t$(document).on('beforeClose.fb', function (e, instance) {\r\n\t\tif ( instance && instance.Guestures ) {\r\n\t\t\tinstance.Guestures.destroy();\r\n\t\t}\r\n\t});\r\n\r\n\r\n}(window, document, window.jQuery));\r\n\r\n// ==========================================================================\r\n//\r\n// SlideShow\r\n// Enables slideshow functionality\r\n//\r\n// Example of usage:\r\n// $.fancybox.getInstance().SlideShow.start()\r\n//\r\n// ==========================================================================\r\n;(function (document, $) {\r\n\t'use strict';\r\n\r\n\tvar SlideShow = function( instance ) {\r\n\t\tthis.instance = instance;\r\n\t\tthis.init();\r\n\t};\r\n\r\n\t$.extend( SlideShow.prototype, {\r\n\t\ttimer    : null,\r\n\t\tisActive : false,\r\n\t\t$button  : null,\r\n\t\tspeed    : 3000,\r\n\r\n\t\tinit : function() {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tself.$button = self.instance.$refs.toolbar.find('[data-fancybox-play]').on('click', function() {\r\n\t\t\t\tself.toggle();\r\n\t\t\t});\r\n\r\n\t\t\tif ( self.instance.group.length < 2 || !self.instance.group[ self.instance.currIndex ].opts.slideShow ) {\r\n\t\t\t\tself.$button.hide();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tset : function() {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\t// Check if reached last element\r\n\t\t\tif ( self.instance && self.instance.current && (self.instance.current.opts.loop || self.instance.currIndex < self.instance.group.length - 1 )) {\r\n\t\t\t\tself.timer = setTimeout(function() {\r\n\t\t\t\t\tself.instance.next();\r\n\r\n\t\t\t\t}, self.instance.current.opts.slideShow.speed || self.speed);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tself.stop();\r\n\t\t\t\tself.instance.idleSecondsCounter = 0;\r\n\t\t\t\tself.instance.showControls();\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tclear : function() {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tclearTimeout( self.timer );\r\n\r\n\t\t\tself.timer = null;\r\n\t\t},\r\n\r\n\t\tstart : function() {\r\n\t\t\tvar self = this;\r\n\t\t\tvar current = self.instance.current;\r\n\r\n\t\t\tif ( self.instance && current && ( current.opts.loop || current.index < self.instance.group.length - 1 )) {\r\n\r\n\t\t\t\tself.isActive = true;\r\n\r\n\t\t\t\tself.$button\r\n\t\t\t\t\t.attr( 'title', current.opts.i18n[ current.opts.lang ].PLAY_STOP )\r\n\t\t\t\t\t.addClass( 'fancybox-button--pause' );\r\n\r\n\t\t\t\tif ( current.isComplete ) {\r\n\t\t\t\t\tself.set();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tstop : function() {\r\n\t\t\tvar self = this;\r\n\t\t\tvar current = self.instance.current;\r\n\r\n\t\t\tself.clear();\r\n\r\n\t\t\tself.$button\r\n\t\t\t\t.attr( 'title', current.opts.i18n[ current.opts.lang ].PLAY_START )\r\n\t\t\t\t.removeClass( 'fancybox-button--pause' );\r\n\r\n\t\t\tself.isActive = false;\r\n\t\t},\r\n\r\n\t\ttoggle : function() {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tif ( self.isActive ) {\r\n\t\t\t\tself.stop();\r\n\r\n\t\t\t} else {\r\n\t\t\t\tself.start();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t$(document).on({\r\n\t\t'onInit.fb' : function(e, instance) {\r\n\t\t\tif ( instance && !instance.SlideShow ) {\r\n\t\t\t\tinstance.SlideShow = new SlideShow( instance );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'beforeShow.fb' : function(e, instance, current, firstRun) {\r\n\t\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\t\tif ( firstRun ) {\r\n\r\n\t\t\t\tif ( SlideShow && current.opts.slideShow.autoStart ) {\r\n\t\t\t\t\tSlideShow.start();\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( SlideShow && SlideShow.isActive )  {\r\n\t\t\t\tSlideShow.clear();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'afterShow.fb' : function(e, instance, current) {\r\n\t\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\t\tif ( SlideShow && SlideShow.isActive ) {\r\n\t\t\t\tSlideShow.set();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'afterKeydown.fb' : function(e, instance, current, keypress, keycode) {\r\n\t\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\t\t// \"P\" or Spacebar\r\n\t\t\tif ( SlideShow && current.opts.slideShow && ( keycode === 80 || keycode === 32 ) && !$(document.activeElement).is( 'button,a,input' ) ) {\r\n\t\t\t\tkeypress.preventDefault();\r\n\r\n\t\t\t\tSlideShow.toggle();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'beforeClose.fb onDeactivate.fb' : function(e, instance) {\r\n\t\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\t\tif ( SlideShow ) {\r\n\t\t\t\tSlideShow.stop();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t// Page Visibility API to pause slideshow when window is not active\r\n\t$(document).on(\"visibilitychange\", function() {\r\n\t\tvar instance  = $.fancybox.getInstance();\r\n\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\tif ( SlideShow && SlideShow.isActive ) {\r\n\t\t\tif ( document.hidden ) {\r\n\t\t\t\tSlideShow.clear();\r\n\r\n\t\t\t} else {\r\n\t\t\t\tSlideShow.set();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n}(document, window.jQuery));\r\n\r\n// ==========================================================================\r\n//\r\n// FullScreen\r\n// Adds fullscreen functionality\r\n//\r\n// ==========================================================================\r\n;(function (document, $) {\r\n\t'use strict';\r\n\r\n\t// Collection of methods supported by user browser\r\n\tvar fn = (function () {\r\n\r\n\t\tvar fnMap = [\r\n\t\t\t[\r\n\t\t\t\t'requestFullscreen',\r\n\t\t\t\t'exitFullscreen',\r\n\t\t\t\t'fullscreenElement',\r\n\t\t\t\t'fullscreenEnabled',\r\n\t\t\t\t'fullscreenchange',\r\n\t\t\t\t'fullscreenerror'\r\n\t\t\t],\r\n\t\t\t// new WebKit\r\n\t\t\t[\r\n\t\t\t\t'webkitRequestFullscreen',\r\n\t\t\t\t'webkitExitFullscreen',\r\n\t\t\t\t'webkitFullscreenElement',\r\n\t\t\t\t'webkitFullscreenEnabled',\r\n\t\t\t\t'webkitfullscreenchange',\r\n\t\t\t\t'webkitfullscreenerror'\r\n\r\n\t\t\t],\r\n\t\t\t// old WebKit (Safari 5.1)\r\n\t\t\t[\r\n\t\t\t\t'webkitRequestFullScreen',\r\n\t\t\t\t'webkitCancelFullScreen',\r\n\t\t\t\t'webkitCurrentFullScreenElement',\r\n\t\t\t\t'webkitCancelFullScreen',\r\n\t\t\t\t'webkitfullscreenchange',\r\n\t\t\t\t'webkitfullscreenerror'\r\n\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t'mozRequestFullScreen',\r\n\t\t\t\t'mozCancelFullScreen',\r\n\t\t\t\t'mozFullScreenElement',\r\n\t\t\t\t'mozFullScreenEnabled',\r\n\t\t\t\t'mozfullscreenchange',\r\n\t\t\t\t'mozfullscreenerror'\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t'msRequestFullscreen',\r\n\t\t\t\t'msExitFullscreen',\r\n\t\t\t\t'msFullscreenElement',\r\n\t\t\t\t'msFullscreenEnabled',\r\n\t\t\t\t'MSFullscreenChange',\r\n\t\t\t\t'MSFullscreenError'\r\n\t\t\t]\r\n\t\t];\r\n\r\n\t\tvar val;\r\n\t\tvar ret = {};\r\n\t\tvar i, j;\r\n\r\n\t\tfor ( i = 0; i < fnMap.length; i++ ) {\r\n\t\t\tval = fnMap[ i ];\r\n\r\n\t\t\tif ( val && val[ 1 ] in document ) {\r\n\t\t\t\tfor ( j = 0; j < val.length; j++ ) {\r\n\t\t\t\t\tret[ fnMap[ 0 ][ j ] ] = val[ j ];\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn ret;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t})();\r\n\r\n\t// If browser does not have Full Screen API, then simply unset default button template and stop\r\n\tif ( !fn ) {\r\n\r\n\t\tif ( $ && $.fancybox ) {\r\n\t\t\t$.fancybox.defaults.btnTpl.fullScreen = false;\r\n\t\t}\r\n\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar FullScreen = {\r\n\r\n\t\trequest : function ( elem ) {\r\n\r\n\t\t\telem = elem || document.documentElement;\r\n\r\n\t\t\telem[ fn.requestFullscreen ]( elem.ALLOW_KEYBOARD_INPUT );\r\n\r\n\t\t},\r\n\t\texit : function () {\r\n\r\n\t\t\tdocument[ fn.exitFullscreen ]();\r\n\r\n\t\t},\r\n\t\ttoggle : function ( elem ) {\r\n\r\n\t\t\telem = elem || document.documentElement;\r\n\r\n\t\t\tif ( this.isFullscreen() ) {\r\n\t\t\t\tthis.exit();\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis.request( elem );\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tisFullscreen : function()  {\r\n\r\n\t\t\treturn Boolean( document[ fn.fullscreenElement ] );\r\n\r\n\t\t},\r\n\t\tenabled : function()  {\r\n\r\n\t\t\treturn Boolean( document[ fn.fullscreenEnabled ] );\r\n\r\n\t\t}\r\n\t};\r\n\r\n\t$(document).on({\r\n\t\t'onInit.fb' : function(e, instance) {\r\n\t\t\tvar $container;\r\n\r\n\t\t\tvar $button = instance.$refs.toolbar.find('[data-fancybox-fullscreen]');\r\n\r\n\t\t\tif ( instance && !instance.FullScreen && instance.group[ instance.currIndex ].opts.fullScreen ) {\r\n\t\t\t\t$container = instance.$refs.container;\r\n\r\n\t\t\t\t$container.on('click.fb-fullscreen', '[data-fancybox-fullscreen]', function(e) {\r\n\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\tFullScreen.toggle( $container[ 0 ] );\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif ( instance.opts.fullScreen && instance.opts.fullScreen.autoStart === true ) {\r\n\t\t\t\t\tFullScreen.request( $container[ 0 ] );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Expose API\r\n\t\t\t\tinstance.FullScreen = FullScreen;\r\n\r\n\t\t\t} else {\r\n\t\t\t\t$button.hide();\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t'afterKeydown.fb' : function(e, instance, current, keypress, keycode) {\r\n\r\n\t\t\t// \"P\" or Spacebar\r\n\t\t\tif ( instance && instance.FullScreen && keycode === 70 ) {\r\n\t\t\t\tkeypress.preventDefault();\r\n\r\n\t\t\t\tinstance.FullScreen.toggle( instance.$refs.container[ 0 ] );\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t'beforeClose.fb' : function( instance ) {\r\n\t\t\tif ( instance && instance.FullScreen ) {\r\n\t\t\t\tFullScreen.exit();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t$(document).on(fn.fullscreenchange, function() {\r\n\t\tvar instance = $.fancybox.getInstance();\r\n\r\n\t\t// If image is zooming, then force to stop and reposition properly\r\n\t\tif ( instance.current && instance.current.type === 'image' && instance.isAnimating ) {\r\n\t\t\tinstance.current.$content.css( 'transition', 'none' );\r\n\r\n\t\t\tinstance.isAnimating = false;\r\n\r\n\t\t\tinstance.update( true, true, 0 );\r\n\t\t}\r\n\r\n\t\tinstance.trigger('onFullscreenChange', FullScreen.isFullscreen() );\r\n\r\n\t});\r\n\r\n}(document, window.jQuery));\r\n\r\n// ==========================================================================\r\n//\r\n// Thumbs\r\n// Displays thumbnails in a grid\r\n//\r\n// ==========================================================================\r\n;(function (document, $) {\r\n\t'use strict';\r\n\r\n\tvar FancyThumbs = function( instance ) {\r\n\t\tthis.instance = instance;\r\n\t\tthis.init();\r\n\t};\r\n\r\n\t$.extend( FancyThumbs.prototype, {\r\n\r\n\t\t$button\t\t: null,\r\n\t\t$grid\t\t: null,\r\n\t\t$list\t\t: null,\r\n\t\tisVisible\t: false,\r\n\r\n\t\tinit : function() {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tvar first  = self.instance.group[0],\r\n\t\t\t\tsecond = self.instance.group[1];\r\n\r\n\t\t\tself.$button = self.instance.$refs.toolbar.find( '[data-fancybox-thumbs]' );\r\n\r\n\t\t\tif ( self.instance.group.length > 1 && self.instance.group[ self.instance.currIndex ].opts.thumbs && (\r\n\t\t    \t\t( first.type == 'image'  || first.opts.thumb  || first.opts.$thumb ) &&\r\n\t\t    \t\t( second.type == 'image' || second.opts.thumb || second.opts.$thumb )\r\n\t\t\t)) {\r\n\r\n\t\t\t\tself.$button.on('click', function() {\r\n\t\t\t\t\tself.toggle();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tself.isActive = true;\r\n\r\n\t\t\t} else {\r\n\t\t\t\tself.$button.hide();\r\n\r\n\t\t\t\tself.isActive = false;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tcreate : function() {\r\n\t\t\tvar instance = this.instance,\r\n\t\t\t\tlist,\r\n\t\t\t\tsrc;\r\n\r\n\t\t\tthis.$grid = $('<div class=\"fancybox-thumbs\"></div>').appendTo( instance.$refs.container );\r\n\r\n\t\t\tlist = '<ul>';\r\n\r\n\t\t\t$.each(instance.group, function( i, item ) {\r\n\r\n\t\t\t\tsrc = item.opts.thumb || ( item.opts.$thumb ? item.opts.$thumb.attr('src') : null );\r\n\r\n\t\t\t\tif ( !src && item.type === 'image' ) {\r\n\t\t\t\t\tsrc = item.src;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( src && src.length ) {\r\n\t\t\t\t\tlist += '<li data-index=\"' + i + '\"  tabindex=\"0\" class=\"fancybox-thumbs-loading\"><img data-src=\"' + src + '\" /></li>';\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t\tlist += '</ul>';\r\n\r\n\t\t\tthis.$list = $( list ).appendTo( this.$grid ).on('click', 'li', function() {\r\n\t\t\t\tinstance.jumpTo( $(this).data('index') );\r\n\t\t\t});\r\n\r\n\t\t\tthis.$list.find('img').hide().one('load', function() {\r\n\r\n\t\t\t\tvar $parent\t\t= $(this).parent().removeClass( 'fancybox-thumbs-loading' ),\r\n\t\t\t\t\tthumbWidth\t= $parent.outerWidth(),\r\n\t\t\t\t\tthumbHeight\t= $parent.outerHeight(),\r\n\t\t\t\t\twidth,\r\n\t\t\t\t\theight,\r\n\t\t\t\t\twidthRatio,\r\n\t\t\t\t\theightRatio;\r\n\r\n\t\t\t\twidth  = this.naturalWidth\t|| this.width;\r\n\t\t\t\theight = this.naturalHeight\t|| this.height;\r\n\r\n\t\t\t\t// Calculate thumbnail width/height and center it\r\n\r\n\t\t\t\twidthRatio  = width  / thumbWidth;\r\n\t\t\t\theightRatio = height / thumbHeight;\r\n\r\n\t\t\t\tif ( widthRatio >= 1 && heightRatio >= 1 ) {\r\n\t\t\t\t\tif (widthRatio > heightRatio) {\r\n\t\t\t\t\t\twidth  = width / heightRatio;\r\n\t\t\t\t\t\theight = thumbHeight;\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\twidth  = thumbWidth;\r\n\t\t\t\t\t\theight = height / widthRatio;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$(this).css({\r\n\t\t\t\t\twidth         : Math.floor(width),\r\n\t\t\t\t\theight        : Math.floor(height),\r\n\t\t\t\t\t'margin-top'  : Math.min( 0, Math.floor(thumbHeight * 0.3 - height * 0.3 ) ),\r\n\t\t\t\t\t'margin-left' : Math.min( 0, Math.floor(thumbWidth  * 0.5 - width  * 0.5 ) )\r\n\t\t\t\t}).show();\r\n\r\n\t\t\t})\r\n\t\t\t.each(function() {\r\n\t\t\t\tthis.src = $( this ).data( 'src' );\r\n\t\t\t});\r\n\r\n\t\t},\r\n\r\n\t\tfocus : function() {\r\n\r\n\t\t\tif ( this.instance.current ) {\r\n\t\t\t\tthis.$list\r\n\t\t\t\t\t.children()\r\n\t\t\t\t\t.removeClass( 'fancybox-thumbs-active' )\r\n\t\t\t\t\t.filter( '[data-index=\"' + this.instance.current.index  + '\"]' )\r\n\t\t\t\t\t.addClass( 'fancybox-thumbs-active' )\r\n\t\t\t\t\t.focus();\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tclose : function() {\r\n\t\t\tthis.$grid.hide();\r\n\t\t},\r\n\r\n\t\tupdate : function() {\r\n\r\n\t\t\tthis.instance.$refs.container.toggleClass( 'fancybox-show-thumbs', this.isVisible );\r\n\r\n\t\t\tif ( this.isVisible ) {\r\n\r\n\t\t\t\tif ( !this.$grid ) {\r\n\t\t\t\t\tthis.create();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.instance.trigger( 'onThumbsShow' );\r\n\r\n\t\t\t\tthis.focus();\r\n\r\n\t\t\t} else if ( this.$grid ) {\r\n\t\t\t\tthis.instance.trigger( 'onThumbsHide' );\r\n\t\t\t}\r\n\r\n\t\t\t// Update content position\r\n\t\t\tthis.instance.update();\r\n\r\n\t\t},\r\n\r\n\t\thide : function() {\r\n\t\t\tthis.isVisible = false;\r\n\t\t\tthis.update();\r\n\t\t},\r\n\r\n\t\tshow : function() {\r\n\t\t\tthis.isVisible = true;\r\n\t\t\tthis.update();\r\n\t\t},\r\n\r\n\t\ttoggle : function() {\r\n\t\t\tthis.isVisible = !this.isVisible;\r\n\t\t\tthis.update();\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t$(document).on({\r\n\r\n\t\t'onInit.fb' : function(e, instance) {\r\n\t\t\tif ( instance && !instance.Thumbs ) {\r\n\t\t\t\tinstance.Thumbs = new FancyThumbs( instance );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'beforeShow.fb' : function(e, instance, item, firstRun) {\r\n\t\t\tvar Thumbs = instance && instance.Thumbs;\r\n\r\n\t\t\tif ( !Thumbs || !Thumbs.isActive ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif ( item.modal ) {\r\n\t\t\t\tThumbs.$button.hide();\r\n\r\n\t\t\t\tThumbs.hide();\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif ( firstRun && item.opts.thumbs.autoStart === true ) {\r\n\t\t\t\tThumbs.show();\r\n\t\t\t}\r\n\r\n\t\t\tif ( Thumbs.isVisible ) {\r\n\t\t\t\tThumbs.focus();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'afterKeydown.fb' : function(e, instance, current, keypress, keycode) {\r\n\t\t\tvar Thumbs = instance && instance.Thumbs;\r\n\r\n\t\t\t// \"G\"\r\n\t\t\tif ( Thumbs && Thumbs.isActive && keycode === 71 ) {\r\n\t\t\t\tkeypress.preventDefault();\r\n\r\n\t\t\t\tThumbs.toggle();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'beforeClose.fb' : function( e, instance ) {\r\n\t\t\tvar Thumbs = instance && instance.Thumbs;\r\n\r\n\t\t\tif ( Thumbs && Thumbs.isVisible && instance.opts.thumbs.hideOnClose !== false ) {\r\n\t\t\t\tThumbs.close();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n\r\n}(document, window.jQuery));\r\n\r\n// ==========================================================================\r\n//\r\n// Hash\r\n// Enables linking to each modal\r\n//\r\n// ==========================================================================\r\n;(function (document, window, $) {\r\n\t'use strict';\r\n\r\n\t// Simple $.escapeSelector polyfill (for jQuery prior v3)\r\n\tif ( !$.escapeSelector ) {\r\n\t\t$.escapeSelector = function( sel ) {\r\n\t\t\tvar rcssescape = /([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\x80-\\uFFFF\\w-]/g;\r\n\t\t\tvar fcssescape = function( ch, asCodePoint ) {\r\n\t\t\t\tif ( asCodePoint ) {\r\n\t\t\t\t\t// U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER\r\n\t\t\t\t\tif ( ch === \"\\0\" ) {\r\n\t\t\t\t\t\treturn \"\\uFFFD\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Control characters and (dependent upon position) numbers get escaped as code points\r\n\t\t\t\t\treturn ch.slice( 0, -1 ) + \"\\\\\" + ch.charCodeAt( ch.length - 1 ).toString( 16 ) + \" \";\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Other potentially-special ASCII characters get backslash-escaped\r\n\t\t\t\treturn \"\\\\\" + ch;\r\n\t\t\t};\r\n\r\n\t\t\treturn ( sel + \"\" ).replace( rcssescape, fcssescape );\r\n\t\t};\r\n\t}\r\n\r\n\t// Create new history entry only once\r\n\tvar shouldCreateHistory = true;\r\n\r\n\t// Variable containing last hash value set by fancyBox\r\n\t// It will be used to determine if fancyBox needs to close after hash change is detected\r\n    var currentHash = null;\r\n\r\n\t// Throttling the history change\r\n\tvar timerID = null;\r\n\r\n\t// Get info about gallery name and current index from url\r\n    function parseUrl() {\r\n        var hash    = window.location.hash.substr( 1 );\r\n        var rez     = hash.split( '-' );\r\n        var index   = rez.length > 1 && /^\\+?\\d+$/.test( rez[ rez.length - 1 ] ) ? parseInt( rez.pop( -1 ), 10 ) || 1 : 1;\r\n        var gallery = rez.join( '-' );\r\n\r\n\t\t// Index is starting from 1\r\n\t\tif ( index < 1 ) {\r\n\t\t\tindex = 1;\r\n\t\t}\r\n\r\n        return {\r\n            hash    : hash,\r\n            index   : index,\r\n            gallery : gallery\r\n        };\r\n    }\r\n\r\n\t// Trigger click evnt on links to open new fancyBox instance\r\n\tfunction triggerFromUrl( url ) {\r\n\t\tvar $el;\r\n\r\n        if ( url.gallery !== '' ) {\r\n\r\n\t\t\t// If we can find element matching 'data-fancybox' atribute, then trigger click event for that ..\r\n\t\t\t$el = $( \"[data-fancybox='\" + $.escapeSelector( url.gallery ) + \"']\" ).eq( url.index - 1 );\r\n\r\n            if ( !$el.length ) {\r\n\t\t\t\t// .. if not, try finding element by ID\r\n\t\t\t\t$el = $( \"#\" + $.escapeSelector( url.gallery ) + \"\" );\r\n\t\t\t}\r\n\r\n\t\t\tif ( $el.length ) {\r\n\t\t\t\tshouldCreateHistory = false;\r\n\r\n\t\t\t\t$el.trigger( 'click' );\r\n\t\t\t}\r\n\r\n        }\r\n\t}\r\n\r\n\t// Get gallery name from current instance\r\n\tfunction getGalleryID( instance ) {\r\n\t\tvar opts;\r\n\r\n\t\tif ( !instance ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\topts = instance.current ? instance.current.opts : instance.opts;\r\n\r\n\t\treturn opts.hash || ( opts.$orig ? opts.$orig.data( 'fancybox' ) : ''  );\r\n\t}\r\n\r\n\t// Star when DOM becomes ready\r\n    $(function() {\r\n\r\n\t\t// Small delay is used to allow other scripts to process \"dom ready\" event\r\n\t\tsetTimeout(function() {\r\n\r\n\t\t\t// Check if this module is not disabled\r\n\t\t\tif ( $.fancybox.defaults.hash === false ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Update hash when opening/closing fancyBox\r\n\t\t    $(document).on({\r\n\t\t\t\t'onInit.fb' : function( e, instance ) {\r\n\t\t\t\t\tvar url, gallery;\r\n\r\n\t\t\t\t\tif ( instance.group[ instance.currIndex ].opts.hash === false ) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\turl     = parseUrl();\r\n\t\t\t\t\tgallery = getGalleryID( instance );\r\n\r\n\t\t\t\t\t// Make sure gallery start index matches index from hash\r\n\t\t\t\t\tif ( gallery && url.gallery && gallery == url.gallery ) {\r\n\t\t\t\t\t\tinstance.currIndex = url.index - 1;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\t'beforeShow.fb' : function( e, instance, current ) {\r\n\t\t\t\t\tvar gallery;\r\n\r\n\t\t\t\t\tif ( !current || current.opts.hash === false ) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t            gallery = getGalleryID( instance );\r\n\r\n\t\t            // Update window hash\r\n\t\t            if ( gallery && gallery !== '' ) {\r\n\r\n\t\t\t\t\t\tif ( window.location.hash.indexOf( gallery ) < 0 ) {\r\n\t\t\t                instance.opts.origHash = window.location.hash;\r\n\t\t\t            }\r\n\r\n\t\t\t\t\t\tcurrentHash = gallery + ( instance.group.length > 1 ? '-' + ( current.index + 1 ) : '' );\r\n\r\n\t\t\t\t\t\tif ( 'replaceState' in window.history ) {\r\n\t\t\t\t\t\t\tif ( timerID ) {\r\n\t\t\t\t\t\t\t\tclearTimeout( timerID );\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\ttimerID = setTimeout(function() {\r\n\t\t\t\t\t\t\t\twindow.history[ shouldCreateHistory ? 'pushState' : 'replaceState' ]( {} , document.title, window.location.pathname + window.location.search + '#' +  currentHash );\r\n\r\n\t\t\t\t\t\t\t\ttimerID = null;\r\n\r\n\t\t\t\t\t\t\t\tshouldCreateHistory = false;\r\n\r\n\t\t\t\t\t\t\t}, 300);\r\n\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\twindow.location.hash = currentHash;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t            }\r\n\r\n\t\t        },\r\n\r\n\t\t\t\t'beforeClose.fb' : function( e, instance, current ) {\r\n\t\t\t\t\tvar gallery, origHash;\r\n\r\n\t\t\t\t\tif ( timerID ) {\r\n\t\t\t\t\t\tclearTimeout( timerID );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( current.opts.hash === false ) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgallery  = getGalleryID( instance );\r\n\t\t\t\t\torigHash = instance && instance.opts.origHash ? instance.opts.origHash : '';\r\n\r\n\t\t            // Remove hash from location bar\r\n\t\t            if ( gallery && gallery !== '' ) {\r\n\r\n\t\t                if ( 'replaceState' in history ) {\r\n\t\t\t\t\t\t\twindow.history.replaceState( {} , document.title, window.location.pathname + window.location.search + origHash );\r\n\r\n\t\t                } else {\r\n\t\t\t\t\t\t\twindow.location.hash = origHash;\r\n\r\n\t\t\t\t\t\t\t// Keep original scroll position\r\n\t\t\t\t\t\t\t$( window ).scrollTop( instance.scrollTop ).scrollLeft( instance.scrollLeft );\r\n\t\t                }\r\n\t\t            }\r\n\r\n\t\t\t\t\tcurrentHash = null;\r\n\t\t        }\r\n\t\t    });\r\n\r\n\t\t\t// Check if need to close after url has changed\r\n\t\t\t$(window).on('hashchange.fb', function() {\r\n\t\t\t\tvar url = parseUrl();\r\n\r\n\t\t\t\tif ( $.fancybox.getInstance() ) {\r\n\t\t\t\t\tif ( currentHash && currentHash !== url.gallery + '-' + url.index && !( url.index === 1 && currentHash == url.gallery ) ) {\r\n\t\t\t\t\t\tcurrentHash = null;\r\n\r\n\t\t\t\t\t\t$.fancybox.close();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( url.gallery !== '' ) {\r\n\t\t\t\t\ttriggerFromUrl( url );\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// Check current hash and trigger click event on matching element to start fancyBox, if needed\r\n\t\t\ttriggerFromUrl( parseUrl() );\r\n\r\n\t\t}, 50);\r\n\r\n    });\r\n\r\n}(document, window, window.jQuery));\r\n"]}